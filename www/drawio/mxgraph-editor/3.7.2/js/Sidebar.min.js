function Sidebar(b,a){this.editorUi=b;this.container=a;this.palettes=new Object();this.taglist=new Object();this.showTooltips=true;this.graph=b.createTemporaryGraph(this.editorUi.editor.graph.getStylesheet());this.graph.cellRenderer.antiAlias=false;this.graph.foldingEnabled=false;if(!mxClient.IS_IE&&!mxClient.IS_IE11){this.graph.container.style.display="none"}document.body.appendChild(this.graph.container);this.pointerUpHandler=mxUtils.bind(this,function(){this.showTooltips=true});mxEvent.addListener(document,(mxClient.IS_POINTER)?"pointerup":"mouseup",this.pointerUpHandler);this.pointerDownHandler=mxUtils.bind(this,function(){this.showTooltips=false;this.hideTooltip()});mxEvent.addListener(document,(mxClient.IS_POINTER)?"pointerdown":"mousedown",this.pointerDownHandler);this.pointerMoveHandler=mxUtils.bind(this,function(c){var d=mxEvent.getSource(c);while(d!=null){if(d==this.currentElt){return}d=d.parentNode}this.hideTooltip()});mxEvent.addListener(document,(mxClient.IS_POINTER)?"pointermove":"mousemove",this.pointerMoveHandler);this.pointerOutHandler=mxUtils.bind(this,function(c){if(c.toElement==null&&c.relatedTarget==null){this.hideTooltip()}});mxEvent.addListener(document,(mxClient.IS_POINTER)?"pointerout":"mouseout",this.pointerOutHandler);mxEvent.addListener(a,"scroll",mxUtils.bind(this,function(){this.showTooltips=true}));this.init();if(!mxClient.IS_SVG){new Image().src=IMAGE_PATH+"/tooltip.png"}}Sidebar.prototype.init=function(){var a=STENCIL_PATH;this.addSearchPalette(true);this.addGeneralPalette(true);this.addMiscPalette(false);this.addAdvancedPalette(false);this.addBasicPalette(a);this.addStencilPalette("arrows",mxResources.get("arrows"),a+"/arrows.xml",";whiteSpace=wrap;html=1;fillColor=#ffffff;strokeColor=#000000;strokeWidth=2");this.addUmlPalette(false);this.addBpmnPalette(a,false);this.addStencilPalette("flowchart","Flowchart",a+"/flowchart.xml",";whiteSpace=wrap;html=1;fillColor=#ffffff;strokeColor=#000000;strokeWidth=2");this.addImagePalette("clipart",mxResources.get("clipart"),a+"/clipart/","_128x128.png",["Earth_globe","Empty_Folder","Full_Folder","Gear","Lock","Software","Virus","Email","Database","Router_Icon","iPad","iMac","Laptop","MacBook","Monitor_Tower","Printer","Server_Tower","Workstation","Firewall_02","Wireless_Router_N","Credit_Card","Piggy_Bank","Graph","Safe","Shopping_Cart","Suit1","Suit2","Suit3","Pilot1","Worker1","Soldier1","Doctor1","Tech1","Security1","Telesales1"],null,{Wireless_Router_N:"wireless router switch wap wifi access point wlan",Router_Icon:"router switch"})};Sidebar.prototype.collapsedImage=(!mxClient.IS_SVG)?IMAGE_PATH+"/collapsed.gif":"data:image/gif;base64,R0lGODlhDQANAIABAJmZmf///yH/C1hNUCBEYXRhWE1QPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4gPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNS4wLWMwNjAgNjEuMTM0Nzc3LCAyMDEwLzAyLzEyLTE3OjMyOjAwICAgICAgICAiPiA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPiA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtbG5zOnhtcE1NPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvbW0vIiB4bWxuczpzdFJlZj0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL3NUeXBlL1Jlc291cmNlUmVmIyIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ1M1IE1hY2ludG9zaCIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDozNUQyRTJFNjZGNUYxMUU1QjZEOThCNDYxMDQ2MzNCQiIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDozNUQyRTJFNzZGNUYxMUU1QjZEOThCNDYxMDQ2MzNCQiI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOjFERjc3MEUxNkY1RjExRTVCNkQ5OEI0NjEwNDYzM0JCIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOjFERjc3MEUyNkY1RjExRTVCNkQ5OEI0NjEwNDYzM0JCIi8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+Af/+/fz7+vn49/b19PPy8fDv7u3s6+rp6Ofm5eTj4uHg397d3Nva2djX1tXU09LR0M/OzczLysnIx8bFxMPCwcC/vr28u7q5uLe2tbSzsrGwr66trKuqqainpqWko6KhoJ+enZybmpmYl5aVlJOSkZCPjo2Mi4qJiIeGhYSDgoGAf359fHt6eXh3dnV0c3JxcG9ubWxramloZ2ZlZGNiYWBfXl1cW1pZWFdWVVRTUlFQT05NTEtKSUhHRkVEQ0JBQD8+PTw7Ojk4NzY1NDMyMTAvLi0sKyopKCcmJSQjIiEgHx4dHBsaGRgXFhUUExIREA8ODQwLCgkIBwYFBAMCAQAAIfkEAQAAAQAsAAAAAA0ADQAAAhSMj6lrwAjcC1GyahV+dcZJgeIIFgA7";Sidebar.prototype.expandedImage=(!mxClient.IS_SVG)?IMAGE_PATH+"/expanded.gif":"data:image/gif;base64,R0lGODlhDQANAIABAJmZmf///yH/C1hNUCBEYXRhWE1QPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4gPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNS4wLWMwNjAgNjEuMTM0Nzc3LCAyMDEwLzAyLzEyLTE3OjMyOjAwICAgICAgICAiPiA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPiA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtbG5zOnhtcE1NPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvbW0vIiB4bWxuczpzdFJlZj0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL3NUeXBlL1Jlc291cmNlUmVmIyIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ1M1IE1hY2ludG9zaCIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDoxREY3NzBERjZGNUYxMUU1QjZEOThCNDYxMDQ2MzNCQiIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDoxREY3NzBFMDZGNUYxMUU1QjZEOThCNDYxMDQ2MzNCQiI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOjFERjc3MERENkY1RjExRTVCNkQ5OEI0NjEwNDYzM0JCIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOjFERjc3MERFNkY1RjExRTVCNkQ5OEI0NjEwNDYzM0JCIi8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+Af/+/fz7+vn49/b19PPy8fDv7u3s6+rp6Ofm5eTj4uHg397d3Nva2djX1tXU09LR0M/OzczLysnIx8bFxMPCwcC/vr28u7q5uLe2tbSzsrGwr66trKuqqainpqWko6KhoJ+enZybmpmYl5aVlJOSkZCPjo2Mi4qJiIeGhYSDgoGAf359fHt6eXh3dnV0c3JxcG9ubWxramloZ2ZlZGNiYWBfXl1cW1pZWFdWVVRTUlFQT05NTEtKSUhHRkVEQ0JBQD8+PTw7Ojk4NzY1NDMyMTAvLi0sKyopKCcmJSQjIiEgHx4dHBsaGRgXFhUUExIREA8ODQwLCgkIBwYFBAMCAQAAIfkEAQAAAQAsAAAAAA0ADQAAAhGMj6nL3QAjVHIu6azbvPtWAAA7";Sidebar.prototype.tooltipImage=(!mxClient.IS_SVG)?IMAGE_PATH+"/tooltip.png":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA4AAAAbCAMAAAB7jU7LAAAACVBMVEX///+ZmZn///9Y2COLAAAAA3RSTlP//wDXyg1BAAAAOElEQVR42mXQMQ4AMAgDsWv//+iutcJmIQSk+9dJpVKpVCqVSqVSqZTdncWzF8/NeP7FkxWenPEDOnUBiL3jWx0AAAAASUVORK5CYII=";Sidebar.prototype.searchImage=(!mxClient.IS_SVG)?IMAGE_PATH+"/search.png":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAMCAYAAABWdVznAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAIGNIUk0AAHolAACAgwAA+f8AAIDpAAB1MAAA6mAAADqYAAAXb5JfxUYAAAEaSURBVHjabNGxS5VxFIfxz71XaWuQUJCG/gCHhgTD9VpEETg4aMOlQRp0EoezObgcd220KQiXmpretTAHQRBdojlQEJyukPdt+b1ywfvAGc7wnHP4nlZd1yKijQW8xzNc4Su+ZOYfQ3T6/f4YNvEJYzjELXp4VVXVz263+7cR2niBxAFeZ2YPi3iHR/gYERPDwhpOsd6sz8x/mfkNG3iOlWFhFj8y89J9KvzGXER0GuEaD42mgwHqUtoljbcRsTBCeINpfM/MgZLKPpaxFxGbOCqDXmILN7hoJrTKH+axhxmcYRxP0MIDnOBDZv5q1XUNIuJxifJp+UNV7t7BFM6xeic0RMQ4Bpl5W/ol7GISx/eEUUTECrbx+f8A8xhiZht9zsgAAAAASUVORK5CYII=";Sidebar.prototype.enableTooltips=true;Sidebar.prototype.tooltipBorder=16;Sidebar.prototype.tooltipDelay=300;Sidebar.prototype.dropTargetDelay=200;Sidebar.prototype.gearImage=STENCIL_PATH+"/clipart/Gear_128x128.png";Sidebar.prototype.thumbWidth=36;Sidebar.prototype.thumbHeight=36;Sidebar.prototype.thumbPadding=(document.documentMode>=5)?0:1;Sidebar.prototype.thumbBorder=2;Sidebar.prototype.sidebarTitleSize=9;Sidebar.prototype.sidebarTitles=false;Sidebar.prototype.tooltipTitles=true;Sidebar.prototype.maxTooltipWidth=400;Sidebar.prototype.maxTooltipHeight=400;Sidebar.prototype.addStencilsToIndex=true;Sidebar.prototype.defaultImageWidth=80;Sidebar.prototype.defaultImageHeight=80;Sidebar.prototype.showTooltip=function(e,d,c,f,g,b){if(this.enableTooltips&&this.showTooltips){if(this.currentElt!=e){if(this.thread!=null){window.clearTimeout(this.thread);this.thread=null}var a=mxUtils.bind(this,function(){if(this.tooltip==null){this.tooltip=document.createElement("div");this.tooltip.className="geSidebarTooltip";this.tooltip.style.zIndex=mxPopupMenu.prototype.zIndex-1;document.body.appendChild(this.tooltip);this.graph2=new Graph(this.tooltip,null,null,this.editorUi.editor.graph.getStylesheet());this.graph2.resetViewOnRootChange=false;this.graph2.foldingEnabled=false;this.graph2.gridEnabled=false;this.graph2.autoScroll=false;this.graph2.setTooltips(false);this.graph2.setConnectable(false);this.graph2.setEnabled(false);if(!mxClient.IS_SVG){this.graph2.view.canvas.style.position="relative"}this.tooltipImage=mxUtils.createImage(this.tooltipImage);this.tooltipImage.className="geSidebarTooltipImage";this.tooltipImage.style.zIndex=mxPopupMenu.prototype.zIndex-1;this.tooltipImage.style.position="absolute";this.tooltipImage.style.width="14px";this.tooltipImage.style.height="27px";document.body.appendChild(this.tooltipImage)}this.graph2.model.clear();this.graph2.view.setTranslate(this.tooltipBorder,this.tooltipBorder);if(c>this.maxTooltipWidth||f>this.maxTooltipHeight){this.graph2.view.scale=Math.round(Math.min(this.maxTooltipWidth/c,this.maxTooltipHeight/f)*100)/100}else{this.graph2.view.scale=1}this.tooltip.style.display="block";this.graph2.labelsVisible=(b==null||b);this.graph2.addCells(d);var i=this.graph2.getGraphBounds();var j=i.width+2*this.tooltipBorder+4;var r=i.height+2*this.tooltipBorder;if(mxClient.IS_QUIRKS){r+=4;this.tooltip.style.overflow="hidden"}else{this.tooltip.style.overflow="visible"}this.tooltipImage.style.visibility="visible";this.tooltip.style.width=j+"px";if(this.tooltipTitles&&g!=null&&g.length>0){if(this.tooltipTitle==null){this.tooltipTitle=document.createElement("div");this.tooltipTitle.style.borderTop="1px solid gray";this.tooltipTitle.style.textAlign="center";this.tooltipTitle.style.width="100%";this.tooltipTitle.style.overflow="hidden";if(mxClient.IS_SVG){this.tooltipTitle.style.paddingTop="6px"}else{this.tooltipTitle.style.position="absolute";this.tooltipTitle.style.paddingTop="6px"}this.tooltip.appendChild(this.tooltipTitle)}else{this.tooltipTitle.innerHTML=""}this.tooltipTitle.style.display="";mxUtils.write(this.tooltipTitle,g);var n=this.tooltipTitle.offsetHeight+10;r+=n;if(mxClient.IS_SVG){this.tooltipTitle.style.marginTop=(2-n)+"px"}else{r-=6;this.tooltipTitle.style.top=(r-n)+"px"}}else{if(this.tooltipTitle!=null&&this.tooltipTitle.parentNode!=null){this.tooltipTitle.style.display="none"}}this.tooltip.style.height=r+"px";var k=-Math.round(i.x-this.tooltipBorder);var q=-Math.round(i.y-this.tooltipBorder);var p=document.body;var m=document.documentElement;var h=Math.max(p.clientHeight||0,m.clientHeight);var l=this.container.clientWidth+this.editorUi.splitSize+3+this.editorUi.container.offsetLeft;var o=Math.min(h-r-20,Math.max(0,(this.editorUi.container.offsetTop+this.container.offsetTop+e.offsetTop-this.container.scrollTop-r/2+16)));if(mxClient.IS_SVG){if(k!=0||q!=0){this.graph2.view.canvas.setAttribute("transform","translate("+k+","+q+")")}else{this.graph2.view.canvas.removeAttribute("transform")}}else{this.graph2.view.drawPane.style.left=k+"px";this.graph2.view.drawPane.style.top=q+"px"}this.tooltip.style.position="absolute";this.tooltip.style.left=l+"px";this.tooltip.style.top=o+"px";this.tooltipImage.style.left=(l-13)+"px";this.tooltipImage.style.top=(o+r/2-13)+"px"});if(this.tooltip!=null&&this.tooltip.style.display!="none"){a()}else{this.thread=window.setTimeout(a,this.tooltipDelay)}this.currentElt=e}}};Sidebar.prototype.hideTooltip=function(){if(this.thread!=null){window.clearTimeout(this.thread);this.thread=null}if(this.tooltip!=null){this.tooltip.style.display="none";this.tooltipImage.style.visibility="hidden";this.currentElt=null}};Sidebar.prototype.addEntry=function(b,e){if(this.taglist!=null&&b!=null&&b.length>0){var d=b.toLowerCase().replace(/[\/\,\(\)]/g," ").split(" ");var a=mxUtils.bind(this,function(g){if(g.length>1){var h=this.taglist[g];if(typeof h!=="object"){h={entries:[],dict:new mxDictionary()};this.taglist[g]=h}if(h.dict.get(e)==null){h.dict.put(e,e);h.entries.push(e)}}});for(var c=0;c<d.length;c++){a(d[c]);var f=d[c].replace(/\.*\d*$/,"");if(f!=d[c]){a(f)}}}return e};Sidebar.prototype.searchEntries=function(n,l,m,r,o){if(this.taglist!=null&&n!=null){var f=n.toLowerCase().split(" ");var b=new mxDictionary();var p=(m+1)*l;var e=[];var k=0;for(var d=0;d<f.length;d++){if(f[d].length>0){var q=this.taglist[f[d]];var a=new mxDictionary();if(q!=null){var g=q.entries;e=[];for(var c=0;c<g.length;c++){var q=g[c];if((k==0)==(b.get(q)==null)){a.put(q,q);e.push(q);if(d==f.length-1&&e.length==p){r(e.slice(m*l,p),p,true,f);return}}}}else{e=[]}b=a;k++}}var h=e.length;r(e.slice(m*l,(m+1)*l),h,false,f)}else{r([],null,null,f)}};Sidebar.prototype.filterTags=function(c){if(c!=null){var b=c.split(" ");var a=[];var e={};for(var d=0;d<b.length;d++){if(e[b[d]]==null){e[b[d]]="1";a.push(b[d])}}return a.join(" ")}return null};Sidebar.prototype.cloneCell=function(a,b){var c=a.clone();if(b!=null){c.value=b}return c};Sidebar.prototype.addSearchPalette=function(o){var f=document.createElement("div");f.style.visibility="hidden";this.container.appendChild(f);var b=document.createElement("div");b.className="geSidebar";b.style.boxSizing="border-box";b.style.overflow="hidden";b.style.width="100%";b.style.padding="8px";b.style.paddingTop="14px";b.style.paddingBottom="0px";if(!o){b.style.display="none"}var q=document.createElement("div");q.style.whiteSpace="nowrap";q.style.textOverflow="clip";q.style.paddingBottom="8px";q.style.cursor="default";var n=document.createElement("input");n.setAttribute("placeholder",mxResources.get("searchShapes"));n.setAttribute("type","text");n.style.fontSize="12px";n.style.overflow="hidden";n.style.boxSizing="border-box";n.style.border="solid 1px #d5d5d5";n.style.borderRadius="4px";n.style.width="100%";n.style.outline="none";n.style.padding="6px";q.appendChild(n);var m=document.createElement("img");m.setAttribute("src",Sidebar.prototype.searchImage);m.setAttribute("title",mxResources.get("search"));m.style.position="relative";m.style.left="-18px";if(mxClient.IS_QUIRKS){n.style.height="28px";m.style.top="-4px"}else{m.style.top="1px"}m.style.background="url('"+this.editorUi.editor.transparentImage+"')";var j;q.appendChild(m);b.appendChild(q);var a=document.createElement("center");var h=mxUtils.button(mxResources.get("moreResults"),function(){j()});h.style.display="none";h.style.lineHeight="normal";h.style.marginTop="4px";h.style.marginBottom="8px";a.style.paddingTop="4px";a.style.paddingBottom="8px";a.appendChild(h);b.appendChild(a);var e="";var d=false;var c=false;var k=0;var g=new Object();var i=12;var l=mxUtils.bind(this,function(){d=false;this.currentSearch=null;var s=b.firstChild;while(s!=null){var r=s.nextSibling;if(s!=q&&s!=a){s.parentNode.removeChild(s)}s=r}});mxEvent.addListener(m,"click",function(){if(m.getAttribute("src")==Dialog.prototype.closeImage){m.setAttribute("src",Sidebar.prototype.searchImage);m.setAttribute("title",mxResources.get("search"));h.style.display="none";n.value="";e="";l()}n.focus()});j=mxUtils.bind(this,function(){i=4*Math.max(1,Math.floor(this.container.clientWidth/(this.thumbWidth+10)));this.hideTooltip();if(n.value!=""){if(a.parentNode!=null){if(e!=n.value){l();e=n.value;g=new Object();c=false;k=0}if(!d&&!c){h.setAttribute("disabled","true");h.style.display="";h.style.cursor="wait";h.innerHTML=mxResources.get("loading")+"...";d=true;var r=new Object();this.currentSearch=r;this.searchEntries(e,i,k,mxUtils.bind(this,function(w,s,v,x){if(this.currentSearch==r){w=(w!=null)?w:[];d=false;k++;a.parentNode.removeChild(a);this.insertSearchHint(b,e,i,k,w,s,v,x);for(var u=0;u<w.length;u++){var t=w[u]();if(g[t.innerHTML]==null){g[t.innerHTML]="1";b.appendChild(w[u]())}}if(v){h.removeAttribute("disabled");h.innerHTML=mxResources.get("moreResults")}else{h.innerHTML=mxResources.get("reset");h.style.display="none";c=true}h.style.cursor="";b.appendChild(a)}}),mxUtils.bind(this,function(){h.style.cursor=""}))}}}else{l();n.value="";e="";g=new Object();h.style.display="none";c=false;n.focus()}});mxEvent.addListener(n,"keydown",mxUtils.bind(this,function(r){if(r.keyCode==13){j()}}));mxEvent.addListener(n,"focus",function(){n.style.paddingRight=""});mxEvent.addListener(n,"blur",function(){n.style.paddingRight="20px"});n.style.paddingRight="20px";mxEvent.addListener(n,"keyup",mxUtils.bind(this,function(r){if(n.value==""){m.setAttribute("src",Sidebar.prototype.searchImage);m.setAttribute("title",mxResources.get("search"))}else{m.setAttribute("src",Dialog.prototype.closeImage);m.setAttribute("title",mxResources.get("reset"))}if(n.value==""){c=true;h.style.display="none"}else{if(n.value!=e){h.style.display="none";c=false}else{if(!d){if(c){h.style.display="none"}else{h.style.display=""}}}}}));mxEvent.addListener(n,"mousedown",function(r){if(r.stopPropagation){r.stopPropagation()}r.cancelBubble=true});mxEvent.addListener(n,"selectstart",function(r){if(r.stopPropagation){r.stopPropagation()}r.cancelBubble=true});var p=document.createElement("div");p.appendChild(b);this.container.appendChild(p);this.palettes.search=[f,p]};Sidebar.prototype.insertSearchHint=function(a,b,f,h,e,g,i,d){if(e.length==0&&h==1){var c=document.createElement("div");c.className="geTitle";c.style.cssText="background-color:transparent;border-color:transparent;color:gray;padding:6px 0px 0px 0px !important;margin:4px 8px 4px 8px;text-align:center;cursor:default !important";mxUtils.write(c,mxResources.get("noResultsFor",[b]));a.appendChild(c)}};Sidebar.prototype.addGeneralPalette=function(b){var a=[this.createVertexTemplateEntry("whiteSpace=wrap;html=1;",120,60,"","Rectangle",null,null,"rect rectangle box"),this.createVertexTemplateEntry("rounded=1;whiteSpace=wrap;html=1;",120,60,"","Rounded Rectangle",null,null,"rounded rect rectangle box"),this.createVertexTemplateEntry("ellipse;whiteSpace=wrap;html=1;",120,80,"","Ellipse",null,null,"oval ellipse state"),this.createVertexTemplateEntry("text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;",40,20,"Text","Text",null,null,"text textbox textarea label"),this.createVertexTemplateEntry("shape=ext;double=1;whiteSpace=wrap;html=1;",120,60,"","Double Rectangle",null,null,"rect rectangle box double"),this.createVertexTemplateEntry("shape=ext;double=1;rounded=1;whiteSpace=wrap;html=1;",120,60,"","Double Rounded Rectangle",null,null,"rounded rect rectangle box double"),this.createVertexTemplateEntry("ellipse;shape=doubleEllipse;whiteSpace=wrap;html=1;",120,80,"","Double Ellipse",null,null,"oval ellipse start end state double"),this.createVertexTemplateEntry("rhombus;whiteSpace=wrap;html=1;",80,80,"","Diamond",null,null,"diamond rhombus if condition decision conditional question test"),this.createVertexTemplateEntry("shape=parallelogram;whiteSpace=wrap;html=1;",120,60,"","Parallelogram"),this.createVertexTemplateEntry("triangle;whiteSpace=wrap;html=1;",60,80,"","Triangle",null,null,"triangle logic inverter buffer"),this.createVertexTemplateEntry("shape=cylinder;whiteSpace=wrap;html=1;",60,80,"","Cylinder",null,null,"cylinder data database"),this.createVertexTemplateEntry("shape=hexagon;perimeter=hexagonPerimeter;whiteSpace=wrap;html=1;",120,80,"","Hexagon",null,null,"hexagon preparation"),this.createVertexTemplateEntry("shape=process;whiteSpace=wrap;html=1;",120,60,"","Process",null,null,"process task"),this.createVertexTemplateEntry("ellipse;shape=cloud;whiteSpace=wrap;html=1;",120,80,"","Cloud",null,null,"cloud network"),this.createVertexTemplateEntry("shape=document;whiteSpace=wrap;html=1;",120,80,"","Document"),this.createVertexTemplateEntry("shape=internalStorage;whiteSpace=wrap;html=1;",80,80,"","Internal Storage"),this.createVertexTemplateEntry("shape=cube;whiteSpace=wrap;html=1;",120,80,"","Cube"),this.createVertexTemplateEntry("shape=step;whiteSpace=wrap;html=1;",120,80,"","Step"),this.createVertexTemplateEntry("shape=trapezoid;whiteSpace=wrap;html=1;",120,60,"","Trapezoid"),this.createVertexTemplateEntry("shape=tape;whiteSpace=wrap;html=1;",120,100,"","Tape"),this.createVertexTemplateEntry("shape=note;whiteSpace=wrap;html=1;",80,100,"","Note"),this.createVertexTemplateEntry("shape=card;whiteSpace=wrap;html=1;",80,100,"","Card"),this.createEdgeTemplateEntry("endArrow=classic;html=1;",50,50,"","Connection"),this.createEdgeTemplateEntry("endArrow=classic;startArrow=classic;html=1;",50,50,"","Connection")];this.addPaletteFunctions("general",mxResources.get("general"),(b!=null)?b:true,a)};Sidebar.prototype.addBasicPalette=function(a){this.addStencilPalette("basic",mxResources.get("basic"),a+"/basic.xml",";whiteSpace=wrap;html=1;fillColor=#ffffff;strokeColor=#000000;strokeWidth=2",null,null,null,null,[this.createVertexTemplateEntry("whiteSpace=wrap;html=1;aspect=fixed;",80,80,"","Square",null,null,"square"),this.createVertexTemplateEntry("ellipse;whiteSpace=wrap;html=1;aspect=fixed;",80,80,"","Circle",null,null,"circle"),this.createVertexTemplateEntry("shape=ext;double=1;whiteSpace=wrap;html=1;aspect=fixed;",80,80,"","Double Square",null,null,"double square"),this.createVertexTemplateEntry("ellipse;shape=doubleEllipse;whiteSpace=wrap;html=1;aspect=fixed;",80,80,"","Double Circle",null,null,"double circle")])};Sidebar.prototype.addMiscPalette=function(b){var a=[this.createVertexTemplateEntry("text;html=1;fontSize=24;fontStyle=1;verticalAlign=middle;align=center;",100,40,"Title","Title",null,null,"text heading title"),this.createVertexTemplateEntry("text;html=1;spacing=5;spacingTop=-20;whiteSpace=wrap;overflow=hidden;",190,120,"<h1>Heading</h1><p>Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.</p>","Textbox",null,null,"text textbox textarea"),this.createVertexTemplateEntry("text;html=1;whiteSpace=wrap;verticalAlign=middle;overflow=hidden;",100,80,"<ul><li>Value 1</li><li>Value 2</li><li>Value 3</li></ul>","Unordered List"),this.createVertexTemplateEntry("text;html=1;whiteSpace=wrap;verticalAlign=middle;overflow=hidden;",100,80,"<ol><li>Value 1</li><li>Value 2</li><li>Value 3</li></ol>","Ordered List"),this.createVertexTemplateEntry("text;html=1;fillColor=#ffffff;overflow=fill;rounded=0;",280,160,'<table border="1" width="100%" height="100%" cellpadding="4" style="width:100%;height:100%;border-collapse:collapse;"><tr style="background-color:#A7C942;color:#ffffff;border:1px solid #98bf21;"><th align="left">Title 1</th><th align="left">Title 2</th><th align="left">Title 3</th></tr><tr style="border:1px solid #98bf21;"><td>Value 1</td><td>Value 2</td><td>Value 3</td></tr><tr style="background-color:#EAF2D3;border:1px solid #98bf21;"><td>Value 4</td><td>Value 5</td><td>Value 6</td></tr><tr style="border:1px solid #98bf21;"><td>Value 7</td><td>Value 8</td><td>Value 9</td></tr><tr style="background-color:#EAF2D3;border:1px solid #98bf21;"><td>Value 10</td><td>Value 11</td><td>Value 12</td></tr></table>',"Table 1"),this.createVertexTemplateEntry("text;html=1;strokeColor=#c0c0c0;overflow=fill;",180,140,'<table border="0" width="100%" height="100%" style="width:100%;height:100%;border-collapse:collapse;"><tr><td align="center">Value 1</td><td align="center">Value 2</td><td align="center">Value 3</td></tr><tr><td align="center">Value 4</td><td align="center">Value 5</td><td align="center">Value 6</td></tr><tr><td align="center">Value 7</td><td align="center">Value 8</td><td align="center">Value 9</td></tr></table>',"Table 2"),this.createVertexTemplateEntry("text;html=1;overflow=fill;",180,140,'<table border="1" width="100%" height="100%" style="width:100%;height:100%;border-collapse:collapse;"><tr><td align="center">Value 1</td><td align="center">Value 2</td><td align="center">Value 3</td></tr><tr><td align="center">Value 4</td><td align="center">Value 5</td><td align="center">Value 6</td></tr><tr><td align="center">Value 7</td><td align="center">Value 8</td><td align="center">Value 9</td></tr></table>',"Table 3"),this.createVertexTemplateEntry("text;html=1;overflow=fill;",160,140,'<table border="1" width="100%" height="100%" cellpadding="4" style="width:100%;height:100%;border-collapse:collapse;"><tr><th align="center"><b>Title</b></th></tr><tr><td align="center">Section 1.1\nSection 1.2\nSection 1.3</td></tr><tr><td align="center">Section 2.1\nSection 2.2\nSection 2.3</td></tr></table>',"Table 4"),this.addEntry("link hyperlink",mxUtils.bind(this,function(){var c=new mxCell("Link",new mxGeometry(0,0,60,40),"text;html=1;whiteSpace=wrap;align=center;verticalAlign=middle;fontColor=#0000EE;fontStyle=4;");c.vertex=true;this.graph.setLinkForCell(c,"https://www.draw.io");return this.createVertexTemplateFromCells([c],c.geometry.width,c.geometry.height,"Link")})),this.addEntry("timestamp date time text label",mxUtils.bind(this,function(){var c=new mxCell("%date{ddd mmm dd yyyy HH:MM:ss}%",new mxGeometry(0,0,160,20),"text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;overflow=hidden;");c.vertex=true;this.graph.setAttributeForCell(c,"placeholders","1");return this.createVertexTemplateFromCells([c],c.geometry.width,c.geometry.height,"Timestamp")})),this.addEntry("variable placeholder metadata hello world text label",mxUtils.bind(this,function(){var c=new mxCell("%name% Text",new mxGeometry(0,0,80,20),"text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;overflow=hidden;");c.vertex=true;this.graph.setAttributeForCell(c,"placeholders","1");this.graph.setAttributeForCell(c,"name","Variable");return this.createVertexTemplateFromCells([c],c.geometry.width,c.geometry.height,"Variable")})),this.createVertexTemplateEntry("shape=umlActor;verticalLabelPosition=bottom;labelBackgroundColor=#ffffff;verticalAlign=top;html=1;",30,60,"Actor","Actor",false,null,"user person human stickman"),this.createVertexTemplateEntry("html=1;whiteSpace=wrap;comic=1;strokeWidth=2;fontFamily=Comic Sans MS;fontStyle=1;",120,60,"RECTANGLE","Comic Rectangle",true,null,"comic rectangle rect box text retro"),this.createVertexTemplateEntry("rhombus;html=1;align=center;whiteSpace=wrap;comic=1;strokeWidth=2;fontFamily=Comic Sans MS;fontStyle=1;",100,100,"DIAMOND","Comic Diamond",true,null,"comic diamond rhombus if condition decision conditional question test retro"),this.createEdgeTemplateEntry("edgeStyle=segmentEdgeStyle;rounded=0;comic=1;strokeWidth=2;endArrow=blockThin;html=1;fontFamily=Comic Sans MS;fontStyle=1;",50,50,"","Comic Arrow 1"),this.createEdgeTemplateEntry("rounded=0;comic=1;strokeWidth=2;endArrow=blockThin;html=1;fontFamily=Comic Sans MS;fontStyle=1;",50,50,"","Comic Arrow 2"),this.createVertexTemplateEntry("html=1;whiteSpace=wrap;aspect=fixed;shape=isoRectangle;",150,90,"","Isometric Square",true,null,"rectangle rect box iso isometric"),this.createVertexTemplateEntry("html=1;whiteSpace=wrap;aspect=fixed;shape=isoCube;",90,100,"","Isometric Cube",true,null,"cube box iso isometric"),this.createEdgeTemplateEntry("edgeStyle=isometricEdgeStyle;endArrow=none;html=1;",50,100,"","Isometric Edge 1"),this.createEdgeTemplateEntry("edgeStyle=isometricEdgeStyle;endArrow=none;html=1;elbow=vertical;",50,100,"","Isometric Edge 2"),this.createVertexTemplateEntry("line;strokeWidth=2;html=1;",160,10,"","Horizontal Line"),this.createVertexTemplateEntry("line;strokeWidth=2;direction=south;html=1;",10,160,"","Vertical Line"),this.createVertexTemplateEntry("line;strokeWidth=4;html=1;perimeter=backbonePerimeter;points=[];outlineConnect=0;",160,10,"","Horizontal Backbone",false,null,"backbone bus network"),this.createVertexTemplateEntry("line;strokeWidth=4;direction=south;html=1;perimeter=backbonePerimeter;points=[];outlineConnect=0;",10,160,"","Vertical Backbone",false,null,"backbone bus network"),this.createVertexTemplateEntry("shape=curlyBracket;whiteSpace=wrap;html=1;rounded=1;",20,120,"","Curly Bracket"),this.createVertexTemplateEntry("shape=image;html=1;verticalLabelPosition=bottom;labelBackgroundColor=#ffffff;verticalAlign=top;imageAspect=1;aspect=fixed;image="+this.gearImage,52,61,"","Image (Fixed Aspect)",false,null,"fixed image icon symbol"),this.createVertexTemplateEntry("shape=image;html=1;verticalLabelPosition=bottom;labelBackgroundColor=#ffffff;verticalAlign=top;imageAspect=0;image="+this.gearImage,50,60,"","Image (Variable Aspect)",false,null,"strechted image icon symbol"),this.createVertexTemplateEntry("icon;html=1;image="+this.gearImage,60,60,"Icon","Icon",false,null,"icon image symbol"),this.createVertexTemplateEntry("label;whiteSpace=wrap;html=1;image="+this.gearImage,140,60,"Label","Label 1",null,null,"label image icon symbol"),this.createVertexTemplateEntry("label;whiteSpace=wrap;html=1;align=center;verticalAlign=bottom;spacingLeft=0;spacingBottom=4;imageAlign=center;imageVerticalAlign=top;image="+this.gearImage,120,80,"Label","Label 2",null,null,"label image icon symbol"),this.createEdgeTemplateEntry("shape=flexArrow;endArrow=classic;html=1;fillColor=#ffffff;",50,50,"","Arrow"),this.createEdgeTemplateEntry("shape=flexArrow;endArrow=classic;startArrow=classic;html=1;fillColor=#ffffff;",50,50,"","Arrow"),this.createEdgeTemplateEntry("endArrow=none;html=1;dashed=1;dashPattern=1 4;",50,50,"","Dotted Line"),this.createEdgeTemplateEntry("endArrow=none;dashed=1;html=1;",50,50,"","Dashed Line"),this.createEdgeTemplateEntry("endArrow=none;html=1;",50,50,"","Line"),this.createEdgeTemplateEntry("edgeStyle=segmentEdgeStyle;endArrow=classic;html=1;",50,50,"","Manual Line"),this.createEdgeTemplateEntry("edgeStyle=elbowEdgeStyle;elbow=horizontal;endArrow=classic;html=1;",50,50,"","Horizontal Elbow"),this.createEdgeTemplateEntry("edgeStyle=elbowEdgeStyle;elbow=vertical;endArrow=classic;html=1;",50,50,"","Vertical Elbow"),this.addEntry("curve",mxUtils.bind(this,function(){var c=new mxCell("",new mxGeometry(0,0,50,50),"curved=1;endArrow=classic;html=1;");c.geometry.setTerminalPoint(new mxPoint(0,50),true);c.geometry.setTerminalPoint(new mxPoint(50,0),false);c.geometry.points=[new mxPoint(50,50),new mxPoint(0,0)];c.geometry.relative=true;c.edge=true;return this.createEdgeTemplateFromCells([c],c.geometry.width,c.geometry.height,"Curve")})),this.createEdgeTemplateEntry("shape=link;html=1;",50,50,"","Link")];this.addPaletteFunctions("misc",mxResources.get("misc"),(b!=null)?b:true,a)};Sidebar.prototype.addAdvancedPalette=function(a){this.addPaletteFunctions("advanced",mxResources.get("advanced"),(a!=null)?a:false,this.createAdvancedShapes())};Sidebar.prototype.createAdvancedShapes=function(){var b=this;var a=new mxCell("List Item",new mxGeometry(0,0,60,26),"text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=top;spacingLeft=4;spacingRight=4;whiteSpace=wrap;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;");a.vertex=true;return[this.createVertexTemplateEntry("shape=xor;whiteSpace=wrap;html=1;",60,80,"","Or",null,null,"logic or"),this.createVertexTemplateEntry("shape=or;whiteSpace=wrap;html=1;",60,80,"","And",null,null,"logic and"),this.createVertexTemplateEntry("shape=dataStorage;whiteSpace=wrap;html=1;",100,80,"","Data Storage"),this.createVertexTemplateEntry("shape=tapeData;whiteSpace=wrap;html=1;perimeter=ellipsePerimeter;",80,80,"","Tape Data"),this.createVertexTemplateEntry("shape=manualInput;whiteSpace=wrap;html=1;",80,80,"","Manual Input"),this.createVertexTemplateEntry("shape=loopLimit;whiteSpace=wrap;html=1;",100,80,"","Loop Limit"),this.createVertexTemplateEntry("shape=offPageConnector;whiteSpace=wrap;html=1;",80,80,"","Off Page Connector"),this.createVertexTemplateEntry("shape=delay;whiteSpace=wrap;html=1;",80,40,"","Delay"),this.createVertexTemplateEntry("shape=display;whiteSpace=wrap;html=1;",80,40,"","Display"),this.createVertexTemplateEntry("shape=singleArrow;direction=west;whiteSpace=wrap;html=1;",100,60,"","Arrow Left"),this.createVertexTemplateEntry("shape=singleArrow;whiteSpace=wrap;html=1;",100,60,"","Arrow Right"),this.createVertexTemplateEntry("shape=singleArrow;direction=north;whiteSpace=wrap;html=1;",60,100,"","Arrow Up"),this.createVertexTemplateEntry("shape=singleArrow;direction=south;whiteSpace=wrap;html=1;",60,100,"","Arrow Down"),this.createVertexTemplateEntry("shape=doubleArrow;whiteSpace=wrap;html=1;",100,60,"","Double Arrow"),this.createVertexTemplateEntry("shape=doubleArrow;direction=south;whiteSpace=wrap;html=1;",60,100,"","Double Arrow Vertical",null,null,"double arrow"),this.createVertexTemplateEntry("shape=actor;whiteSpace=wrap;html=1;",40,60,"","User",null,null,"user person human"),this.createVertexTemplateEntry("shape=cross;whiteSpace=wrap;html=1;",80,80,"","Cross"),this.createVertexTemplateEntry("shape=corner;whiteSpace=wrap;html=1;",80,80,"","Corner"),this.createVertexTemplateEntry("shape=tee;whiteSpace=wrap;html=1;",80,80,"","Tee"),this.createVertexTemplateEntry("shape=datastore;whiteSpace=wrap;html=1;",60,60,"","Data Store",null,null,"data store cylinder database"),this.createVertexTemplateEntry("shape=orEllipse;perimeter=ellipsePerimeter;whiteSpace=wrap;html=1;",80,80,"","Or",null,null,"or circle oval ellipse"),this.createVertexTemplateEntry("shape=sumEllipse;perimeter=ellipsePerimeter;whiteSpace=wrap;html=1;",80,80,"","Sum",null,null,"sum circle oval ellipse"),this.createVertexTemplateEntry("shape=lineEllipse;perimeter=ellipsePerimeter;whiteSpace=wrap;html=1;",80,80,"","Ellipse with horizontal divider",null,null,"circle oval ellipse"),this.createVertexTemplateEntry("shape=lineEllipse;line=vertical;perimeter=ellipsePerimeter;whiteSpace=wrap;html=1;",80,80,"","Ellipse with vertical divider",null,null,"circle oval ellipse"),this.createVertexTemplateEntry("shape=sortShape;perimeter=rhombusPerimeter;whiteSpace=wrap;html=1;",80,80,"","Sort",null,null,"sort"),this.createVertexTemplateEntry("shape=collate;whiteSpace=wrap;html=1;",80,80,"","Collate",null,null,"collate"),this.createVertexTemplateEntry("shape=switch;whiteSpace=wrap;html=1;",60,60,"","Switch",null,null,"switch router"),this.createVertexTemplateEntry("shape=dimension;whiteSpace=wrap;html=1;align=center;points=[];verticalAlign=bottom;spacingBottom=-5;labelBackgroundColor=#ffffff",100,40,"Label","Horizontal Dimension",null,null,"horizontal dimension measure"),this.createVertexTemplateEntry("shape=dimension;direction=north;whiteSpace=wrap;html=1;align=right;points=[];verticalAlign=middle;labelBackgroundColor=#ffffff",40,100,"Label","Vertical Dimension",null,null,"vertical dimension measure"),this.createVertexTemplateEntry("swimlane;whiteSpace=wrap;html=1;",200,200,"Container","Container",null,null,"container swimlane lane pool"),this.addEntry("list",function(){var c=new mxCell("List",new mxGeometry(0,0,140,110),"swimlane;html=1;fontStyle=0;childLayout=stackLayout;horizontal=1;startSize=26;fillColor=none;horizontalStack=0;resizeParent=1;resizeLast=0;collapsible=1;marginBottom=0;swimlaneFillColor=#ffffff;");c.vertex=true;c.insert(b.cloneCell(a,"Item 1"));c.insert(b.cloneCell(a,"Item 2"));c.insert(b.cloneCell(a,"Item 3"));return b.createVertexTemplateFromCells([c],c.geometry.width,c.geometry.height,"List")}),this.addEntry("list item entry value",function(){return b.createVertexTemplateFromCells([b.cloneCell(a,"List Item")],a.geometry.width,a.geometry.height,"List Item")})]};Sidebar.prototype.addUmlPalette=function(b){var f=this;var e=new mxCell("+ field: type",new mxGeometry(0,0,100,26),"text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=top;spacingLeft=4;spacingRight=4;whiteSpace=wrap;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;");e.vertex=true;var d=new mxCell("",new mxGeometry(0,0,40,8),"line;html=1;strokeWidth=1;fillColor=none;align=left;verticalAlign=middle;spacingTop=-1;spacingLeft=3;spacingRight=3;rotatable=0;labelPosition=right;points=[];portConstraint=eastwest;");d.vertex=true;var c="uml static class ";var a=[this.createVertexTemplateEntry("html=1;",110,50,"Object","Object",null,null,c+"object instance"),this.createVertexTemplateEntry("html=1;",110,50,"&laquo;interface&raquo;<br><b>Name</b>","Interface",null,null,c+"interface object instance annotated annotation"),this.addEntry(c+"object instance",function(){var g=new mxCell("Classname",new mxGeometry(0,0,160,90),"swimlane;html=1;fontStyle=1;align=center;verticalAlign=top;childLayout=stackLayout;horizontal=1;startSize=26;horizontalStack=0;resizeParent=1;resizeLast=0;collapsible=1;marginBottom=0;swimlaneFillColor=#ffffff;");g.vertex=true;g.insert(e.clone());g.insert(d.clone());g.insert(f.cloneCell(e,"+ method(type): type"));return f.createVertexTemplateFromCells([g],g.geometry.width,g.geometry.height,"Class")}),this.addEntry(c+"section subsection",function(){var g=new mxCell("Classname",new mxGeometry(0,0,140,110),"swimlane;html=1;fontStyle=0;childLayout=stackLayout;horizontal=1;startSize=26;fillColor=none;horizontalStack=0;resizeParent=1;resizeLast=0;collapsible=1;marginBottom=0;swimlaneFillColor=#ffffff;");g.vertex=true;g.insert(e.clone());g.insert(e.clone());g.insert(e.clone());return f.createVertexTemplateFromCells([g],g.geometry.width,g.geometry.height,"Class 2")}),this.addEntry(c+"item member method function variable field attribute label",function(){return f.createVertexTemplateFromCells([f.cloneCell(e,"+ item: attribute")],e.geometry.width,e.geometry.height,"Item 1")}),this.addEntry(c+"item member method function variable field attribute label",function(){var g=new mxCell("item: attribute",new mxGeometry(0,0,120,e.geometry.height),"label;html=1;fontStyle=0;strokeColor=none;fillColor=none;align=left;verticalAlign=top;overflow=hidden;spacingLeft=28;spacingRight=4;whiteSpace=wrap;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;imageWidth=16;imageHeight=16;image="+f.gearImage);g.vertex=true;return f.createVertexTemplateFromCells([g],g.geometry.width,g.geometry.height,"Item 2")}),this.addEntry(c+"divider hline line separator",function(){return f.createVertexTemplateFromCells([d.clone()],d.geometry.width,d.geometry.height,"Divider")}),this.addEntry(c+"spacer space gap separator",function(){var g=new mxCell("",new mxGeometry(0,0,20,14),"text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;spacingTop=-1;spacingLeft=4;spacingRight=4;rotatable=0;labelPosition=right;points=[];portConstraint=eastwest;");g.vertex=true;return f.createVertexTemplateFromCells([g.clone()],g.geometry.width,g.geometry.height,"Spacer")}),this.createVertexTemplateEntry("text;html=1;align=center;fontStyle=1;verticalAlign=middle;spacingLeft=3;spacingRight=3;strokeColor=none;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;",80,26,"Title","Title",null,null,c+"title label"),this.addEntry(c+"component",function(){var g=new mxCell("&laquo;Annotation&raquo;<br/><b>Component</b>",new mxGeometry(0,0,180,90),"html=1;");g.vertex=true;var h=new mxCell("",new mxGeometry(1,0,20,20),"shape=component;jettyWidth=8;jettyHeight=4;");h.vertex=true;h.geometry.relative=true;h.geometry.offset=new mxPoint(-27,7);g.insert(h);return f.createVertexTemplateFromCells([g],g.geometry.width,g.geometry.height,"Component")}),this.addEntry(c+"component",function(){var g=new mxCell('<p style="margin:0px;margin-top:6px;text-align:center;"><b>Component</b></p><hr/><p style="margin:0px;margin-left:8px;">+ Attribute1: Type<br/>+ Attribute2: Type</p>',new mxGeometry(0,0,180,90),"align=left;overflow=fill;html=1;");g.vertex=true;var h=new mxCell("",new mxGeometry(1,0,20,20),"shape=component;jettyWidth=8;jettyHeight=4;");h.vertex=true;h.geometry.relative=true;h.geometry.offset=new mxPoint(-24,4);g.insert(h);return f.createVertexTemplateFromCells([g],g.geometry.width,g.geometry.height,"Component with Attributes")}),this.createVertexTemplateEntry("verticalAlign=top;align=left;spacingTop=8;spacingLeft=2;spacingRight=12;shape=cube;size=10;direction=south;fontStyle=4;html=1;",180,120,"Block","Block",null,null,c+"block"),this.createVertexTemplateEntry("shape=component;align=left;spacingLeft=36;",120,60,"Module","Module",null,null,c+"module"),this.createVertexTemplateEntry("shape=folder;fontStyle=1;spacingTop=10;tabWidth=40;tabHeight=14;tabPosition=left;html=1;",70,50,"package","Package",null,null,c+"package"),this.createVertexTemplateEntry("verticalAlign=top;align=left;overflow=fill;fontSize=12;fontFamily=Helvetica;html=1;",160,90,'<p style="margin:0px;margin-top:4px;text-align:center;text-decoration:underline;"><b>Object:Type</b></p><hr/><p style="margin:0px;margin-left:8px;">field1 = value1<br/>field2 = value2<br>field3 = value3</p>',"Object",null,null,c+"object instance"),this.createVertexTemplateEntry("verticalAlign=top;align=left;overflow=fill;html=1;",180,90,'<div style="box-sizing:border-box;width:100%;background:#e4e4e4;padding:2px;">Tablename</div><table style="width:100%;font-size:1em;" cellpadding="2" cellspacing="0"><tr><td>PK</td><td>uniqueId</td></tr><tr><td>FK1</td><td>foreignKey</td></tr><tr><td></td><td>fieldname</td></tr></table>',"Entity",null,null,"er entity table"),this.addEntry(c+"object instance",function(){var g=new mxCell('<p style="margin:0px;margin-top:4px;text-align:center;"><b>Class</b></p><hr size="1"/><div style="height:2px;"></div>',new mxGeometry(0,0,140,60),"verticalAlign=top;align=left;overflow=fill;fontSize=12;fontFamily=Helvetica;html=1;");g.vertex=true;return f.createVertexTemplateFromCells([g.clone()],g.geometry.width,g.geometry.height,"Class 3")}),this.addEntry(c+"object instance",function(){var g=new mxCell('<p style="margin:0px;margin-top:4px;text-align:center;"><b>Class</b></p><hr size="1"/><div style="height:2px;"></div><hr size="1"/><div style="height:2px;"></div>',new mxGeometry(0,0,140,60),"verticalAlign=top;align=left;overflow=fill;fontSize=12;fontFamily=Helvetica;html=1;");g.vertex=true;return f.createVertexTemplateFromCells([g.clone()],g.geometry.width,g.geometry.height,"Class 4")}),this.addEntry(c+"object instance",function(){var g=new mxCell('<p style="margin:0px;margin-top:4px;text-align:center;"><b>Class</b></p><hr size="1"/><p style="margin:0px;margin-left:4px;">+ field: Type</p><hr size="1"/><p style="margin:0px;margin-left:4px;">+ method(): Type</p>',new mxGeometry(0,0,160,90),"verticalAlign=top;align=left;overflow=fill;fontSize=12;fontFamily=Helvetica;html=1;");g.vertex=true;return f.createVertexTemplateFromCells([g.clone()],g.geometry.width,g.geometry.height,"Class 5")}),this.addEntry(c+"object instance",function(){var g=new mxCell('<p style="margin:0px;margin-top:4px;text-align:center;"><i>&lt;&lt;Interface&gt;&gt;</i><br/><b>Interface</b></p><hr size="1"/><p style="margin:0px;margin-left:4px;">+ field1: Type<br/>+ field2: Type</p><hr size="1"/><p style="margin:0px;margin-left:4px;">+ method1(Type): Type<br/>+ method2(Type, Type): Type</p>',new mxGeometry(0,0,190,140),"verticalAlign=top;align=left;overflow=fill;fontSize=12;fontFamily=Helvetica;html=1;");g.vertex=true;return f.createVertexTemplateFromCells([g.clone()],g.geometry.width,g.geometry.height,"Interface 2")}),this.createVertexTemplateEntry("shape=lollipop;direction=south;html=1;",30,10,"","Provided Interface",null,null,c+"provided interface"),this.createVertexTemplateEntry("shape=requires;direction=north;html=1;",30,20,"","Required Interface",null,null,c+"required interface"),this.createVertexTemplateEntry("shape=umlBoundary;whiteSpace=wrap;html=1;",100,80,"Boundary Object","Boundary Object",null,null,"uml boundary object"),this.createVertexTemplateEntry("ellipse;shape=umlEntity;whiteSpace=wrap;html=1;",80,80,"Entity Object","Entity Object",null,null,"uml entity object"),this.createVertexTemplateEntry("ellipse;shape=umlControl;whiteSpace=wrap;html=1;",70,80,"Control Object","Control Object",null,null,"uml control object"),this.createVertexTemplateEntry("shape=umlActor;verticalLabelPosition=bottom;labelBackgroundColor=#ffffff;verticalAlign=top;html=1;",30,60,"Actor","Actor",false,null,"uml actor"),this.createVertexTemplateEntry("ellipse;whiteSpace=wrap;html=1;",140,70,"Use Case","Use Case",null,null,"uml use case usecase"),this.addEntry("uml activity state start",function(){var g=new mxCell("",new mxGeometry(0,0,30,30),"ellipse;html=1;shape=startState;fillColor=#000000;strokeColor=#ff0000;");g.vertex=true;var h=new mxCell("",new mxGeometry(0,0,0,0),"edgeStyle=orthogonalEdgeStyle;html=1;verticalAlign=bottom;endArrow=open;endSize=8;strokeColor=#ff0000;");h.geometry.setTerminalPoint(new mxPoint(15,90),false);h.geometry.relative=true;h.edge=true;g.insertEdge(h,true);return f.createVertexTemplateFromCells([g,h],30,90,"Start")}),this.addEntry("uml activity state",function(){var g=new mxCell("Activity",new mxGeometry(0,0,120,40),"rounded=1;whiteSpace=wrap;html=1;arcSize=40;fillColor=#ffffc0;strokeColor=#ff0000;");g.vertex=true;var h=new mxCell("",new mxGeometry(0,0,0,0),"edgeStyle=orthogonalEdgeStyle;html=1;verticalAlign=bottom;endArrow=open;endSize=8;strokeColor=#ff0000;");h.geometry.setTerminalPoint(new mxPoint(60,100),false);h.geometry.relative=true;h.edge=true;g.insertEdge(h,true);return f.createVertexTemplateFromCells([g,h],120,100,"Activity")}),this.addEntry("uml activity composite state",function(){var g=new mxCell("Composite State",new mxGeometry(0,0,160,60),"swimlane;html=1;fontStyle=1;align=center;verticalAlign=middle;childLayout=stackLayout;horizontal=1;startSize=30;horizontalStack=0;resizeParent=0;resizeLast=1;container=0;collapsible=0;rounded=1;arcSize=30;strokeColor=#ff0000;fillColor=#ffffc0;swimlaneFillColor=#ffffc0;");g.vertex=true;var h=new mxCell("Subtitle",new mxGeometry(0,0,200,26),"text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;spacingLeft=4;spacingRight=4;whiteSpace=wrap;overflow=hidden;rotatable=0;");h.vertex=true;g.insert(h);var i=new mxCell("",new mxGeometry(0,0,0,0),"edgeStyle=orthogonalEdgeStyle;html=1;verticalAlign=bottom;endArrow=open;endSize=8;strokeColor=#ff0000;");i.geometry.setTerminalPoint(new mxPoint(80,120),false);i.geometry.relative=true;i.edge=true;g.insertEdge(i,true);return f.createVertexTemplateFromCells([g,i],160,120,"Composite State")}),this.addEntry("uml activity condition",function(){var g=new mxCell("Condition",new mxGeometry(0,0,80,40),"rhombus;whiteSpace=wrap;html=1;fillColor=#ffffc0;strokeColor=#ff0000;");g.vertex=true;var i=new mxCell("no",new mxGeometry(0,0,0,0),"edgeStyle=orthogonalEdgeStyle;html=1;align=left;verticalAlign=bottom;endArrow=open;endSize=8;strokeColor=#ff0000;");i.geometry.setTerminalPoint(new mxPoint(180,20),false);i.geometry.relative=true;i.geometry.x=-1;i.edge=true;g.insertEdge(i,true);var h=new mxCell("yes",new mxGeometry(0,0,0,0),"edgeStyle=orthogonalEdgeStyle;html=1;align=left;verticalAlign=top;endArrow=open;endSize=8;strokeColor=#ff0000;");h.geometry.setTerminalPoint(new mxPoint(40,100),false);h.geometry.relative=true;h.geometry.x=-1;h.edge=true;g.insertEdge(h,true);return f.createVertexTemplateFromCells([g,i,h],180,100,"Condition")}),this.addEntry("uml activity fork join",function(){var g=new mxCell("",new mxGeometry(0,0,200,10),"shape=line;html=1;strokeWidth=6;strokeColor=#ff0000;");g.vertex=true;var h=new mxCell("",new mxGeometry(0,0,0,0),"edgeStyle=orthogonalEdgeStyle;html=1;verticalAlign=bottom;endArrow=open;endSize=8;strokeColor=#ff0000;");h.geometry.setTerminalPoint(new mxPoint(100,80),false);h.geometry.relative=true;h.edge=true;g.insertEdge(h,true);return f.createVertexTemplateFromCells([g,h],200,80,"Fork/Join")}),this.createVertexTemplateEntry("ellipse;html=1;shape=endState;fillColor=#000000;strokeColor=#ff0000;",30,30,"","End",null,null,"uml activity state end"),this.createVertexTemplateEntry("shape=umlLifeline;perimeter=lifelinePerimeter;whiteSpace=wrap;html=1;container=1;collapsible=0;recursiveResize=0;outlineConnect=0;",100,300,":Object","Lifeline",null,null,"uml sequence participant lifeline"),this.createVertexTemplateEntry("shape=umlLifeline;participant=umlActor;perimeter=lifelinePerimeter;whiteSpace=wrap;html=1;container=1;collapsible=0;recursiveResize=0;verticalAlign=top;spacingTop=36;labelBackgroundColor=#ffffff;outlineConnect=0;",20,300,"","Actor Lifeline",null,null,"uml sequence participant lifeline actor"),this.createVertexTemplateEntry("shape=umlLifeline;participant=umlBoundary;perimeter=lifelinePerimeter;whiteSpace=wrap;html=1;container=1;collapsible=0;recursiveResize=0;verticalAlign=top;spacingTop=36;labelBackgroundColor=#ffffff;outlineConnect=0;",50,300,"","Boundary Lifeline",null,null,"uml sequence participant lifeline boundary"),this.createVertexTemplateEntry("shape=umlLifeline;participant=umlEntity;perimeter=lifelinePerimeter;whiteSpace=wrap;html=1;container=1;collapsible=0;recursiveResize=0;verticalAlign=top;spacingTop=36;labelBackgroundColor=#ffffff;outlineConnect=0;",40,300,"","Entity Lifeline",null,null,"uml sequence participant lifeline entity"),this.createVertexTemplateEntry("shape=umlLifeline;participant=umlControl;perimeter=lifelinePerimeter;whiteSpace=wrap;html=1;container=1;collapsible=0;recursiveResize=0;verticalAlign=top;spacingTop=36;labelBackgroundColor=#ffffff;outlineConnect=0;",40,300,"","Control Lifeline",null,null,"uml sequence participant lifeline control"),this.createVertexTemplateEntry("shape=umlFrame;whiteSpace=wrap;html=1;",300,200,"frame","Frame",null,null,"uml sequence frame"),this.createVertexTemplateEntry("shape=umlDestroy;whiteSpace=wrap;html=1;strokeWidth=3;",30,30,"","Destruction",null,null,"uml sequence destruction destroy"),this.createVertexTemplateEntry("shape=note;whiteSpace=wrap;html=1;size=14;verticalAlign=top;align=left;spacingTop=-6;",100,70,"Note","Note",null,null,"uml note"),this.addEntry("uml sequence invoke invocation call activation",function(){var g=new mxCell("",new mxGeometry(0,0,10,80),"html=1;points=[];perimeter=orthogonalPerimeter;");g.vertex=true;var h=new mxCell("dispatch",new mxGeometry(0,0,0,0),"html=1;verticalAlign=bottom;startArrow=oval;endArrow=block;startSize=8;");h.geometry.setTerminalPoint(new mxPoint(-60,0),true);h.geometry.relative=true;h.edge=true;g.insertEdge(h,false);return f.createVertexTemplateFromCells([g,h],10,80,"Found Message")}),this.addEntry("uml sequence invoke call delegation synchronous invocation activation",function(){var g=new mxCell("",new mxGeometry(0,0,10,80),"html=1;points=[];perimeter=orthogonalPerimeter;");g.vertex=true;var i=new mxCell("dispatch",new mxGeometry(0,0,0,0),"html=1;verticalAlign=bottom;endArrow=block;entryX=0;entryY=0;");i.geometry.setTerminalPoint(new mxPoint(-70,0),true);i.geometry.relative=true;i.edge=true;g.insertEdge(i,false);var h=new mxCell("return",new mxGeometry(0,0,0,0),"html=1;verticalAlign=bottom;endArrow=open;dashed=1;endSize=8;exitX=0;exitY=0.95;");h.geometry.setTerminalPoint(new mxPoint(-70,76),false);h.geometry.relative=true;h.edge=true;g.insertEdge(h,true);return f.createVertexTemplateFromCells([g,i,h],10,80,"Synchronous Invocation")}),this.addEntry("uml sequence self call recursion delegation activation",function(){var g=new mxCell("",new mxGeometry(0,20,10,40),"html=1;points=[];perimeter=orthogonalPerimeter;");g.vertex=true;var h=new mxCell("self call",new mxGeometry(0,0,0,0),"edgeStyle=orthogonalEdgeStyle;html=1;align=left;spacingLeft=2;endArrow=block;rounded=0;entryX=1;entryY=0;");h.geometry.setTerminalPoint(new mxPoint(5,0),true);h.geometry.points=[new mxPoint(30,0)];h.geometry.relative=true;h.edge=true;g.insertEdge(h,false);return f.createVertexTemplateFromCells([g,h],10,60,"Self Call")}),this.addEntry("uml sequence invoke call delegation callback activation",function(){var g=new mxCell("",new mxGeometry(0,0,10,60),"html=1;points=[];perimeter=orthogonalPerimeter;");g.vertex=true;var i=new mxCell("callback",new mxGeometry(0,0,0,0),"html=1;verticalAlign=bottom;endArrow=block;entryX=1;entryY=0;");i.geometry.setTerminalPoint(new mxPoint(70,0),true);i.geometry.relative=true;i.edge=true;g.insertEdge(i,false);var h=new mxCell("return",new mxGeometry(0,0,0,0),"html=1;verticalAlign=bottom;endArrow=open;dashed=1;endSize=8;exitX=1;exitY=0.95;");h.geometry.setTerminalPoint(new mxPoint(70,57),false);h.geometry.relative=true;h.edge=true;g.insertEdge(h,true);return f.createVertexTemplateFromCells([g,i,h],10,60,"Callback")}),this.createVertexTemplateEntry("html=1;points=[];perimeter=orthogonalPerimeter;",10,80,"","Activation",null,null,"uml sequence activation"),this.createEdgeTemplateEntry("html=1;verticalAlign=bottom;startArrow=oval;startFill=1;endArrow=block;startSize=8;",60,0,"dispatch","Found Message 1",null,"uml sequence message call invoke dispatch"),this.createEdgeTemplateEntry("html=1;verticalAlign=bottom;startArrow=circle;startFill=1;endArrow=open;startSize=6;endSize=8;",80,0,"dispatch","Found Message 2",null,"uml sequence message call invoke dispatch"),this.createEdgeTemplateEntry("html=1;verticalAlign=bottom;endArrow=block;",80,0,"dispatch","Message",null,"uml sequence message call invoke dispatch"),this.addEntry("uml sequence return message",function(){var g=new mxCell("return",new mxGeometry(0,0,0,0),"html=1;verticalAlign=bottom;endArrow=open;dashed=1;endSize=8;");g.geometry.setTerminalPoint(new mxPoint(80,0),true);g.geometry.setTerminalPoint(new mxPoint(0,0),false);g.geometry.relative=true;g.edge=true;return f.createEdgeTemplateFromCells([g],80,0,"Return")}),this.addEntry("uml relation",function(){var h=new mxCell("name",new mxGeometry(0,0,0,0),"endArrow=block;endFill=1;html=1;edgeStyle=orthogonalEdgeStyle;align=left;verticalAlign=top;");h.geometry.setTerminalPoint(new mxPoint(0,0),true);h.geometry.setTerminalPoint(new mxPoint(160,0),false);h.geometry.relative=true;h.geometry.x=-1;h.edge=true;var g=new mxCell("1",new mxGeometry(-1,0,0,0),"resizable=0;html=1;align=left;verticalAlign=bottom;labelBackgroundColor=#ffffff;fontSize=10;");g.geometry.relative=true;g.setConnectable(false);g.vertex=true;h.insert(g);return f.createEdgeTemplateFromCells([h],160,0,"Relation 1")}),this.addEntry("uml association",function(){var i=new mxCell("",new mxGeometry(0,0,0,0),"endArrow=none;html=1;edgeStyle=orthogonalEdgeStyle;");i.geometry.setTerminalPoint(new mxPoint(0,0),true);i.geometry.setTerminalPoint(new mxPoint(160,0),false);i.geometry.relative=true;i.edge=true;var h=new mxCell("parent",new mxGeometry(-1,0,0,0),"resizable=0;html=1;align=left;verticalAlign=bottom;labelBackgroundColor=#ffffff;fontSize=10;");h.geometry.relative=true;h.setConnectable(false);h.vertex=true;i.insert(h);var g=new mxCell("child",new mxGeometry(1,0,0,0),"resizable=0;html=1;align=right;verticalAlign=bottom;labelBackgroundColor=#ffffff;fontSize=10;");g.geometry.relative=true;g.setConnectable(false);g.vertex=true;i.insert(g);return f.createEdgeTemplateFromCells([i],160,0,"Association 1")}),this.addEntry("uml aggregation",function(){var g=new mxCell("1",new mxGeometry(0,0,0,0),"endArrow=open;html=1;endSize=12;startArrow=diamondThin;startSize=14;startFill=0;edgeStyle=orthogonalEdgeStyle;align=left;verticalAlign=bottom;");g.geometry.setTerminalPoint(new mxPoint(0,0),true);g.geometry.setTerminalPoint(new mxPoint(160,0),false);g.geometry.relative=true;g.geometry.x=-1;g.geometry.y=3;g.edge=true;return f.createEdgeTemplateFromCells([g],160,0,"Aggregation")}),this.addEntry("uml composition",function(){var g=new mxCell("1",new mxGeometry(0,0,0,0),"endArrow=open;html=1;endSize=12;startArrow=diamondThin;startSize=14;startFill=1;edgeStyle=orthogonalEdgeStyle;align=left;verticalAlign=bottom;");g.geometry.setTerminalPoint(new mxPoint(0,0),true);g.geometry.setTerminalPoint(new mxPoint(160,0),false);g.geometry.relative=true;g.geometry.x=-1;g.geometry.y=3;g.edge=true;return f.createEdgeTemplateFromCells([g],160,0,"Composition")}),this.addEntry("uml relation",function(){var i=new mxCell("Relation",new mxGeometry(0,0,0,0),"endArrow=open;html=1;endSize=12;startArrow=diamondThin;startSize=14;startFill=0;edgeStyle=orthogonalEdgeStyle;");i.geometry.setTerminalPoint(new mxPoint(0,0),true);i.geometry.setTerminalPoint(new mxPoint(160,0),false);i.geometry.relative=true;i.edge=true;var h=new mxCell("0..n",new mxGeometry(-1,0,0,0),"resizable=0;html=1;align=left;verticalAlign=top;labelBackgroundColor=#ffffff;fontSize=10;");h.geometry.relative=true;h.setConnectable(false);h.vertex=true;i.insert(h);var g=new mxCell("1",new mxGeometry(1,0,0,0),"resizable=0;html=1;align=right;verticalAlign=top;labelBackgroundColor=#ffffff;fontSize=10;");g.geometry.relative=true;g.setConnectable(false);g.vertex=true;i.insert(g);return f.createEdgeTemplateFromCells([i],160,0,"Relation 2")}),this.createEdgeTemplateEntry("endArrow=open;endSize=12;dashed=1;html=1;",160,0,"Use","Dependency",null,"uml dependency use"),this.createEdgeTemplateEntry("endArrow=block;endSize=16;endFill=0;html=1;",160,0,"Extends","Generalization",null,"uml generalization extend"),this.createEdgeTemplateEntry("endArrow=block;startArrow=block;endFill=1;startFill=1;html=1;",160,0,"","Association 2",null,"uml association"),this.createEdgeTemplateEntry("endArrow=open;startArrow=circlePlus;endFill=0;startFill=0;endSize=8;html=1;",160,0,"","Inner Class",null,"inner class"),this.createEdgeTemplateEntry("endArrow=open;startArrow=cross;endFill=0;startFill=0;endSize=8;startSize=10;html=1;",160,0,"","Terminate",null,"terminate")];this.addPaletteFunctions("uml",mxResources.get("uml"),b||false,a)};Sidebar.prototype.addBpmnPalette=function(a,c){var d=this;var b=[this.createVertexTemplateEntry("shape=ext;rounded=1;html=1;whiteSpace=wrap;",120,80,"Task","Process",null,null,"bpmn task process"),this.createVertexTemplateEntry("shape=ext;rounded=1;html=1;whiteSpace=wrap;double=1;",120,80,"Transaction","Transaction",null,null,"bpmn transaction"),this.createVertexTemplateEntry("shape=ext;rounded=1;html=1;whiteSpace=wrap;dashed=1;dashPattern=1 4;",120,80,"Event\nSub-Process","Event Sub-Process",null,null,"bpmn event subprocess sub process sub-process"),this.createVertexTemplateEntry("shape=ext;rounded=1;html=1;whiteSpace=wrap;strokeWidth=3;",120,80,"Call Activity","Call Activity",null,null,"bpmn call activity"),this.addEntry("bpmn subprocess sub process sub-process",function(){var e=new mxCell("Sub-Process",new mxGeometry(0,0,120,80),"html=1;whiteSpace=wrap;rounded=1;");e.vertex=true;var f=new mxCell("",new mxGeometry(0.5,1,14,14),"html=1;shape=plus;");f.vertex=true;f.geometry.relative=true;f.geometry.offset=new mxPoint(-7,-14);e.insert(f);return d.createVertexTemplateFromCells([e],e.geometry.width,e.geometry.height,"Sub-Process")}),this.addEntry(this.getTagsForStencil("mxgraph.bpmn","loop","subprocess sub process sub-process looped").join(" "),function(){var e=new mxCell("Looped\nSub-Process",new mxGeometry(0,0,120,80),"html=1;whiteSpace=wrap;rounded=1");e.vertex=true;var g=new mxCell("",new mxGeometry(0.5,1,14,14),"html=1;shape=mxgraph.bpmn.loop;");g.vertex=true;g.geometry.relative=true;g.geometry.offset=new mxPoint(-15,-14);e.insert(g);var f=new mxCell("",new mxGeometry(0.5,1,14,14),"html=1;shape=plus;");f.vertex=true;f.geometry.relative=true;f.geometry.offset=new mxPoint(1,-14);e.insert(f);return d.createVertexTemplateFromCells([e],e.geometry.width,e.geometry.height,"Looped Sub-Process")}),this.addEntry("bpmn receive task",function(){var e=new mxCell("Receive",new mxGeometry(0,0,120,80),"html=1;whiteSpace=wrap;rounded=1;");e.vertex=true;var f=new mxCell("",new mxGeometry(0,0,20,14),"html=1;shape=message;");f.vertex=true;f.geometry.relative=true;f.geometry.offset=new mxPoint(7,7);e.insert(f);return d.createVertexTemplateFromCells([e],e.geometry.width,e.geometry.height,"Receive Task")}),this.addEntry(this.getTagsForStencil("mxgraph.bpmn","user_task").join(" "),function(){var e=new mxCell("User",new mxGeometry(0,0,120,80),"html=1;whiteSpace=wrap;rounded=1;");e.vertex=true;var g=new mxCell("",new mxGeometry(0,0,14,14),"html=1;shape=mxgraph.bpmn.user_task;");g.vertex=true;g.geometry.relative=true;g.geometry.offset=new mxPoint(7,7);e.insert(g);var f=new mxCell("",new mxGeometry(0.5,1,14,14),"html=1;shape=plus;");f.vertex=true;f.geometry.relative=true;f.geometry.offset=new mxPoint(-7,-14);e.insert(f);return d.createVertexTemplateFromCells([e],e.geometry.width,e.geometry.height,"User Task")}),this.addEntry(this.getTagsForStencil("mxgraph.bpmn","timer_start","attached").join(" "),function(){var e=new mxCell("Process",new mxGeometry(0,0,120,80),"html=1;whiteSpace=wrap;rounded=1;");e.vertex=true;var f=new mxCell("",new mxGeometry(1,1,30,30),"shape=mxgraph.bpmn.timer_start;perimeter=ellipsePerimeter;html=1;verticalLabelPosition=bottom;labelBackgroundColor=#ffffff;verticalAlign=top;");f.vertex=true;f.geometry.relative=true;f.geometry.offset=new mxPoint(-40,-15);e.insert(f);return d.createVertexTemplateFromCells([e],120,95,"Attached Timer Event 1")}),this.addEntry(this.getTagsForStencil("mxgraph.bpmn","timer_start","attached").join(" "),function(){var e=new mxCell("Process",new mxGeometry(0,0,120,80),"html=1;whiteSpace=wrap;rounded=1;");e.vertex=true;var f=new mxCell("",new mxGeometry(1,0,30,30),"shape=mxgraph.bpmn.timer_start;perimeter=ellipsePerimeter;html=1;labelPosition=right;labelBackgroundColor=#ffffff;align=left;");f.vertex=true;f.geometry.relative=true;f.geometry.offset=new mxPoint(-15,10);e.insert(f);return d.createVertexTemplateFromCells([e],135,80,"Attached Timer Event 2")}),this.createVertexTemplateEntry("swimlane;html=1;horizontal=0;startSize=20;",320,240,"Pool","Pool",null,null,"bpmn pool"),this.createVertexTemplateEntry("swimlane;html=1;horizontal=0;swimlaneFillColor=white;swimlaneLine=0;",300,120,"Lane","Lane",null,null,"bpmn lane"),this.createVertexTemplateEntry("shape=hexagon;html=1;whiteSpace=wrap;perimeter=hexagonPerimeter;",60,50,"","Conversation",null,null,"bpmn conversation"),this.createVertexTemplateEntry("shape=hexagon;html=1;whiteSpace=wrap;perimeter=hexagonPerimeter;strokeWidth=4",60,50,"","Call Conversation",null,null,"bpmn call conversation"),this.addEntry("bpmn subconversation sub conversation sub-conversation",function(){var e=new mxCell("",new mxGeometry(0,0,60,50),"shape=hexagon;whiteSpace=wrap;html=1;perimeter=hexagonPerimeter;");e.vertex=true;var f=new mxCell("",new mxGeometry(0.5,1,14,14),"html=1;shape=plus;");f.vertex=true;f.geometry.relative=true;f.geometry.offset=new mxPoint(-7,-14);e.insert(f);return d.createVertexTemplateFromCells([e],e.geometry.width,e.geometry.height,"Sub-Conversation")}),this.addEntry("bpmn data object",function(){var e=new mxCell("",new mxGeometry(0,0,40,60),"shape=note;whiteSpace=wrap;size=16;html=1;");e.vertex=true;var g=new mxCell("",new mxGeometry(0,0,14,14),"html=1;shape=singleArrow;arrowWidth=0.4;arrowSize=0.4;");g.vertex=true;g.geometry.relative=true;g.geometry.offset=new mxPoint(2,2);e.insert(g);var f=new mxCell("",new mxGeometry(0.5,1,14,14),"html=1;whiteSpace=wrap;shape=parallelMarker;");f.vertex=true;f.geometry.relative=true;f.geometry.offset=new mxPoint(-7,-14);e.insert(f);return d.createVertexTemplateFromCells([e],e.geometry.width,e.geometry.height,"Data Object")}),this.createVertexTemplateEntry("shape=datastore;whiteSpace=wrap;html=1;",60,60,"","Data Store",null,null,"bpmn data store"),this.createVertexTemplateEntry("shape=plus;html=1;",14,14,"","Sub-Process Marker",null,null,"bpmn subprocess sub process sub-process marker"),this.createVertexTemplateEntry("shape=mxgraph.bpmn.loop;html=1;",14,14,"","Loop Marker",null,null,"bpmn loop marker"),this.createVertexTemplateEntry("shape=parallelMarker;html=1;",14,14,"","Parallel MI Marker",null,null,"bpmn parallel mi marker"),this.createVertexTemplateEntry("shape=parallelMarker;direction=south;html=1;",14,14,"","Sequential MI Marker",null,null,"bpmn sequential mi marker"),this.createVertexTemplateEntry("shape=mxgraph.bpmn.ad_hoc;fillColor=#000000;html=1;",14,14,"","Ad Hoc Marker",null,null,"bpmn ad hoc marker"),this.createVertexTemplateEntry("shape=mxgraph.bpmn.compensation;html=1;",14,14,"","Compensation Marker",null,null,"bpmn compensation marker"),this.createVertexTemplateEntry("shape=message;whiteSpace=wrap;html=1;fillColor=#000000;strokeColor=#ffffff;strokeWidth=2;",40,30,"","Send Task",null,null,"bpmn send task"),this.createVertexTemplateEntry("shape=message;whiteSpace=wrap;html=1;",40,30,"","Receive Task",null,null,"bpmn receive task"),this.createVertexTemplateEntry("shape=mxgraph.bpmn.user_task;html=1;",14,14,"","User Task",null,null,this.getTagsForStencil("mxgraph.bpmn","user_task").join(" ")),this.createVertexTemplateEntry("shape=mxgraph.bpmn.manual_task;html=1;",14,14,"","Manual Task",null,null,this.getTagsForStencil("mxgraph.bpmn","user_task").join(" ")),this.createVertexTemplateEntry("shape=mxgraph.bpmn.business_rule_task;html=1;",14,14,"","Business Rule Task",null,null,this.getTagsForStencil("mxgraph.bpmn","business_rule_task").join(" ")),this.createVertexTemplateEntry("shape=mxgraph.bpmn.service_task;html=1;",14,14,"","Service Task",null,null,this.getTagsForStencil("mxgraph.bpmn","service_task").join(" ")),this.createVertexTemplateEntry("shape=mxgraph.bpmn.script_task;html=1;",14,14,"","Script Task",null,null,this.getTagsForStencil("mxgraph.bpmn","script_task").join(" ")),this.createEdgeTemplateEntry("endArrow=block;endFill=1;endSize=6;html=1;",100,0,"","Sequence Flow",null,"bpmn sequence flow"),this.createEdgeTemplateEntry("startArrow=dash;startSize=8;endArrow=block;endFill=1;endSize=6;html=1;",100,0,"","Default Flow",null,"bpmn default flow"),this.createEdgeTemplateEntry("startArrow=diamondThin;startFill=0;startSize=14;endArrow=block;endFill=1;endSize=6;html=1;",100,0,"","Conditional Flow",null,"bpmn conditional flow"),this.createEdgeTemplateEntry("startArrow=oval;startFill=0;startSize=7;endArrow=block;endFill=0;endSize=10;dashed=1;html=1;",100,0,"","Message Flow 1",null,"bpmn message flow"),this.addEntry("bpmn message flow",function(){var f=new mxCell("",new mxGeometry(0,0,0,0),"startArrow=oval;startFill=0;startSize=7;endArrow=block;endFill=0;endSize=10;dashed=1;html=1;");f.geometry.setTerminalPoint(new mxPoint(0,0),true);f.geometry.setTerminalPoint(new mxPoint(100,0),false);f.geometry.relative=true;f.edge=true;var e=new mxCell("",new mxGeometry(0,0,20,14),"shape=message;html=1;");e.geometry.relative=true;e.setConnectable(false);e.vertex=true;e.geometry.offset=new mxPoint(-10,-7);f.insert(e);return d.createEdgeTemplateFromCells([f],100,0,"Message Flow 2")}),this.createEdgeTemplateEntry("shape=link;html=1;",100,0,"","Link",null,"bpmn link")];this.addPaletteFunctions("bpmn","BPMN "+mxResources.get("general"),false,b)};Sidebar.prototype.createTitle=function(b){var a=document.createElement("a");a.setAttribute("href","javascript:void(0);");a.setAttribute("title",mxResources.get("sidebarTooltip"));a.className="geTitle";mxUtils.write(a,b);return a};Sidebar.prototype.createThumb=function(n,c,m,l,j,g,f,k,h){this.graph.labelsVisible=(g==null||g);var i=mxClient.NO_FO;mxClient.NO_FO=Editor.prototype.originalNoForeignObject;this.graph.view.scaleAndTranslate(1,0,0);this.graph.addCells(n);var a=this.graph.getGraphBounds();var o=Math.floor(Math.min((c-2*this.thumbBorder)/a.width,(m-2*this.thumbBorder)/a.height)*100)/100;this.graph.view.scaleAndTranslate(o,Math.floor((c-a.width*o)/2/o-a.x),Math.floor((m-a.height*o)/2/o-a.y));var d=null;if(this.graph.dialect==mxConstants.DIALECT_SVG&&!mxClient.NO_FO){d=this.graph.view.getCanvas().ownerSVGElement.cloneNode(true)}else{d=this.graph.container.cloneNode(false);d.innerHTML=this.graph.container.innerHTML}this.graph.getModel().clear();mxClient.NO_FO=i;if(mxClient.IS_IE6){l.style.backgroundImage="url("+this.editorUi.editor.transparentImage+")"}d.style.position="relative";d.style.overflow="hidden";d.style.cursor="move";d.style.left=this.thumbBorder+"px";d.style.top=this.thumbBorder+"px";d.style.width=c+"px";d.style.height=m+"px";d.style.visibility="";d.style.minWidth="";d.style.minHeight="";l.appendChild(d);if(this.sidebarTitles&&j!=null&&f!=false){var e=(mxClient.IS_QUIRKS)?2*this.thumbPadding+2:0;l.style.height=(this.thumbHeight+e+this.sidebarTitleSize+8)+"px";var b=document.createElement("div");b.style.fontSize=this.sidebarTitleSize+"px";b.style.color="#303030";b.style.textAlign="center";b.style.whiteSpace="nowrap";if(mxClient.IS_IE){b.style.height=(this.sidebarTitleSize+12)+"px"}b.style.paddingTop="4px";mxUtils.write(b,j);l.appendChild(b)}return a};Sidebar.prototype.createItem=function(k,i,g,f,b,j,h){var e=document.createElement("a");e.setAttribute("href","javascript:void(0);");e.className="geItem";e.style.overflow="hidden";var d=(mxClient.IS_QUIRKS)?8+2*this.thumbPadding:2*this.thumbBorder;e.style.width=(this.thumbWidth+d)+"px";e.style.height=(this.thumbHeight+d)+"px";e.style.padding=this.thumbPadding+"px";if(mxClient.IS_IE6){e.style.border="none"}mxEvent.addListener(e,"click",function(l){mxEvent.consume(l)});this.createThumb(k,this.thumbWidth,this.thumbHeight,e,i,g,f,b,j);var a=new mxRectangle(0,0,b,j);if(k.length>1||k[0].vertex){var c=this.createDragSource(e,this.createDropHandler(k,true,h,a),this.createDragPreview(b,j),k,a);this.addClickHandler(e,c,k);c.isGuidesEnabled=mxUtils.bind(this,function(){return this.editorUi.editor.graph.graphHandler.guidesEnabled})}else{if(k[0]!=null&&k[0].edge){var c=this.createDragSource(e,this.createDropHandler(k,false,h,a),this.createDragPreview(b,j),k,a);this.addClickHandler(e,c,k)}}if(!mxClient.IS_IOS){mxEvent.addGestureListeners(e,null,mxUtils.bind(this,function(l){if(mxEvent.isMouseEvent(l)){this.showTooltip(e,k,a.width,a.height,i,g)}}))}return e};Sidebar.prototype.updateShapes=function(a,k){var m=this.editorUi.editor.graph;var n=m.getCellStyle(a);var p=[];m.model.beginUpdate();try{var e=m.getModel().getStyle(a);var o=["shadow","dashed","dashPattern","fontFamily","fontSize","fontColor","align","startFill","startSize","endFill","endSize","strokeColor","strokeWidth","fillColor","gradientColor","html","part","noEdgeStyle","edgeStyle","elbow","childLayout"];for(var h=0;h<k.length;h++){var d=k[h];if((m.getModel().isVertex(d)==m.getModel().isVertex(a))||(m.getModel().isEdge(d)==m.getModel().isEdge(a))){var c=m.view.getState(d);var b=(c!=null)?c.style:m.getCellStyle(k[h]);m.getModel().setStyle(d,e);if(c!=null&&mxUtils.getValue(c.style,"composite","0")=="1"){var g=m.model.getChildCount(d);for(var f=g;f>=0;f--){m.model.remove(m.model.getChildAt(d,f))}}if(b!=null){if(b[mxConstants.STYLE_SHAPE]=="umlLifeline"&&n[mxConstants.STYLE_SHAPE]!="umlLifeline"){m.setCellStyles(mxConstants.STYLE_SHAPE,"umlLifeline",[d]);m.setCellStyles("participant",n[mxConstants.STYLE_SHAPE],[d])}for(var f=0;f<o.length;f++){var l=b[o[f]];if(l!=null){m.setCellStyles(o[f],l,[d])}}}p.push(d)}}}finally{m.model.endUpdate()}return p};Sidebar.prototype.createDropHandler=function(a,d,b,c){b=(b!=null)?b:true;return mxUtils.bind(this,function(r,q,j,n,m){if(r.isEnabled()){a=r.getImportableCells(a);if(a.length>0){r.stopEditing();var k=(j!=null&&!mxEvent.isAltDown(q))?r.isValidDropTarget(j,a,q):false;var o=null;if(j!=null&&!k){j=null}if(!r.isCellLocked(j||r.getDefaultParent())){r.model.beginUpdate();try{n=Math.round(n);m=Math.round(m);if(d&&r.isSplitTarget(j,a,q)){var p=r.cloneCells(a);r.splitEdge(j,p,null,n-c.width/2,m-c.height/2);o=p}else{if(a.length>0){o=r.importCells(a,n,m,j)}}if(r.layoutManager!=null){var h=r.layoutManager.getLayout(j);if(h!=null){var t=r.view.scale;var l=r.view.translate;var g=(n+l.x)*t;var e=(m+l.y)*t;for(var f=0;f<o.length;f++){h.moveCell(o[f],g,e)}}}if(b){r.fireEvent(new mxEventObject("cellsInserted","cells",o))}}finally{r.model.endUpdate()}if(o!=null&&o.length>0){r.scrollCellToVisible(o[0]);r.setSelectionCells(o)}}}mxEvent.consume(q)}})};Sidebar.prototype.createDragPreview=function(c,a){var b=document.createElement("div");b.style.border="1px dashed black";b.style.width=c+"px";b.style.height=a+"px";return b};Sidebar.prototype.dropAndConnect=function(k,q,p,o){var s=this.getDropAndConnectGeometry(k,q[o],p,q);if(s!=null){var a=this.editorUi.editor.graph;var m=[];a.model.beginUpdate();try{var h=a.getCellGeometry(k);var r=a.getCellGeometry(q[o]);var b=a.model.getParent(k);var e=true;if(a.layoutManager!=null){var l=a.layoutManager.getLayout(b);if(l!=null&&l.constructor==mxStackLayout){e=false;var m=a.view.getState(b);if(m!=null){var c=new mxPoint((m.x/a.view.scale-a.view.translate.x),(m.y/a.view.scale-a.view.translate.y));s.x+=c.x;s.y+=c.y;var j=s.getTerminalPoint(false);if(j!=null){j.x+=c.x;j.y+=c.y}}}}var f=r.x;var d=r.y;if(a.model.isEdge(q[o])){f=0;d=0}var g=a.model.isEdge(k)||(h!=null&&!h.relative&&e);q=a.importCells(q,(s.x-(g?f:0)),(s.y-(g?d:0)),(g)?b:null);m=q;if(a.model.isEdge(k)){a.model.setTerminal(k,q[o],p==mxConstants.DIRECTION_NORTH)}else{if(a.model.isEdge(q[o])){a.model.setTerminal(q[o],k,true);var n=a.getCellGeometry(q[o]);n.points=null;if(n.getTerminalPoint(false)!=null){n.setTerminalPoint(s.getTerminalPoint(false),false)}else{if(g&&a.model.isVertex(b)){var i=a.view.getState(b);var c=new mxPoint((i.x/a.view.scale-a.view.translate.x),(i.y/a.view.scale-a.view.translate.y));a.cellsMoved(q,c.x,c.y,null,null,true)}}}else{r=a.getCellGeometry(q[o]);f=s.x-Math.round(r.x);d=s.y-Math.round(r.y);s.x=Math.round(r.x);s.y=Math.round(r.y);a.model.setGeometry(q[o],s);a.cellsMoved(q,f,d,null,null,true);m=q.slice();q.push(a.insertEdge(null,null,"",k,q[o],a.createCurrentEdgeStyle()))}}a.fireEvent(new mxEventObject("cellsInserted","cells",q))}finally{a.model.endUpdate()}a.setSelectionCells(m)}};Sidebar.prototype.getDropAndConnectGeometry=function(a,i,l,g){var m=this.editorUi.editor.graph;var k=m.view;var b=g.length>1;var f=m.getCellGeometry(a);var e=m.getCellGeometry(i);if(f!=null&&e!=null){e=e.clone();if(m.model.isEdge(a)){var c=m.view.getState(a);var q=c.absolutePoints;var o=q[0];var j=q[q.length-1];if(l==mxConstants.DIRECTION_NORTH){e.x=o.x/k.scale-k.translate.x-e.width/2;e.y=o.y/k.scale-k.translate.y-e.height/2}else{e.x=j.x/k.scale-k.translate.x-e.width/2;e.y=j.y/k.scale-k.translate.y-e.height/2}}else{if(f.relative){var c=m.view.getState(a);f=f.clone();f.x=(c.x-k.translate.x)/k.scale;f.y=(c.y-k.translate.y)/k.scale}var d=m.defaultEdgeLength;if(m.model.isEdge(i)&&e.getTerminalPoint(true)!=null&&e.getTerminalPoint(false)!=null){var o=e.getTerminalPoint(true);var j=e.getTerminalPoint(false);var p=j.x-o.x;var n=j.y-o.y;d=Math.sqrt(p*p+n*n);e.x=f.getCenterX();e.y=f.getCenterY();e.width=1;e.height=1;if(l==mxConstants.DIRECTION_NORTH){e.height=d;e.y=f.y-d;e.setTerminalPoint(new mxPoint(e.x,e.y),false)}else{if(l==mxConstants.DIRECTION_EAST){e.width=d;e.x=f.x+f.width;e.setTerminalPoint(new mxPoint(e.x+e.width,e.y),false)}else{if(l==mxConstants.DIRECTION_SOUTH){e.height=d;e.y=f.y+f.height;e.setTerminalPoint(new mxPoint(e.x,e.y+e.height),false)}else{if(l==mxConstants.DIRECTION_WEST){e.width=d;e.x=f.x-d;e.setTerminalPoint(new mxPoint(e.x,e.y),false)}}}}}else{if(!b&&e.width>45&&e.height>45&&f.width>45&&f.height>45){e.width=e.width*(f.height/e.height);e.height=f.height}e.x=f.x+f.width/2-e.width/2;e.y=f.y+f.height/2-e.height/2;if(l==mxConstants.DIRECTION_NORTH){e.y=e.y-f.height/2-e.height/2-d}else{if(l==mxConstants.DIRECTION_EAST){e.x=e.x+f.width/2+e.width/2+d}else{if(l==mxConstants.DIRECTION_SOUTH){e.y=e.y+f.height/2+e.height/2+d}else{if(l==mxConstants.DIRECTION_WEST){e.x=e.x-f.width/2-e.width/2-d}}}}if(m.model.isEdge(i)&&e.getTerminalPoint(true)!=null&&i.getTerminal(false)!=null){var h=m.getCellGeometry(i.getTerminal(false));if(h!=null){if(l==mxConstants.DIRECTION_NORTH){e.x-=h.getCenterX();e.y-=h.getCenterY()+h.height/2}else{if(l==mxConstants.DIRECTION_EAST){e.x-=h.getCenterX()-h.width/2;e.y-=h.getCenterY()}else{if(l==mxConstants.DIRECTION_SOUTH){e.x-=h.getCenterX();e.y-=h.getCenterY()-h.height/2}else{if(l==mxConstants.DIRECTION_WEST){e.x-=h.getCenterX()+h.width/2;e.y-=h.getCenterY()}}}}}}}}}return e};Sidebar.prototype.createDragSource=function(E,I,u,r,z){var A=this.editorUi;var B=A.editor.graph;var p=null;var d=null;var q=this;for(var F=0;F<r.length;F++){if(d==null&&this.editorUi.editor.graph.model.isVertex(r[F])){d=F}else{if(p==null&&this.editorUi.editor.graph.model.isEdge(r[F])&&this.editorUi.editor.graph.model.getTerminal(r[F],true)==null){p=F}}if(d!=null&&p!=null){break}}var e=mxUtils.makeDraggable(E,this.editorUi.editor.graph,mxUtils.bind(this,function(O,L,P,i,R){if(this.updateThread!=null){window.clearTimeout(this.updateThread)}if(r!=null&&j!=null&&n==c){var N=O.isCellSelected(j.cell)?O.getSelectionCells():[j.cell];var Q=this.updateShapes((O.model.isEdge(j.cell))?r[0]:r[d],N);O.setSelectionCells(Q)}else{if(r!=null&&n!=null&&t!=null&&n!=c){var M=(O.model.isEdge(t.cell)||p==null)?d:p;this.dropAndConnect(t.cell,r,h,M)}else{I.apply(this,arguments)}}if(this.editorUi.hoverIcons!=null){this.editorUi.hoverIcons.update(O.view.getState(O.getSelectionCell()))}}),u,0,0,this.editorUi.editor.graph.autoscroll,true,true);this.editorUi.editor.graph.addListener(mxEvent.ESCAPE,function(L,i){if(e.isActive()){e.reset()}});var g=e.mouseDown;e.mouseDown=function(i){if(!mxEvent.isPopupTrigger(i)&&!mxEvent.isMultiTouchEvent(i)){B.stopEditing();g.apply(this,arguments)}};function l(i,M){var L=null;if(mxClient.IS_IE&&!mxClient.IS_SVG){if(mxClient.IS_IE6&&document.compatMode!="CSS1Compat"){L=document.createElement(mxClient.VML_PREFIX+":image");L.setAttribute("src",i.src);L.style.borderStyle="none"}else{L=document.createElement("div");L.style.backgroundImage="url("+i.src+")";L.style.backgroundPosition="center";L.style.backgroundRepeat="no-repeat"}L.style.width=(i.width+4)+"px";L.style.height=(i.height+4)+"px";L.style.display=(mxClient.IS_QUIRKS)?"inline":"inline-block"}else{L=mxUtils.createImage(i.src);L.style.width=i.width+"px";L.style.height=i.height+"px"}if(M!=null){L.setAttribute("title",M)}mxUtils.setOpacity(L,(i==this.refreshTarget)?30:20);L.style.position="absolute";L.style.cursor="crosshair";return L}var t=null;var a=null;var j=null;var m=false;var C=l(this.triangleUp,mxResources.get("connect"));var G=l(this.triangleRight,mxResources.get("connect"));var o=l(this.triangleDown,mxResources.get("connect"));var k=l(this.triangleLeft,mxResources.get("connect"));var c=l(this.refreshTarget,mxResources.get("replace"));var D=null;var s=l(this.roundDrop);var b=l(this.roundDrop);var h=mxConstants.DIRECTION_NORTH;var n=null;function v(i,N,L,M){if(M.parentNode!=null){if(mxUtils.contains(L,i,N)){mxUtils.setOpacity(M,100);n=M}else{mxUtils.setOpacity(M,(M==c)?30:20)}}return L}var y=e.createPreviewElement;e.createPreviewElement=function(L){var i=y.apply(this,arguments);if(mxClient.IS_SVG){i.style.pointerEvents="none"}this.previewElementWidth=i.style.width;this.previewElementHeight=i.style.height;return i};var x=e.dragEnter;e.dragEnter=function(L,i){if(A.hoverIcons!=null){A.hoverIcons.setDisplay("none")}x.apply(this,arguments)};var H=e.dragExit;e.dragExit=function(L,i){if(A.hoverIcons!=null){A.hoverIcons.setDisplay("")}H.apply(this,arguments)};e.dragOver=function(U,T){mxDragSource.prototype.dragOver.apply(this,arguments);if(this.currentGuide!=null&&n!=null){this.currentGuide.hide()}if(this.previewElement!=null){var Q=U.view;if(j!=null&&n==c){this.previewElement.style.display=(U.model.isEdge(j.cell))?"none":"";this.previewElement.style.left=j.x+"px";this.previewElement.style.top=j.y+"px";this.previewElement.style.width=j.width+"px";this.previewElement.style.height=j.height+"px"}else{if(t!=null&&n!=null){var P=(U.model.isEdge(t.cell)||p==null)?d:p;var N=q.getDropAndConnectGeometry(t.cell,r[P],h,r);var M=(!U.model.isEdge(t.cell))?U.getCellGeometry(t.cell):null;var L=U.getCellGeometry(r[P]);var S=U.model.getParent(t.cell);var W=Q.translate.x*Q.scale;var V=Q.translate.y*Q.scale;if(M!=null&&!M.relative&&U.model.isVertex(S)){var i=Q.getState(S);W=i.x;V=i.y}var R=L.x;var O=L.y;if(U.model.isEdge(r[P])){R=0;O=0}this.previewElement.style.left=((N.x-R)*Q.scale+W)+"px";this.previewElement.style.top=((N.y-O)*Q.scale+V)+"px";if(r.length==1){this.previewElement.style.width=(N.width*Q.scale)+"px";this.previewElement.style.height=(N.height*Q.scale)+"px"}this.previewElement.style.display=""}else{if(e.currentHighlight.state!=null&&U.model.isEdge(e.currentHighlight.state.cell)){this.previewElement.style.left=Math.round(parseInt(this.previewElement.style.left)-z.width*Q.scale/2)+"px";this.previewElement.style.top=Math.round(parseInt(this.previewElement.style.top)-z.height*Q.scale/2)+"px"}else{this.previewElement.style.width=this.previewElementWidth;this.previewElement.style.height=this.previewElementHeight;this.previewElement.style.display=""}}}}};var f=new Date().getTime();var J=0;var w=null;var K=this.editorUi.editor.graph.getCellStyle(r[0]);e.getDropTarget=mxUtils.bind(this,function(P,V,T,X){var N=(!mxEvent.isAltDown(X)&&r!=null)?P.getCellAt(V,T):null;if(N!=null&&!this.graph.isCellConnectable(N)){var S=this.graph.getModel().getParent(N);if(this.graph.getModel().isVertex(S)&&this.graph.isCellConnectable(S)){N=S}}if(P.isCellLocked(N)){N=null}var R=P.view.getState(N);n=null;var L=null;if(w!=R){w=R;f=new Date().getTime();J=0;if(this.updateThread!=null){window.clearTimeout(this.updateThread)}if(R!=null){this.updateThread=window.setTimeout(function(){if(n==null){w=R;e.getDropTarget(P,V,T,X)}},this.dropTargetDelay+10)}}else{J=new Date().getTime()-f}if(J<2500&&R!=null&&!mxEvent.isShiftDown(X)&&(((mxUtils.getValue(R.style,mxConstants.STYLE_SHAPE)!=mxUtils.getValue(K,mxConstants.STYLE_SHAPE)&&mxUtils.getValue(R.style,mxConstants.STYLE_STROKECOLOR,mxConstants.NONE)!=mxConstants.NONE)||mxUtils.getValue(K,mxConstants.STYLE_SHAPE)=="image")||J>1500||P.model.isEdge(R.cell))&&(J>this.dropTargetDelay)&&((P.model.isVertex(R.cell)&&d!=null)||(P.model.isEdge(R.cell)&&P.model.isEdge(r[0])))){j=R;var ac=(P.model.isEdge(R.cell))?P.view.getPoint(R):new mxPoint(R.getCenterX(),R.getCenterY());ac=new mxRectangle(ac.x-this.refreshTarget.width/2,ac.y-this.refreshTarget.height/2,this.refreshTarget.width,this.refreshTarget.height);c.style.left=Math.floor(ac.x)+"px";c.style.top=Math.floor(ac.y)+"px";if(D==null){P.container.appendChild(c);D=c.parentNode}v(V,T,ac,c)}else{if(j==null||!mxUtils.contains(j,V,T)||(J>1500&&!mxEvent.isShiftDown(X))){j=null;if(D!=null){c.parentNode.removeChild(c);D=null}}else{if(j!=null&&D!=null){var ac=(P.model.isEdge(j.cell))?P.view.getPoint(j):new mxPoint(j.getCenterX(),j.getCenterY());ac=new mxRectangle(ac.x-this.refreshTarget.width/2,ac.y-this.refreshTarget.height/2,this.refreshTarget.width,this.refreshTarget.height);v(V,T,ac,c)}}}if(m&&t!=null&&!mxEvent.isAltDown(X)&&n==null){L=mxRectangle.fromRectangle(t);if(P.model.isEdge(t.cell)){var af=t.absolutePoints;if(s.parentNode!=null){var O=af[0];L.add(v(V,T,new mxRectangle(O.x-this.roundDrop.width/2,O.y-this.roundDrop.height/2,this.roundDrop.width,this.roundDrop.height),s))}if(b.parentNode!=null){var ae=af[af.length-1];L.add(v(V,T,new mxRectangle(ae.x-this.roundDrop.width/2,ae.y-this.roundDrop.height/2,this.roundDrop.width,this.roundDrop.height),b))}}else{var aa=mxRectangle.fromRectangle(t);if(t.shape!=null&&t.shape.boundingBox!=null){aa=mxRectangle.fromRectangle(t.shape.boundingBox)}aa.grow(this.graph.tolerance);aa.grow(HoverIcons.prototype.arrowSpacing);var M=this.graph.selectionCellsHandler.getHandler(t.cell);if(M!=null){aa.x-=M.horizontalOffset/2;aa.y-=M.verticalOffset/2;aa.width+=M.horizontalOffset;aa.height+=M.verticalOffset;if(M.rotationShape!=null&&M.rotationShape.node!=null&&M.rotationShape.node.style.visibility!="hidden"&&M.rotationShape.node.style.display!="none"&&M.rotationShape.boundingBox!=null){aa.add(M.rotationShape.boundingBox)}}L.add(v(V,T,new mxRectangle(t.getCenterX()-this.triangleUp.width/2,aa.y-this.triangleUp.height,this.triangleUp.width,this.triangleUp.height),C));L.add(v(V,T,new mxRectangle(aa.x+aa.width,t.getCenterY()-this.triangleRight.height/2,this.triangleRight.width,this.triangleRight.height),G));L.add(v(V,T,new mxRectangle(t.getCenterX()-this.triangleDown.width/2,aa.y+aa.height,this.triangleDown.width,this.triangleDown.height),o));L.add(v(V,T,new mxRectangle(aa.x-this.triangleLeft.width,t.getCenterY()-this.triangleLeft.height/2,this.triangleLeft.width,this.triangleLeft.height),k))}if(L!=null){L.grow(10)}}h=mxConstants.DIRECTION_NORTH;if(n==G){h=mxConstants.DIRECTION_EAST}else{if(n==o||n==b){h=mxConstants.DIRECTION_SOUTH}else{if(n==k){h=mxConstants.DIRECTION_WEST}}}if(j!=null&&n==c){R=j}var W=(d==null||P.isCellConnectable(r[d]))&&((P.model.isEdge(N)&&d!=null)||(P.model.isVertex(N)&&P.isCellConnectable(N)));if((t!=null&&J>=5000)||(t!=R&&(L==null||!mxUtils.contains(L,V,T)||(J>500&&n==null&&W)))){m=false;t=((J<5000&&J>this.dropTargetDelay)||P.model.isEdge(N))?R:null;if(t!=null&&W){var ab=[s,b,C,G,o,k];for(var Z=0;Z<ab.length;Z++){if(ab[Z].parentNode!=null){ab[Z].parentNode.removeChild(ab[Z])}}if(P.model.isEdge(N)){var af=R.absolutePoints;if(af!=null){var O=af[0];var ae=af[af.length-1];var Y=P.tolerance;var U=new mxRectangle(V-Y,T-Y,2*Y,2*Y);s.style.left=Math.floor(O.x-this.roundDrop.width/2)+"px";s.style.top=Math.floor(O.y-this.roundDrop.height/2)+"px";b.style.left=Math.floor(ae.x-this.roundDrop.width/2)+"px";b.style.top=Math.floor(ae.y-this.roundDrop.height/2)+"px";if(P.model.getTerminal(N,true)==null){P.container.appendChild(s)}if(P.model.getTerminal(N,false)==null){P.container.appendChild(b)}}}else{var aa=mxRectangle.fromRectangle(R);if(R.shape!=null&&R.shape.boundingBox!=null){aa=mxRectangle.fromRectangle(R.shape.boundingBox)}aa.grow(this.graph.tolerance);aa.grow(HoverIcons.prototype.arrowSpacing);var M=this.graph.selectionCellsHandler.getHandler(R.cell);if(M!=null){aa.x-=M.horizontalOffset/2;aa.y-=M.verticalOffset/2;aa.width+=M.horizontalOffset;aa.height+=M.verticalOffset;if(M.rotationShape!=null&&M.rotationShape.node!=null&&M.rotationShape.node.style.visibility!="hidden"&&M.rotationShape.node.style.display!="none"&&M.rotationShape.boundingBox!=null){aa.add(M.rotationShape.boundingBox)}}C.style.left=Math.floor(R.getCenterX()-this.triangleUp.width/2)+"px";C.style.top=Math.floor(aa.y-this.triangleUp.height)+"px";G.style.left=Math.floor(aa.x+aa.width)+"px";G.style.top=Math.floor(R.getCenterY()-this.triangleRight.height/2)+"px";o.style.left=C.style.left;o.style.top=Math.floor(aa.y+aa.height)+"px";k.style.left=Math.floor(aa.x-this.triangleLeft.width)+"px";k.style.top=G.style.top;if(R.style.portConstraint!="eastwest"){P.container.appendChild(C);P.container.appendChild(o)}P.container.appendChild(G);P.container.appendChild(k)}if(R!=null){a=P.selectionCellsHandler.getHandler(R.cell);if(a!=null&&a.setHandlesVisible!=null){a.setHandlesVisible(false)}}m=true}else{var ab=[s,b,C,G,o,k];for(var Z=0;Z<ab.length;Z++){if(ab[Z].parentNode!=null){ab[Z].parentNode.removeChild(ab[Z])}}}}if(!m&&a!=null){a.setHandlesVisible(true)}var ad=((!mxEvent.isAltDown(X)||mxEvent.isShiftDown(X))&&!(j!=null&&n==c))?mxDragSource.prototype.getDropTarget.apply(this,arguments):null;var Q=P.getModel();if(ad!=null){if(n!=null||!P.isSplitTarget(ad,r,X)){while(ad!=null&&!P.isValidDropTarget(ad,r,X)&&Q.isVertex(Q.getParent(ad))){ad=Q.getParent(ad)}if(P.view.currentRoot==ad||(!P.isValidRoot(ad)&&P.getModel().getChildCount(ad)==0)||P.isCellLocked(ad)||Q.isEdge(ad)){ad=null}}}return ad});e.stopDrag=function(){mxDragSource.prototype.stopDrag.apply(this,arguments);var M=[s,b,c,C,G,o,k];for(var L=0;L<M.length;L++){if(M[L].parentNode!=null){M[L].parentNode.removeChild(M[L])}}if(t!=null&&a!=null){a.reset()}a=null;t=null;j=null;D=null;n=null};return e};Sidebar.prototype.itemClicked=function(c,f,a,b){var e=this.editorUi.editor.graph;if(mxEvent.isAltDown(a)){if(e.getSelectionCount()==1&&e.model.isVertex(e.getSelectionCell())){var h=null;for(var d=0;d<c.length&&h==null;d++){if(e.model.isVertex(c[d])){h=d}}if(h!=null){this.dropAndConnect(e.getSelectionCell(),c,(mxEvent.isMetaDown(a)||mxEvent.isControlDown(a))?(mxEvent.isShiftDown(a)?mxConstants.DIRECTION_WEST:mxConstants.DIRECTION_NORTH):(mxEvent.isShiftDown(a)?mxConstants.DIRECTION_EAST:mxConstants.DIRECTION_SOUTH),h);e.scrollCellToVisible(e.getSelectionCell())}}}else{if(mxEvent.isShiftDown(a)){if(!e.isSelectionEmpty()){this.updateShapes(c[0],e.getSelectionCells());e.scrollCellToVisible(e.getSelectionCell())}}else{var g=e.getFreeInsertPoint();f.drop(e,a,null,g.x,g.y);if(this.editorUi.hoverIcons!=null&&mxEvent.isTouchEvent(a)){this.editorUi.hoverIcons.update(e.view.getState(e.getSelectionCell()))}}}};Sidebar.prototype.addClickHandler=function(b,d,a){var c=this.editorUi.editor.graph;var f=d.mouseUp;var e=null;mxEvent.addGestureListeners(b,function(g){e=new mxPoint(mxEvent.getClientX(g),mxEvent.getClientY(g))});d.mouseUp=mxUtils.bind(this,function(h){if(!mxEvent.isPopupTrigger(h)&&this.currentGraph==null&&e!=null){var g=c.tolerance;if(Math.abs(e.x-mxEvent.getClientX(h))<=g&&Math.abs(e.y-mxEvent.getClientY(h))<=g){this.itemClicked(a,d,h,b)}}f.apply(d,arguments);e=null;this.currentElt=b})};Sidebar.prototype.createVertexTemplateEntry=function(e,d,a,g,h,b,f,c){c=(c!=null&&c.length>0)?c:h.toLowerCase();return this.addEntry(c,mxUtils.bind(this,function(){return this.createVertexTemplate(e,d,a,g,h,b,f)}))};Sidebar.prototype.createVertexTemplate=function(a,b,h,g,f,d,c,e){var i=[new mxCell((g!=null)?g:"",new mxGeometry(0,0,b,h),a)];i[0].vertex=true;return this.createVertexTemplateFromCells(i,b,h,f,d,c,e)};Sidebar.prototype.createVertexTemplateFromCells=function(c,e,a,g,b,f,d){return this.createItem(c,g,b,f,e,a,d)};Sidebar.prototype.createEdgeTemplateEntry=function(f,e,a,g,h,b,c,d){c=(c!=null&&c.length>0)?c:h.toLowerCase();return this.addEntry(c,mxUtils.bind(this,function(){return this.createEdgeTemplate(f,e,a,g,h,b,d)}))};Sidebar.prototype.createEdgeTemplate=function(f,e,b,g,h,c,d){var a=new mxCell((g!=null)?g:"",new mxGeometry(0,0,e,b),f);a.geometry.setTerminalPoint(new mxPoint(0,b),true);a.geometry.setTerminalPoint(new mxPoint(e,0),false);a.geometry.relative=true;a.edge=true;return this.createEdgeTemplateFromCells([a],e,b,h,c,d)};Sidebar.prototype.createEdgeTemplateFromCells=function(c,e,a,f,b,d){return this.createItem(c,f,b,true,e,a,d)};Sidebar.prototype.addPaletteFunctions=function(d,c,a,b){this.addPalette(d,c,a,mxUtils.bind(this,function(f){for(var e=0;e<b.length;e++){f.appendChild(b[e](f))}}))};Sidebar.prototype.addPalette=function(g,e,a,d){var b=this.createTitle(e);this.container.appendChild(b);var f=document.createElement("div");f.className="geSidebar";if(mxClient.IS_POINTER){f.style.touchAction="none"}mxEvent.addListener(f,"mousemove",mxUtils.bind(this,function(h){if(mxEvent.getSource(h)==f){f.setAttribute("title",mxResources.get("sidebarTooltip"))}else{f.removeAttribute("title")}}));if(a){d(f);d=null}else{f.style.display="none"}this.addFoldingHandler(b,f,d);var c=document.createElement("div");c.appendChild(f);this.container.appendChild(c);if(g!=null){this.palettes[g]=[b,c]}return f};Sidebar.prototype.addFoldingHandler=function(d,b,a){var c=false;if(!mxClient.IS_IE||document.documentMode>=8){d.style.backgroundImage=(b.style.display=="none")?"url('"+this.collapsedImage+"')":"url('"+this.expandedImage+"')"}d.style.backgroundRepeat="no-repeat";d.style.backgroundPosition="0% 50%";mxEvent.addListener(d,"click",mxUtils.bind(this,function(e){if(b.style.display=="none"){if(!c){c=true;if(a!=null){d.style.cursor="wait";var f=d.innerHTML;d.innerHTML=mxResources.get("loading")+"...";window.setTimeout(function(){var g=mxClient.NO_FO;mxClient.NO_FO=Editor.prototype.originalNoForeignObject;a(b);mxClient.NO_FO=g;b.style.display="block";d.style.cursor="";d.innerHTML=f},0)}else{b.style.display="block"}}else{b.style.display="block"}d.style.backgroundImage="url('"+this.expandedImage+"')"}else{d.style.backgroundImage="url('"+this.collapsedImage+"')";b.style.display="none"}mxEvent.consume(e)}))};Sidebar.prototype.removePalette=function(c){var b=this.palettes[c];if(b!=null){this.palettes[c]=null;for(var a=0;a<b.length;a++){this.container.removeChild(b[a])}return true}return false};Sidebar.prototype.addImagePalette=function(a,g,d,j,f,c,k){var e=c!=null;var h=[];for(var b=0;b<f.length;b++){(mxUtils.bind(this,function(n,o,l){if(l==null){var m=n.lastIndexOf("/");var i=n.lastIndexOf(".");l=n.substring((m>=0)?m+1:0,(i>=0)?i:n.length).replace(/[-_]/g," ")}h.push(this.createVertexTemplateEntry("image;html=1;labelBackgroundColor=#ffffff;image="+d+n+j,this.defaultImageWidth,this.defaultImageHeight,"",o,o!=null,null,this.filterTags(l)))}))(f[b],(c!=null)?c[b]:null,(k!=null)?k[f[b]]:null)}this.addPaletteFunctions(a,g,false,h)};Sidebar.prototype.getTagsForStencil=function(a,c,e){var b=a.split(".");for(var d=1;d<b.length;d++){b[d]=b[d].replace(/_/g," ")}b.push(c.replace(/_/g," "));if(e!=null){b.push(e)}return b.slice(1,b.length)};Sidebar.prototype.addStencilPalette=function(b,h,e,a,g,j,c,l,f){c=(c!=null)?c:1;if(this.addStencilsToIndex){var k=[];if(f!=null){for(var d=0;d<f.length;d++){k.push(f[d])}}mxStencilRegistry.loadStencilSet(e,mxUtils.bind(this,function(n,p,m,i,r){if(g==null||mxUtils.indexOf(g,p)<0){var q=this.getTagsForStencil(n,p);var o=(l!=null)?l[p]:null;if(o!=null){q.push(o)}k.push(this.createVertexTemplateEntry("shape="+n+p.toLowerCase()+a,Math.round(i*c),Math.round(r*c),"",p.replace(/_/g," "),null,null,this.filterTags(q.join(" "))))}}),true,true);this.addPaletteFunctions(b,h,false,k)}else{this.addPalette(b,h,false,mxUtils.bind(this,function(n){if(a==null){a=""}if(j!=null){j.call(this,n)}if(f!=null){for(var m=0;m<f.length;m++){f[m](n)}}mxStencilRegistry.loadStencilSet(e,mxUtils.bind(this,function(p,q,o,i,r){if(g==null||mxUtils.indexOf(g,q)<0){n.appendChild(this.createVertexTemplate("shape="+p+q.toLowerCase()+a,Math.round(i*c),Math.round(r*c),"",q.replace(/_/g," "),true))}}),true)}))}};Sidebar.prototype.destroy=function(){if(this.graph!=null){if(this.graph.container!=null&&this.graph.container.parentNode!=null){this.graph.container.parentNode.removeChild(this.graph.container)}this.graph.destroy();this.graph=null}if(this.pointerUpHandler!=null){mxEvent.removeListener(document,(mxClient.IS_POINTER)?"pointerup":"mouseup",this.pointerUpHandler);this.pointerUpHandler=null}if(this.pointerDownHandler!=null){mxEvent.removeListener(document,(mxClient.IS_POINTER)?"pointerdown":"mousedown",this.pointerDownHandler);this.pointerDownHandler=null}if(this.pointerMoveHandler!=null){mxEvent.removeListener(document,(mxClient.IS_POINTER)?"pointermove":"mousemove",this.pointerMoveHandler);this.pointerMoveHandler=null}if(this.pointerOutHandler!=null){mxEvent.removeListener(document,(mxClient.IS_POINTER)?"pointerout":"mouseout",this.pointerOutHandler);this.pointerOutHandler=null}};