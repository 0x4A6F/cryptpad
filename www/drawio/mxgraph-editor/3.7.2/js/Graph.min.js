if(typeof html4!=="undefined"){html4.ATTRIBS["a::target"]=0}mxConstants.SHADOW_OPACITY=0.25;mxConstants.SHADOWCOLOR="#000000";mxConstants.VML_SHADOWCOLOR="#d0d0d0";mxGraph.prototype.pageBreakColor="#c0c0c0";mxGraph.prototype.pageScale=1;(function(){try{if(navigator!=null&&navigator.language!=null){var b=navigator.language.toLowerCase();mxGraph.prototype.pageFormat=(b==="en-us"||b==="en-ca"||b==="es-mx")?mxConstants.PAGE_FORMAT_LETTER_PORTRAIT:mxConstants.PAGE_FORMAT_A4_PORTRAIT}}catch(a){}})();mxText.prototype.baseSpacingTop=5;mxText.prototype.baseSpacingBottom=1;mxGraphModel.prototype.ignoreRelativeEdgeParent=false;mxGraphView.prototype.gridImage=(mxClient.IS_SVG)?"data:image/gif;base64,R0lGODlhCgAKAJEAAAAAAP///8zMzP///yH5BAEAAAMALAAAAAAKAAoAAAIJ1I6py+0Po2wFADs=":IMAGE_PATH+"/grid.gif";mxGraphView.prototype.gridSteps=4;mxGraphView.prototype.minGridSize=4;mxGraphView.prototype.gridColor="#e0e0e0";mxSvgCanvas2D.prototype.foAltText="[Not supported by viewer]";Graph=function(n,k,i,v,t){mxGraph.call(this,n,k,i,v);this.themes=t||this.defaultThemes;var x=this.baseUrl;var r=x.indexOf("//");this.domainUrl="";this.domainPathUrl="";if(r>0){var w=x.indexOf("/",r+2);if(w>0){this.domainUrl=x.substring(0,w)}w=x.lastIndexOf("/");if(w>0){this.domainPathUrl=x.substring(0,w+1)}}this.isHtmlLabel=function(b){var p=this.view.getState(b);var d=(p!=null)?p.style:this.getCellStyle(b);return d.html=="1"||d[mxConstants.STYLE_WHITE_SPACE]=="wrap"};if(this.edgeMode){var l={point:null,event:null,state:null,handle:null,selected:false};this.addListener(mxEvent.FIRE_MOUSE_EVENT,mxUtils.bind(this,function(d,b){if(b.getProperty("eventName")=="mouseDown"&&this.isEnabled()){var B=b.getProperty("event");if(!mxEvent.isControlDown(B.getEvent())&&!mxEvent.isShiftDown(B.getEvent())){var C=B.getState();if(C!=null){if(this.model.isEdge(C.cell)){l.point=new mxPoint(B.getGraphX(),B.getGraphY());l.selected=this.isCellSelected(C.cell);l.state=C;l.event=B;if(C.text!=null&&C.text.boundingBox!=null&&mxUtils.contains(C.text.boundingBox,B.getGraphX(),B.getGraphY())){l.handle=mxEvent.LABEL_HANDLE}else{var p=this.selectionCellsHandler.getHandler(C.cell);if(p!=null&&p.bends!=null&&p.bends.length>0){l.handle=p.getHandleForEvent(B)}}}}}}}));var z=null;this.addMouseListener({mouseDown:function(b,d){},mouseMove:mxUtils.bind(this,function(B,F){if(this.isEnabled()&&!this.panningHandler.isActive()&&!mxEvent.isControlDown(F.getEvent())&&!mxEvent.isShiftDown(F.getEvent())&&!mxEvent.isAltDown(F.getEvent())){var J=this.tolerance;if(l.point!=null&&l.state!=null&&l.event!=null){var b=l.state;if(Math.abs(l.point.x-F.getGraphX())>J*this.view.scale||Math.abs(l.point.y-F.getGraphY())>J*this.view.scale){if(!this.isCellSelected(b.cell)){this.setSelectionCell(b.cell)}var K=this.selectionCellsHandler.getHandler(b.cell);if(K!=null&&K.bends!=null&&K.bends.length>0){var E=K.getHandleForEvent(l.event);var D=this.view.getEdgeStyle(b);var d=D==mxEdgeStyle.EntityRelation;if(!l.selected&&l.handle==mxEvent.LABEL_HANDLE){E=l.handle}if(!d||E==0||E==K.bends.length-1||E==mxEvent.LABEL_HANDLE){if(E==mxEvent.LABEL_HANDLE||E==0||b.visibleSourceState!=null||E==K.bends.length-1||b.visibleTargetState!=null){if(!d&&E!=mxEvent.LABEL_HANDLE){var L=b.absolutePoints;if(L!=null&&((D==null&&E==null)||D==mxEdgeStyle.OrthConnector)){E=l.handle;if(E==null){var C=new mxRectangle(l.point.x,l.point.y);C.grow(mxEdgeHandler.prototype.handleImage.width/2);if(mxUtils.contains(C,L[0].x,L[0].y)){E=0}else{if(mxUtils.contains(C,L[L.length-1].x,L[L.length-1].y)){E=K.bends.length-1}else{var H=D!=null&&(L.length==2||(L.length==3&&((Math.round(L[0].x-L[1].x)==0&&Math.round(L[1].x-L[2].x)==0)||(Math.round(L[0].y-L[1].y)==0&&Math.round(L[1].y-L[2].y)==0))));if(H){E=2}else{E=mxUtils.findNearestSegment(b,l.point.x,l.point.y);if(D==null){E=mxEvent.VIRTUAL_HANDLE-E}else{E+=1}}}}}}if(E==null){E=mxEvent.VIRTUAL_HANDLE}}K.start(F.getGraphX(),F.getGraphX(),E);l.state=null;l.event=null;l.point=null;l.handle=null;l.selected=false;F.consume();this.graphHandler.reset()}}else{if(d&&(b.visibleSourceState!=null||b.visibleTargetState!=null)){this.graphHandler.reset();F.consume()}}}}}else{var b=F.getState();if(b!=null){if(this.model.isEdge(b.cell)){var I=null;var L=b.absolutePoints;if(L!=null){var C=new mxRectangle(F.getGraphX(),F.getGraphY());C.grow(mxEdgeHandler.prototype.handleImage.width/2);if(b.text!=null&&b.text.boundingBox!=null&&mxUtils.contains(b.text.boundingBox,F.getGraphX(),F.getGraphY())){I="move"}else{if(mxUtils.contains(C,L[0].x,L[0].y)||mxUtils.contains(C,L[L.length-1].x,L[L.length-1].y)){I="pointer"}else{if(b.visibleSourceState!=null||b.visibleTargetState!=null){var p=this.view.getEdgeStyle(b);I="crosshair";if(p!=mxEdgeStyle.EntityRelation&&this.isOrthogonal(b)){var G=mxUtils.findNearestSegment(b,F.getGraphX(),F.getGraphY());if(G<L.length-1&&G>=0){I=(Math.round(L[G].x-L[G+1].x)==0)?"col-resize":"row-resize"}}}}}}if(I!=null){b.setCursor(I)}}}}}}),mouseUp:mxUtils.bind(this,function(b,d){l.state=null;l.event=null;l.point=null;l.handle=null})})}this.cellRenderer.getLabelValue=function(d){var b=mxCellRenderer.prototype.getLabelValue.apply(this,arguments);if(d.view.graph.isHtmlLabel(d.cell)){if(d.style.html!=1){b=mxUtils.htmlEntities(b,false)}else{b=d.view.graph.sanitizeHtml(b)}}return b};if(typeof mxVertexHandler!=="undefined"){this.setConnectable(true);this.setDropEnabled(true);this.setPanning(true);this.setTooltips(true);this.setAllowLoops(true);this.allowAutoPanning=true;this.resetEdgesOnConnect=false;this.constrainChildren=false;this.constrainRelativeChildren=true;this.graphHandler.scrollOnMove=false;this.graphHandler.scaleGrid=true;this.connectionHandler.setCreateTarget(false);this.connectionHandler.insertBeforeSource=true;this.connectionHandler.isValidSource=function(b,d){return false};this.alternateEdgeStyle="vertical";if(v==null){this.loadStylesheet()}var q=this.graphHandler.getGuideStates;this.graphHandler.getGuideStates=function(){var I=q.apply(this,arguments);if(this.graph.pageVisible){var E=[];var D=this.graph.pageFormat;var b=this.graph.pageScale;var F=D.width*b;var C=D.height*b;var G=this.graph.view.translate;var H=this.graph.view.scale;var B=this.graph.getPageLayout();for(var p=0;p<B.width;p++){E.push(new mxRectangle(((B.x+p)*F+G.x)*H,(B.y*C+G.y)*H,F*H,C*H))}for(var d=0;d<B.height;d++){E.push(new mxRectangle((B.x*F+G.x)*H,((B.y+d)*C+G.y)*H,F*H,C*H))}I=E.concat(I)}return I};mxDragSource.prototype.dragElementZIndex=mxPopupMenu.prototype.zIndex;mxGuide.prototype.getGuideColor=function(d,b){return(d.cell==null)?"#ffa500":mxConstants.GUIDE_COLOR};this.graphHandler.createPreviewShape=function(b){this.previewColor=(this.graph.background=="#000000")?"#ffffff":mxGraphHandler.prototype.previewColor;return mxGraphHandler.prototype.createPreviewShape.apply(this,arguments)};this.graphHandler.getCells=function(B){var b=mxGraphHandler.prototype.getCells.apply(this,arguments);var p=[];for(var d=0;d<b.length;d++){var E=this.graph.view.getState(b[d]);var D=(E!=null)?E.style:this.graph.getCellStyle(b[d]);if(mxUtils.getValue(D,"part","0")=="1"){var C=this.graph.model.getParent(b[d]);if(this.graph.model.isVertex(C)&&mxUtils.indexOf(b,C)<0){p.push(C)}}else{p.push(b[d])}}return p};this.connectionHandler.createTargetVertex=function(b,C){var B=this.graph.view.getState(C);var p=(B!=null)?B.style:this.graph.getCellStyle(C);if(mxUtils.getValue(p,"part",false)){var d=this.graph.model.getParent(C);if(this.graph.model.isVertex(d)){C=d}}return mxConnectionHandler.prototype.createTargetVertex.apply(this,arguments)};var u=new mxRubberband(this);this.getRubberband=function(){return u};var o=new Date().getTime();var a=0;var h=this.connectionHandler.mouseMove;this.connectionHandler.mouseMove=function(){var b=this.currentState;h.apply(this,arguments);if(b!=this.currentState){o=new Date().getTime();a=0}else{a=new Date().getTime()-o}};var j=this.connectionHandler.isOutlineConnectEvent;this.connectionHandler.isOutlineConnectEvent=function(b){return(this.currentState!=null&&b.getState()==this.currentState&&a>2000)||((this.currentState==null||mxUtils.getValue(this.currentState.style,"outlineConnect","1")!="0")&&j.apply(this,arguments))};var y=this.isToggleEvent;this.isToggleEvent=function(b){return y.apply(this,arguments)||mxEvent.isShiftDown(b)};var f=u.isForceRubberbandEvent;u.isForceRubberbandEvent=function(b){return f.apply(this,arguments)||(mxUtils.hasScrollbars(this.graph.container)&&mxClient.IS_FF&&mxClient.IS_WIN&&b.getState()==null&&mxEvent.isTouchEvent(b.getEvent()))};var g=null;this.panningHandler.addListener(mxEvent.PAN_START,mxUtils.bind(this,function(){if(this.isEnabled()){g=this.container.style.cursor;this.container.style.cursor="move"}}));this.panningHandler.addListener(mxEvent.PAN_END,mxUtils.bind(this,function(){if(this.isEnabled()){this.container.style.cursor=g}}));this.popupMenuHandler.autoExpand=true;this.popupMenuHandler.isSelectOnPopup=function(b){return mxEvent.isMouseEvent(b.getEvent())};var s=this.click;this.click=function(p){if(!this.isEnabled()&&!p.isConsumed()){var b=p.getCell();if(b!=null){var d=this.getLinkForCell(b);if(d!=null){window.open(d)}}}else{return s.apply(this,arguments)}};var A=this.getCursorForCell;this.getCursorForCell=function(b){if(!this.isEnabled()){var d=this.getLinkForCell(b);if(d!=null){return"pointer"}}else{return A.apply(this,arguments)}};this.selectRegion=function(p,b){var d=this.getAllCells(p.x,p.y,p.width,p.height);this.selectCellsForEvent(d,b);return d};this.getAllCells=function(H,G,B,L,I,M){M=(M!=null)?M:[];if(B>0||L>0){var F=this.getModel();var K=H+B;var b=G+L;if(I==null){I=this.getCurrentRoot();if(I==null){I=F.getRoot()}}if(I!=null){var C=F.getChildCount(I);for(var D=0;D<C;D++){var J=F.getChildAt(I,D);var d=this.view.getState(J);if(d!=null&&this.isCellVisible(J)&&mxUtils.getValue(d.style,"locked","0")!="1"){var p=mxUtils.getValue(d.style,mxConstants.STYLE_ROTATION)||0;var E=d;if(p!=0){E=mxUtils.getBoundingBox(E,p)}if((F.isEdge(J)||F.isVertex(J))&&E.x>=H&&E.y+E.height<=b&&E.y>=G&&E.x+E.width<=K){M.push(J)}this.getAllCells(H,G,B,L,J,M)}}}}return M};var m=this.graphHandler.shouldRemoveCellsFromParent;this.graphHandler.shouldRemoveCellsFromParent=function(p,d,b){if(this.graph.isCellSelected(p)){return false}return m.apply(this,arguments)};this.isCellLocked=function(b){var d=this.view.getState(b);while(d!=null){if(mxUtils.getValue(d.style,"locked","0")=="1"){return true}d=this.view.getState(this.model.getParent(d.cell))}return false};var e=null;this.addListener(mxEvent.FIRE_MOUSE_EVENT,mxUtils.bind(this,function(d,b){if(b.getProperty("eventName")=="mouseDown"){var p=b.getProperty("event");var B=p.getState();if(B!=null&&!this.isSelectionEmpty()&&!this.isCellSelected(B.cell)){e=this.getSelectionCells()}else{e=null}}}));this.addListener(mxEvent.TAP_AND_HOLD,mxUtils.bind(this,function(p,d){if(!mxEvent.isMultiTouchEvent(d)){var B=d.getProperty("event");var b=d.getProperty("cell");if(b==null){var C=mxUtils.convertPoint(this.container,mxEvent.getClientX(B),mxEvent.getClientY(B));u.start(C.x,C.y)}else{if(e!=null){this.addSelectionCells(e)}else{if(this.getSelectionCount()>1&&this.isCellSelected(b)){this.removeSelectionCell(b)}}}e=null;d.consume()}}));this.connectionHandler.selectCells=function(b,d){this.graph.setSelectionCell(d||b)};this.connectionHandler.constraintHandler.isStateIgnored=function(d,b){return b&&d.view.graph.isCellSelected(d.cell)};this.selectionModel.addListener(mxEvent.CHANGE,mxUtils.bind(this,function(){var b=this.connectionHandler.constraintHandler;if(b.currentFocus!=null&&b.isStateIgnored(b.currentFocus,true)){b.currentFocus=null;b.constraints=null;b.destroyIcons()}b.destroyFocusHighlight()}));if(Graph.touchStyle){this.initTouch()}var c=this.updateMouseEvent;this.updateMouseEvent=function(b){b=c.apply(this,arguments);if(this.isCellLocked(b.getCell())){b.state=null}return b}}};Graph.touchStyle=mxClient.IS_TOUCH||(mxClient.IS_FF&&mxClient.IS_WIN)||navigator.maxTouchPoints>0||navigator.msMaxTouchPoints>0||window.urlParams==null||urlParams.touch=="1";Graph.fileSupport=window.File!=null&&window.FileReader!=null&&window.FileList!=null&&(window.urlParams==null||urlParams.filesupport!="0");mxUtils.extend(Graph,mxGraph);Graph.prototype.minFitScale=null;Graph.prototype.maxFitScale=null;Graph.prototype.linkPolicy=(urlParams.target=="frame")?"blank":(urlParams.target||"auto");Graph.prototype.linkTarget=(urlParams.target=="frame")?"_self":"_blank";Graph.prototype.defaultScrollbars=!mxClient.IS_IOS;Graph.prototype.defaultPageVisible=true;Graph.prototype.lightbox=false;Graph.prototype.defaultGraphBackground="#ffffff";Graph.prototype.scrollTileSize=new mxRectangle(0,0,400,400);Graph.prototype.transparentBackground=true;Graph.prototype.defaultEdgeLength=80;Graph.prototype.edgeMode=false;Graph.prototype.connectionArrowsEnabled=true;Graph.prototype.placeholderPattern=new RegExp("%(date{.*}|[^%^{^}]+)%","g");Graph.prototype.absoluteUrlPattern=new RegExp("^(?:[a-z]+:)?//","i");Graph.prototype.defaultThemeName="default";Graph.prototype.defaultThemes={};Graph.prototype.baseUrl=(window!=window.top)?document.referrer:document.location.toString();Graph.prototype.init=function(a){mxGraph.prototype.init.apply(this,arguments);this.cellRenderer.initializeLabel=function(c,b){mxCellRenderer.prototype.initializeLabel.apply(this,arguments);mxEvent.addListener(b.node,"click",mxUtils.bind(this,function(d){var f=mxEvent.getSource(d);while(f!=null&&f!=b.node){if(f.nodeName=="A"){var e=f.getAttribute("href");if(e!=null){var g=c.view.graph.isBlankLink(e)?c.view.graph.linkTarget:"_top";e=c.view.graph.getAbsoluteUrl(e);if(g=="_self"&&window!=window.top){window.location.href=e}else{window.open(e,g)}mxEvent.consume(d)}break}f=f.parentNode}}))};this.initLayoutManager()};Graph.prototype.initLayoutManager=function(){this.layoutManager=new mxLayoutManager(this);this.layoutManager.getLayout=function(a){var e=this.graph.view.getState(a);var d=(e!=null)?e.style:this.graph.getCellStyle(a);if(d.childLayout=="stackLayout"){var f=new mxStackLayout(this.graph,true);f.resizeParentMax=true;f.horizontal=mxUtils.getValue(d,"horizontalStack","1")=="1";f.resizeParent=mxUtils.getValue(d,"resizeParent","1")=="1";f.resizeLast=mxUtils.getValue(d,"resizeLast","0")=="1";f.marginLeft=d.marginLeft||0;f.marginRight=d.marginRight||0;f.marginTop=d.marginTop||0;f.marginBottom=d.marginBottom||0;f.fill=true;return f}else{if(d.childLayout=="treeLayout"){var c=new mxCompactTreeLayout(this.graph);c.horizontal=mxUtils.getValue(d,"horizontalTree","1")=="1";c.resizeParent=mxUtils.getValue(d,"resizeParent","1")=="1";c.groupPadding=mxUtils.getValue(d,"parentPadding",20);c.levelDistance=mxUtils.getValue(d,"treeLevelDistance",30);c.maintainParentLocation=true;c.edgeRouting=false;c.resetEdges=false;return c}else{if(d.childLayout=="flowLayout"){var b=new mxHierarchicalLayout(this.graph,mxUtils.getValue(d,"flowOrientation",mxConstants.DIRECTION_EAST));b.resizeParent=mxUtils.getValue(d,"resizeParent","1")=="1";b.parentBorder=mxUtils.getValue(d,"parentPadding",20);b.maintainParentLocation=true;b.intraCellSpacing=mxUtils.getValue(d,"intraCellSpacing",mxHierarchicalLayout.prototype.intraCellSpacing);b.interRankCellSpacing=mxUtils.getValue(d,"interRankCellSpacing",mxHierarchicalLayout.prototype.interRankCellSpacing);b.interHierarchySpacing=mxUtils.getValue(d,"interHierarchySpacing",mxHierarchicalLayout.prototype.interHierarchySpacing);b.parallelEdgeSpacing=mxUtils.getValue(d,"parallelEdgeSpacing",mxHierarchicalLayout.prototype.parallelEdgeSpacing);return b}}}return null}};Graph.prototype.getPageSize=function(){return(this.pageVisible)?new mxRectangle(0,0,this.pageFormat.width*this.pageScale,this.pageFormat.height*this.pageScale):this.scrollTileSize};Graph.prototype.getPageLayout=function(){var k=this.getPageSize();var a=this.getGraphBounds();if(a.width==0||a.height==0){return new mxRectangle(0,0,1,1)}else{var g=Math.ceil(a.x/this.view.scale-this.view.translate.x);var f=Math.ceil(a.y/this.view.scale-this.view.translate.y);var j=Math.floor(a.width/this.view.scale);var c=Math.floor(a.height/this.view.scale);var b=Math.floor(g/k.width);var i=Math.floor(f/k.height);var d=Math.ceil((g+j)/k.width)-b;var e=Math.ceil((f+c)/k.height)-i;return new mxRectangle(b,i,d,e)}};Graph.prototype.sanitizeHtml=function(c,a){function b(e){if(e!=null&&e.toString().toLowerCase().substring(0,11)!=="javascript:"){return e}return null}function d(e){return e}return html_sanitize(c,b,d)};Graph.prototype.updatePlaceholders=function(){var b=this.model;var d=false;for(var c in this.model.cells){var a=this.model.cells[c];if(this.isReplacePlaceholders(a)){this.view.invalidate(a,false,false);d=true}}if(d){this.view.validate()}};Graph.prototype.isReplacePlaceholders=function(a){return a.value!=null&&typeof(a.value)=="object"&&a.value.getAttribute("placeholders")=="1"};Graph.prototype.isIgnoreTerminalEvent=function(a){return mxEvent.isShiftDown(a)&&mxEvent.isControlDown(a)};Graph.prototype.isSplitTarget=function(c,b,a){return !mxEvent.isShiftDown(a)&&mxGraph.prototype.isSplitTarget.apply(this,arguments)};Graph.prototype.getLabel=function(b){var a=mxGraph.prototype.getLabel.apply(this,arguments);if(a!=null&&this.isReplacePlaceholders(b)&&b.getAttribute("placeholder")==null){a=this.replacePlaceholders(b,a)}return a};Graph.prototype.isLabelMovable=function(a){var c=this.view.getState(a);var b=(c!=null)?c.style:this.getCellStyle(a);return !this.isCellLocked(a)&&((this.model.isEdge(a)&&this.edgeLabelsMovable)||(this.model.isVertex(a)&&(this.vertexLabelsMovable||mxUtils.getValue(b,"labelMovable","0")=="1")))};mxGraph.prototype.setGridSize=function(a){this.gridSize=a;this.fireEvent(new mxEventObject("gridSizeChanged"))};Graph.prototype.getGlobalVariable=function(b){var c=null;if(b=="date"){c=new Date().toLocaleDateString()}else{if(b=="time"){c=new Date().toLocaleTimeString()}else{if(b=="timestamp"){c=new Date().toLocaleString()}else{if(b.substring(0,5)=="date{"){var a=b.substring(5,b.length-1);c=this.formatDate(new Date(),a)}}}}return c};Graph.prototype.formatDate=function(v,q,a){if(this.dateFormatCache==null){this.dateFormatCache={i18n:{dayNames:["Sun","Mon","Tue","Wed","Thu","Fri","Sat","Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],monthNames:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec","January","February","March","April","May","June","July","August","September","October","November","December"]},masks:{"default":"ddd mmm dd yyyy HH:MM:ss",shortDate:"m/d/yy",mediumDate:"mmm d, yyyy",longDate:"mmmm d, yyyy",fullDate:"dddd, mmmm d, yyyy",shortTime:"h:MM TT",mediumTime:"h:MM:ss TT",longTime:"h:MM:ss TT Z",isoDate:"yyyy-mm-dd",isoTime:"HH:MM:ss",isoDateTime:"yyyy-mm-dd'T'HH:MM:ss",isoUtcDateTime:"UTC:yyyy-mm-dd'T'HH:MM:ss'Z'"}}}var j=this.dateFormatCache;var c=/d{1,4}|m{1,4}|yy(?:yy)?|([HhMsTt])\1?|[LloSZ]|"[^"]*"|'[^']*'/g,n=/\b(?:[PMCEA][SDP]T|(?:Pacific|Mountain|Central|Eastern|Atlantic) (?:Standard|Daylight|Prevailing) Time|(?:GMT|UTC)(?:[-+]\d{4})?)\b/g,u=/[^-+\dA-Z]/g,r=function(m,d){m=String(m);d=d||2;while(m.length<d){m="0"+m}return m};if(arguments.length==1&&Object.prototype.toString.call(v)=="[object String]"&&!/\d/.test(v)){q=v;v=undefined}v=v?new Date(v):new Date;if(isNaN(v)){throw SyntaxError("invalid date")}q=String(j.masks[q]||q||j.masks["default"]);if(q.slice(0,4)=="UTC:"){q=q.slice(4);a=true}var w=a?"getUTC":"get",t=v[w+"Date"](),k=v[w+"Day"](),p=v[w+"Month"](),g=v[w+"FullYear"](),h=v[w+"Hours"](),e=v[w+"Minutes"](),i=v[w+"Seconds"](),f=v[w+"Milliseconds"](),l=a?0:v.getTimezoneOffset(),b={d:t,dd:r(t),ddd:j.i18n.dayNames[k],dddd:j.i18n.dayNames[k+7],m:p+1,mm:r(p+1),mmm:j.i18n.monthNames[p],mmmm:j.i18n.monthNames[p+12],yy:String(g).slice(2),yyyy:g,h:h%12||12,hh:r(h%12||12),H:h,HH:r(h),M:e,MM:r(e),s:i,ss:r(i),l:r(f,3),L:r(f>99?Math.round(f/10):f),t:h<12?"a":"p",tt:h<12?"am":"pm",T:h<12?"A":"P",TT:h<12?"AM":"PM",Z:a?"UTC":(String(v).match(n)||[""]).pop().replace(u,""),o:(l>0?"-":"+")+r(Math.floor(Math.abs(l)/60)*100+Math.abs(l)%60,4),S:["th","st","nd","rd"][t%10>3?0:(t%100-t%10!=10)*t%10]};return q.replace(c,function(d){return d in b?b[d]:d.slice(1,d.length-1)})};Graph.prototype.createLayersDialog=function(){var d=document.createElement("div");d.style.position="absolute";var b=this.getModel();var a=b.getChildCount(b.root);for(var c=0;c<a;c++){(function(f){var g=document.createElement("div");g.style.overflow="hidden";g.style.textOverflow="ellipsis";g.style.padding="2px";g.style.whiteSpace="nowrap";var e=document.createElement("input");e.setAttribute("type","checkbox");if(b.isVisible(f)){e.setAttribute("checked","checked");e.defaultChecked=true}g.appendChild(e);var h=f.value||(mxResources.get("background")||"Background");g.setAttribute("title",h);mxUtils.write(g,h);d.appendChild(g);mxEvent.addListener(e,"click",function(){if(e.getAttribute("checked")!=null){e.removeAttribute("checked")}else{e.setAttribute("checked","checked")}b.setVisible(f,e.checked)})}(b.getChildAt(b.root,c)))}return d};Graph.prototype.replacePlaceholders=function(b,h){var a=[];var e=0;while(match=this.placeholderPattern.exec(h)){var g=match[0];if(g.length>2&&g!="%label%"&&g!="%tooltip%"){var d=null;if(match.index>e&&h.charAt(match.index-1)=="%"){d=g.substring(1)}else{var c=g.substring(1,g.length-1);if(c.indexOf("{")<0){var f=b;while(d==null&&f!=null){if(f.value!=null&&typeof(f.value)=="object"){d=(f.hasAttribute(c))?((f.getAttribute(c)!=null)?f.getAttribute(c):""):null}f=this.model.getParent(f)}}if(d==null){d=this.getGlobalVariable(c)}}a.push(h.substring(e,match.index)+((d!=null)?d:g));e=match.index+g.length}}a.push(h.substring(e));return a.join("")};Graph.prototype.selectCellsForConnectVertex=function(b,a,c){if(b.length==2&&this.model.isVertex(b[1])){this.setSelectionCell(b[1]);if(c!=null){if(mxEvent.isTouchEvent(a)){c.update(c.getState(this.view.getState(b[1])))}else{c.reset()}}this.scrollCellToVisible(b[1])}else{this.setSelectionCells(b)}};Graph.prototype.connectVertex=function(v,B,e,q,c){var u=(v.geometry.relative&&v.parent.geometry!=null)?new mxPoint(v.parent.geometry.width*v.geometry.x,v.parent.geometry.height*v.geometry.y):new mxPoint(v.geometry.x,v.geometry.y);if(B==mxConstants.DIRECTION_NORTH){u.x+=v.geometry.width/2;u.y-=e}else{if(B==mxConstants.DIRECTION_SOUTH){u.x+=v.geometry.width/2;u.y+=v.geometry.height+e}else{if(B==mxConstants.DIRECTION_WEST){u.x-=e;u.y+=v.geometry.height/2}else{u.x+=v.geometry.width+e;u.y+=v.geometry.height/2}}}var a=this.view.getState(this.model.getParent(v));var o=this.view.scale;var n=this.view.translate;var m=n.x*o;var l=n.y*o;if(this.model.isVertex(a.cell)){m=a.x;l=a.y}if(this.model.isVertex(v.parent)&&v.geometry.relative){u.x+=v.parent.geometry.x;u.y+=v.parent.geometry.y}var C=(mxEvent.isControlDown(q)&&!c)?null:this.getCellAt(m+u.x*o,l+u.y*o);if(this.model.isAncestor(C,v)){C=null}var z=C;while(z!=null){if(this.isCellLocked(z)){C=null;break}z=this.model.getParent(z)}if(C!=null){var d=this.view.getState(v);var x=this.view.getState(C);if(d!=null&&x!=null&&mxUtils.intersects(d,x)){C=null}}var b=!mxEvent.isShiftDown(q)||c;if(b){if(B==mxConstants.DIRECTION_NORTH){u.y-=v.geometry.height/2}else{if(B==mxConstants.DIRECTION_SOUTH){u.y+=v.geometry.height/2}else{if(B==mxConstants.DIRECTION_WEST){u.x-=v.geometry.width/2}else{u.x+=v.geometry.width/2}}}}if(C!=null&&!this.isCellConnectable(C)){var j=this.getModel().getParent(C);if(this.getModel().isVertex(j)&&this.isCellConnectable(j)){C=j}}if(C==v||this.model.isEdge(C)||!this.isCellConnectable(C)){C=null}var k=[];this.model.beginUpdate();try{var p=C;if(p==null&&b){var r=v;var D=this.getCellGeometry(v);while(D!=null&&D.relative){r=this.getModel().getParent(r);D=this.getCellGeometry(r)}var f=this.view.getState(r);var w=(f!=null)?f.style:this.getCellStyle(r);if(mxUtils.getValue(w,"part",false)){var i=this.model.getParent(r);if(this.model.isVertex(i)){r=i}}p=this.duplicateCells([r],false)[0];var D=this.getCellGeometry(p);if(D!=null){D.x=u.x-D.width/2;D.y=u.y-D.height/2}}var y=null;if(this.layoutManager!=null){y=this.layoutManager.getLayout(this.model.getParent(v))}var g=((mxEvent.isControlDown(q)&&b)||(C==null&&y!=null&&y.constructor==mxStackLayout))?null:this.insertEdge(this.model.getParent(v),null,"",v,p,this.createCurrentEdgeStyle());if(g!=null&&this.connectionHandler.insertBeforeSource){var h=null;var A=v;while(A.parent!=null&&A.geometry!=null&&A.geometry.relative&&A.parent!=g.parent){A=this.model.getParent(A)}if(A!=null&&A.parent!=null&&A.parent==g.parent){var h=A.parent.getIndex(A);A.parent.insert(g,h)}}if(C==null&&p!=null&&y!=null&&v.parent!=null&&y.constructor==mxStackLayout&&B==mxConstants.DIRECTION_WEST){var h=v.parent.getIndex(v);v.parent.insert(p,h)}if(g!=null){k.push(g)}if(C==null&&p!=null){k.push(p)}if(p==null&&g!=null){g.geometry.setTerminalPoint(u,false)}if(g!=null){this.fireEvent(new mxEventObject("cellsInserted","cells",[g]))}}finally{this.model.endUpdate()}return k};Graph.prototype.getIndexableText=function(){var d=document.createElement("div");var e=[];var b="";for(var c in this.model.cells){var a=this.model.cells[c];if(this.model.isVertex(a)||this.model.isEdge(a)){if(this.isHtmlLabel(a)){d.innerHTML=this.getLabel(a);b=mxUtils.extractTextWithWhitespace([d])}else{b=this.getLabel(a)}b=mxUtils.trim(b.replace(/[\x00-\x1F\x7F-\x9F]|\s+/g," "));if(b.length>0){e.push(b)}}}return e.join(" ")};Graph.prototype.convertValueToString=function(b){if(b.value!=null&&typeof(b.value)=="object"){if(this.isReplacePlaceholders(b)&&b.getAttribute("placeholder")!=null){var c=b.getAttribute("placeholder");var d=b;var a=null;while(a==null&&d!=null){if(d.value!=null&&typeof(d.value)=="object"){a=(d.hasAttribute(c))?((d.getAttribute(c)!=null)?d.getAttribute(c):""):null}d=this.model.getParent(d)}return a||""}else{return b.value.getAttribute("label")}}return mxGraph.prototype.convertValueToString.apply(this,arguments)};Graph.prototype.getLinkForCell=function(a){if(a.value!=null&&typeof(a.value)=="object"){var b=a.value.getAttribute("link");if(b!=null&&b.toLowerCase().substring(0,11)==="javascript:"){b=b.substring(11)}return b}return null};Graph.prototype.getCellStyle=function(a){var c=mxGraph.prototype.getCellStyle.apply(this,arguments);if(a!=null&&this.layoutManager!=null){var b=this.model.getParent(a);if(this.model.isVertex(b)&&this.isCellCollapsed(a)){var d=this.layoutManager.getLayout(b);if(d!=null&&d.constructor==mxStackLayout){c[mxConstants.STYLE_HORIZONTAL]=!d.horizontal}}}return c};Graph.prototype.updateAlternateBounds=function(a,d,c){if(a!=null&&d!=null&&this.layoutManager!=null&&d.alternateBounds!=null){var b=this.layoutManager.getLayout(this.model.getParent(a));if(b!=null&&b.constructor==mxStackLayout){if(b.horizontal){d.alternateBounds.height=0}else{d.alternateBounds.width=0}}}mxGraph.prototype.updateAlternateBounds.apply(this,arguments)};Graph.prototype.isMoveCellsEvent=function(a){return mxEvent.isShiftDown(a)};Graph.prototype.foldCells=function(g,b,l,f,j){b=(b!=null)?b:false;if(l==null){l=this.getFoldableCells(this.getSelectionCells(),g)}if(l!=null){this.model.beginUpdate();try{mxGraph.prototype.foldCells.apply(this,arguments);if(this.layoutManager!=null){for(var d=0;d<l.length;d++){var a=this.view.getState(l[d]);var c=this.getCellGeometry(l[d]);if(a!=null&&c!=null){var m=Math.round(c.width-a.width/this.view.scale);var k=Math.round(c.height-a.height/this.view.scale);if(k!=0||m!=0){var h=this.model.getParent(l[d]);var e=this.layoutManager.getLayout(h);if(e==null){if(j!=null&&this.isMoveCellsEvent(j)){this.moveSiblings(a,h,m,k)}}else{if((j==null||!mxEvent.isAltDown(j))&&e.constructor==mxStackLayout&&!e.resizeLast){this.resizeParentStacks(h,e,m,k)}}}}}}}finally{this.model.endUpdate()}if(this.isEnabled()){this.setSelectionCells(l)}}};Graph.prototype.moveSiblings=function(g,f,b,a){this.model.beginUpdate();try{var c=this.getCellsBeyond(g.x,g.y,f,true,true);for(var e=0;e<c.length;e++){if(c[e]!=g.cell){var d=this.view.getState(c[e]);var h=this.getCellGeometry(c[e]);if(d!=null&&h!=null){h=h.clone();h.translate(Math.round(b*Math.max(0,Math.min(1,(d.x-g.x)/g.width))),Math.round(a*Math.max(0,Math.min(1,(d.y-g.y)/g.height))));this.model.setGeometry(c[e],h)}}}}finally{this.model.endUpdate()}};Graph.prototype.resizeParentStacks=function(e,f,c,a){if(this.layoutManager!=null&&f!=null&&f.constructor==mxStackLayout&&!f.resizeLast){this.model.beginUpdate();try{var d=f.horizontal;while(e!=null&&f!=null&&f.constructor==mxStackLayout&&f.horizontal==d&&!f.resizeLast){var b=this.getCellGeometry(e);var g=this.view.getState(e);if(g!=null&&b!=null){b=b.clone();if(f.horizontal){b.width+=c+Math.min(0,g.width/this.view.scale-b.width)}else{b.height+=a+Math.min(0,g.height/this.view.scale-b.height)}this.model.setGeometry(e,b)}e=this.model.getParent(e);f=this.layoutManager.getLayout(e)}}finally{this.model.endUpdate()}}};Graph.prototype.isContainer=function(a){var c=this.view.getState(a);var b=(c!=null)?c.style:this.getCellStyle(a);if(this.isSwimlane(a)){return b.container!="0"}else{return b.container=="1"}};Graph.prototype.isCellConnectable=function(a){var c=this.view.getState(a);var b=(c!=null)?c.style:this.getCellStyle(a);return(b.connectable!=null)?b.connectable!="0":mxGraph.prototype.isCellConnectable.apply(this,arguments)};Graph.prototype.selectAll=function(a){a=a||this.getDefaultParent();if(!this.isCellLocked(a)){mxGraph.prototype.selectAll.apply(this,arguments)}};Graph.prototype.selectCells=function(b,a,c){c=c||this.getDefaultParent();if(!this.isCellLocked(c)){mxGraph.prototype.selectCells.apply(this,arguments)}};Graph.prototype.getSwimlaneAt=function(a,c,b){b=b||this.getDefaultParent();if(!this.isCellLocked(b)){return mxGraph.prototype.getSwimlaneAt.apply(this,arguments)}return null};Graph.prototype.isCellFoldable=function(a){var c=this.view.getState(a);var b=(c!=null)?c.style:this.getCellStyle(a);return this.foldingEnabled&&!this.isCellLocked(a)&&((this.isContainer(a)&&b.collapsible!="0")||(!this.isContainer(a)&&b.collapsible=="1"))};Graph.prototype.reset=function(){if(this.isEditing()){this.stopEditing(true)}this.escape();if(!this.isSelectionEmpty()){this.clearSelection()}};Graph.prototype.zoom=function(b,a){b=Math.max(0.01,Math.min(this.view.scale*b,160))/this.view.scale;mxGraph.prototype.zoom.apply(this,arguments)};Graph.prototype.zoomIn=function(){if(this.view.scale<0.15){this.zoom((this.view.scale+0.01)/this.view.scale)}else{this.zoom((Math.round(this.view.scale*this.zoomFactor*20)/20)/this.view.scale)}};Graph.prototype.zoomOut=function(){if(this.view.scale<=0.15){this.zoom((this.view.scale-0.01)/this.view.scale)}else{this.zoom((Math.round(this.view.scale*(1/this.zoomFactor)*20)/20)/this.view.scale)}};Graph.prototype.getTooltipForCell=function(a){var f="";if(mxUtils.isNode(a.value)){var e=a.value.getAttribute("tooltip");if(e!=null){if(e!=null&&this.isReplacePlaceholders(a)){e=this.replacePlaceholders(a,e)}f=this.sanitizeHtml(e)}else{var b=["label","tooltip","placeholders","placeholder"];var c=a.value.attributes;if(this.isEnabled()){b.push("link")}for(var d=0;d<c.length;d++){if(mxUtils.indexOf(b,c[d].nodeName)<0&&c[d].nodeValue.length>0){f+=((c[d].nodeName!="link")?c[d].nodeName+":":"")+mxUtils.htmlEntities(c[d].nodeValue)+"\n"}}if(f.length>0){f=f.substring(0,f.length-1)}}}return f};Graph.prototype.stringToBytes=function(c){var a=new Array(c.length);for(var b=0;b<c.length;b++){a[b]=c.charCodeAt(b)}return a};Graph.prototype.bytesToString=function(b){var a=new Array(b.length);for(var c=0;c<b.length;c++){a[c]=String.fromCharCode(b[c])}return a.join("")};Graph.prototype.compress=function(b){if(b==null||b.length==0||typeof(pako)==="undefined"){return b}else{var a=this.bytesToString(pako.deflateRaw(encodeURIComponent(b)));return(window.btoa)?btoa(a):Base64.encode(a,true)}};Graph.prototype.decompress=function(b){if(b==null||b.length==0||typeof(pako)==="undefined"){return b}else{var a=(window.atob)?atob(b):Base64.decode(b,true);return this.zapGremlins(decodeURIComponent(this.bytesToString(pako.inflateRaw(a))))}};Graph.prototype.zapGremlins=function(d){var c=[];for(var a=0;a<d.length;a++){var b=d.charCodeAt(a);if(b>=32||b==9||b==10||b==13){c.push(d.charAt(a))}}return c.join("")};HoverIcons=function(a){this.graph=a;this.init()};HoverIcons.prototype.arrowSpacing=6;HoverIcons.prototype.updateDelay=500;HoverIcons.prototype.activationDelay=140;HoverIcons.prototype.currentState=null;HoverIcons.prototype.activeArrow=null;HoverIcons.prototype.inactiveOpacity=15;HoverIcons.prototype.checkCollisions=true;HoverIcons.prototype.triangleUp=new mxImage((mxClient.IS_SVG)?"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABoAAAAOCAYAAAAxDQxDAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYwIDYxLjEzNDc3NywgMjAxMC8wMi8xMi0xNzozMjowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNSBNYWNpbnRvc2giIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6N0ZBN0E3M0U5NjZGMTFFNTg5NTRDNzQwMTgwNDlEQzQiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6N0ZBN0E3M0Y5NjZGMTFFNTg5NTRDNzQwMTgwNDlEQzQiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDo3RkE3QTczQzk2NkYxMUU1ODk1NEM3NDAxODA0OURDNCIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDo3RkE3QTczRDk2NkYxMUU1ODk1NEM3NDAxODA0OURDNCIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/Pj625P8AAACySURBVHjaYmRY956BROABxF+A+AgpmpjIsGQjEO8CYidaWeQHtYQNiDmBeAspljGRYMlqqCUwALPMg1oWhWCxBNmyjVCHUGQRyJKlOCyBATaoQ/zItSgciFcQsATdshBSLYqC+oSZhMTCBnVYFLEWgRQuItESGGCG6o0iZFECBZagW5aAyyKQxBwKLUG2bD4Qp6FblAyVoIYlyGAmzDIWKGMmA+0AyGw2RjIKVbIAQIABAFJRHSSk2rPoAAAAAElFTkSuQmCC":IMAGE_PATH+"/triangle-up.png",26,14);HoverIcons.prototype.triangleRight=new mxImage((mxClient.IS_SVG)?"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA4AAAAaCAYAAACHD21cAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYwIDYxLjEzNDc3NywgMjAxMC8wMi8xMi0xNzozMjowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNSBNYWNpbnRvc2giIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6NThDQzc5RTU5NjZGMTFFNTg5NTRDNzQwMTgwNDlEQzQiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6NThDQzc5RTY5NjZGMTFFNTg5NTRDNzQwMTgwNDlEQzQiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDo1OENDNzlFMzk2NkYxMUU1ODk1NEM3NDAxODA0OURDNCIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDo1OENDNzlFNDk2NkYxMUU1ODk1NEM3NDAxODA0OURDNCIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PrHdKTUAAADDSURBVHjanNTBCgFRFIfxMeTZyEKkiBSRxbwREZGiNFZKWSnvY6OUUv6n7ilZaL459XVXv6a5c+cWovQeaSZqFoGJwzpVozzQZq4GeSDCv7AYcJ9Cx0vVpdDxWrUpdLxVLQr/4jjDBpYDblDoeKdqFDpOHRP4jSsU2rzVg8KnqqpbDFFdXck7vlRTXciuOjqT72ioo07k5Nju9dSRnFVHB/J3GBqqPf0fx2pDbwBDK3Ln2MdN1CLraSiFNcn6JJ+PAAMAbnMl1tyDPD8AAAAASUVORK5CYII=":IMAGE_PATH+"/triangle-right.png",14,26);HoverIcons.prototype.triangleDown=new mxImage((mxClient.IS_SVG)?"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABoAAAAOCAYAAAAxDQxDAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYwIDYxLjEzNDc3NywgMjAxMC8wMi8xMi0xNzozMjowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNSBNYWNpbnRvc2giIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6NThDQzc5RTk5NjZGMTFFNTg5NTRDNzQwMTgwNDlEQzQiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6NThDQzc5RUE5NjZGMTFFNTg5NTRDNzQwMTgwNDlEQzQiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDo1OENDNzlFNzk2NkYxMUU1ODk1NEM3NDAxODA0OURDNCIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDo1OENDNzlFODk2NkYxMUU1ODk1NEM3NDAxODA0OURDNCIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/Pv9xyy0AAADESURBVHjaYmRY956BHoAJiHOA+D+NcRrIoilAnEVDz6QD8SwWKGc6EP8F4plUtiQRiBfAgg4GZkEl/lLBgr/IlqBbxACViKPQMgxLQIAFi8JlUHoREDOTYUkckhkMuHyEbFkEEP8i0ZJobJbgswgE1gBxKJGW/YI6bCW+fIQPbCLCsl9Qn6whlGEZiLDMH4i/47AklJAlxFoEAjuA2AfNMpglm4gtgogF+5As+wX15SZiNbOQmHxBlrkBMQ/Ul0QDgAADAC8qRII7g4RyAAAAAElFTkSuQmCC":IMAGE_PATH+"/triangle-down.png",26,14);HoverIcons.prototype.triangleLeft=new mxImage((mxClient.IS_SVG)?"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA4AAAAaCAYAAACHD21cAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYwIDYxLjEzNDc3NywgMjAxMC8wMi8xMi0xNzozMjowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNSBNYWNpbnRvc2giIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6N0ZBN0E3M0E5NjZGMTFFNTg5NTRDNzQwMTgwNDlEQzQiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6N0ZBN0E3M0I5NjZGMTFFNTg5NTRDNzQwMTgwNDlEQzQiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDo1OENDNzlFQjk2NkYxMUU1ODk1NEM3NDAxODA0OURDNCIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDo1OENDNzlFQzk2NkYxMUU1ODk1NEM3NDAxODA0OURDNCIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/Pi1fu2cAAADXSURBVHjalNTRB8JQFMfxVROxPyl6iuipRJFS2kv/TU89lY0piyw9pP6r3iP6He7Ndd3de87haxMfd+1ua0TVOxLOCuVNIdqiHZ1I4AbtUUsC6fIO6jzhwoWB/hOCU5Tpy+PCCTq5kA+OfKgODlGJ2r7/YMMBqkLIhn0uMmEP3VGH+zQQ7KKnBGmY+O6eD77QGH2kkOYhxeZdJTzjYnsfb2jOwbHjt6s6ltJHTmNa+SuFNBe0rMOh9/GM1i7M+QIUKLVxzNy2XB0zyYomTqUr6jnqLfoJMADoxSMHt6pxsAAAAABJRU5ErkJggg==":IMAGE_PATH+"/triangle-left.png",14,26);HoverIcons.prototype.roundDrop=new mxImage((mxClient.IS_SVG)?"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABoAAAAaCAYAAACpSkzOAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYwIDYxLjEzNDc3NywgMjAxMC8wMi8xMi0xNzozMjowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNSBNYWNpbnRvc2giIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6RTgxRjYzRTU1MDRFMTFFNEExQ0VFNDQwNDhGNzg2RDkiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6RTgxRjYzRTY1MDRFMTFFNEExQ0VFNDQwNDhGNzg2RDkiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDpFODFGNjNFMzUwNEUxMUU0QTFDRUU0NDA0OEY3ODZEOSIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDpFODFGNjNFNDUwNEUxMUU0QTFDRUU0NDA0OEY3ODZEOSIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PuJ657wAAAE0SURBVHjaYvz//z8DPQATA50AC4zBuP4DLjXaQOwMxJZArAfE8lDxh0B8CYiPA/FeIL6KTfP/QAFUi7AABSBOAOJoIFbBIq8FxRFAfAeIlwLxAiB+gNdHaMABiIuB2IfIkAE5pB6IjYG4F4gPEBNHIEtaSLAEGfhA9ToQskgB6hNrCuLdGmqGAj6LEsj0CTafJeCySBsa8dQC0VAzMSxyxpG6yAUqUDMxLLKkQT61xGaRHg0s0sNmkTwNLJKne1mHbNFDGpj/EJtFl2hg0SVsFh2ngUXHsVm0F1oKUwvcgZqJYdFVaFFPLbAUuY5CT3Wg+mQLFSzZAjULZ6H6AFqfHKXAkqNQMx4Qqo9AlVYNmT7bAtV7gNga9gDURWfxVOXoEY+3KmeENbdo3ThhHHbtOoAAAwDmEETshQ0fBAAAAABJRU5ErkJggg==":IMAGE_PATH+"/round-drop.png",26,26);HoverIcons.prototype.refreshTarget=new mxImage((mxClient.IS_SVG)?"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACYAAAAmCAYAAACoPemuAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYwIDYxLjEzNDc3NywgMjAxMC8wMi8xMi0xNzozMjowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNSBNYWNpbnRvc2giIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6NDQxNERDRTU1QjY1MTFFNDkzNTRFQTVEMTdGMTdBQjciIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6NDQxNERDRTY1QjY1MTFFNDkzNTRFQTVEMTdGMTdBQjciPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDo0NDE0RENFMzVCNjUxMUU0OTM1NEVBNUQxN0YxN0FCNyIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDo0NDE0RENFNDVCNjUxMUU0OTM1NEVBNUQxN0YxN0FCNyIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PsvuX50AAANaSURBVHja7FjRZ1tRGD9ZJ1NCyIQSwrivI4Q8hCpjlFDyFEoYfSp9Ko1QWnmo0If+BSXkIfo0QirTMUpeGo2EPfWllFYjZMLKLDJn53d3biU337m5J223bPbxk5t7v+/c3/2+73znO8fDOWezKM/YjMpz68Lj8ejY+QTeCCwLxOS9qPxtyN+6wAeBTwJ31CCO0cJDjXBGBN4LfIepSwykTUT1bgpuib0SONIgo8KRHOtRiCFcvUcgZeGrHPNBxLIyFPyRgTGz0xLbegJCdmzpElue5KlAIMDX19d5uVzm5+fnfDAYmMA17uEZdOx2Yvb/sHlu2S0xwymn5ufneTab5b1ej08S6EAXNrDd2dnhiUTim21MvMtwQ6yiIrWwsMDPzs64rsBmf3/fvM7n89TYlUnEllSkQqEQv7q64g+Vk5MTVXosORErU0Zer5f0FEIlw2N6MxwO82QyaXql2+2SxDqdjopYWUUsqEp45IldqtWq6UWVh/1+P7+8vCTJ4QMUJSRIEXuneoH96w8PDyeWAnhSJfCqwm6NIlaklFdXV0cGhRcQ2mlJQXK5nMq2YPEZbnteU1U2lUqN/D84OGD9fl+5fgnSrFarsUwmw0qlEru4uBjTicViTk3Cr27HSnxR+Doyz0ZE1CAWiUTusbu7y9rttlZv5fP5WDQavYfIMba4uEipfhF8XtqJoZXx/uH+sC/4vPg7OljZZQbsCmLtYzc3N6zRaJhotVrmfx0xDINtbm6athYUeXpHdbBNaqZUKpWxWXV7e2vex+xaWVnhc3NzjrPUXgexyCt0m67LBV7uJMITjqRE4o8tZeg8FPpFitgapYxiOC0poFgsji1jKNo6BZZckrAGUtJsNk1vqAihCBcKhTE7hNWhqw2qFnGy5UFOUYJVIJ1OjzSE+BCEilon0URavRmBqnbbQ00AXbm+vnZc9O1tj72OnQoc2+cwygRkb2+P1et17ZoEm3g87lRmjgWZ00kbXkNuse6/Bu2wlegIxfb2tuvWGroO4bO2c4bbzUh60mxDXm1sbJhhxkQYnhS4h2fUZoRAWnf7lv8N27f8P7Xhnekjgpk+VKGOoQbsiY+hhhtF3YO7twIJ+ULvUGv+GQ2fQEvWxI/THNx5/p/BaspPAQYAqStgiSQwCDoAAAAASUVORK5CYII=":IMAGE_PATH+"/refresh.png",38,38);HoverIcons.prototype.init=function(){this.arrowUp=this.createArrow(this.triangleUp,mxResources.get("plusTooltip"));this.arrowRight=this.createArrow(this.triangleRight,mxResources.get("plusTooltip"));this.arrowDown=this.createArrow(this.triangleDown,mxResources.get("plusTooltip"));this.arrowLeft=this.createArrow(this.triangleLeft,mxResources.get("plusTooltip"));this.elts=[this.arrowUp,this.arrowRight,this.arrowDown,this.arrowLeft];this.repaintHandler=mxUtils.bind(this,function(){this.repaint()});this.graph.selectionModel.addListener(mxEvent.CHANGE,this.repaintHandler);this.graph.model.addListener(mxEvent.CHANGE,this.repaintHandler);this.graph.view.addListener(mxEvent.SCALE_AND_TRANSLATE,this.repaintHandler);this.graph.view.addListener(mxEvent.TRANSLATE,this.repaintHandler);this.graph.view.addListener(mxEvent.SCALE,this.repaintHandler);this.graph.view.addListener(mxEvent.DOWN,this.repaintHandler);this.graph.view.addListener(mxEvent.UP,this.repaintHandler);this.graph.addListener(mxEvent.ROOT,this.repaintHandler);this.graph.addListener(mxEvent.ESCAPE,mxUtils.bind(this,function(){this.mouseDownPoint=null}));mxEvent.addListener(this.graph.container,"mouseleave",mxUtils.bind(this,function(c){if(c.relatedTarget!=null&&mxEvent.getSource(c)==this.graph.container){this.setDisplay("none")}}));var b=this.graph.click;this.graph.click=mxUtils.bind(this,function(c){b.apply(this.graph,arguments);if(this.currentState!=null&&!this.graph.isCellSelected(this.currentState.cell)&&mxEvent.isTouchEvent(c.getEvent())&&!this.graph.model.isVertex(c.getCell())){this.reset()}});var a=false;this.graph.addMouseListener({mouseDown:mxUtils.bind(this,function(d,e){a=false;var c=e.getEvent();if(this.isResetEvent(c)){this.reset()}else{if(!this.isActive()){var f=this.getState(e.getState());if(f!=null||!mxEvent.isTouchEvent(c)){this.update(f)}}}this.setDisplay("none")}),mouseMove:mxUtils.bind(this,function(d,e){var c=e.getEvent();if(this.isResetEvent(c)){this.reset()}else{if(!this.graph.isMouseDown&&!mxEvent.isTouchEvent(c)){this.update(this.getState(e.getState()),e.getGraphX(),e.getGraphY())}}if(this.graph.connectionHandler!=null&&this.graph.connectionHandler.shape!=null){a=true}}),mouseUp:mxUtils.bind(this,function(d,e){var c=e.getEvent();if(this.isResetEvent(c)){this.reset()}else{if(this.isActive()&&this.mouseDownPoint!=null&&Math.abs(e.getGraphX()-this.mouseDownPoint.x)<this.graph.tolerance&&Math.abs(e.getGraphY()-this.mouseDownPoint.y)<this.graph.tolerance){if(!a){this.click(this.currentState,this.getDirection(),e)}}else{if(this.isActive()){if(this.graph.getSelectionCount()!=1||!this.graph.model.isEdge(this.graph.getSelectionCell())){this.update(this.getState(this.graph.view.getState(this.graph.getCellAt(e.getGraphX(),e.getGraphY()))))}else{this.reset()}}else{if(mxEvent.isTouchEvent(c)||(this.bbox!=null&&mxUtils.contains(this.bbox,e.getGraphX(),e.getGraphY()))){this.setDisplay("");this.repaint()}else{if(!mxEvent.isTouchEvent(c)){this.reset()}}}}}a=false;this.resetActiveArrow()})})};HoverIcons.prototype.isResetEvent=function(a,b){return mxEvent.isAltDown(a)||(this.activeArrow==null&&mxEvent.isShiftDown(a))||mxEvent.isMetaDown(a)||(mxEvent.isPopupTrigger(a)&&!mxEvent.isControlDown(a))};HoverIcons.prototype.createArrow=function(a,c){var b=null;if(mxClient.IS_IE&&!mxClient.IS_SVG){if(mxClient.IS_IE6&&document.compatMode!="CSS1Compat"){b=document.createElement(mxClient.VML_PREFIX+":image");b.setAttribute("src",a.src);b.style.borderStyle="none"}else{b=document.createElement("div");b.style.backgroundImage="url("+a.src+")";b.style.backgroundPosition="center";b.style.backgroundRepeat="no-repeat"}b.style.width=(a.width+4)+"px";b.style.height=(a.height+4)+"px";b.style.display=(mxClient.IS_QUIRKS)?"inline":"inline-block"}else{b=mxUtils.createImage(a.src);b.style.width=a.width+"px";b.style.height=a.height+"px"}if(c!=null){b.setAttribute("title",c)}b.style.position="absolute";b.style.cursor="crosshair";mxEvent.addGestureListeners(b,mxUtils.bind(this,function(d){if(this.currentState!=null&&!this.isResetEvent(d)){this.mouseDownPoint=mxUtils.convertPoint(this.graph.container,mxEvent.getClientX(d),mxEvent.getClientY(d));this.drag(d,this.mouseDownPoint.x,this.mouseDownPoint.y);this.activeArrow=b;this.setDisplay("none");mxEvent.consume(d)}}));mxEvent.redirectMouseEvents(b,this.graph,this.currentState);mxEvent.addListener(b,"mouseenter",mxUtils.bind(this,function(d){if(mxEvent.isMouseEvent(d)){if(this.activeArrow!=null&&this.activeArrow!=b){mxUtils.setOpacity(this.activeArrow,this.inactiveOpacity)}this.graph.connectionHandler.constraintHandler.reset();mxUtils.setOpacity(b,100);this.activeArrow=b}}));mxEvent.addListener(b,"mouseleave",mxUtils.bind(this,function(d){if(!this.graph.isMouseDown){this.resetActiveArrow()}}));return b};HoverIcons.prototype.resetActiveArrow=function(){if(this.activeArrow!=null){mxUtils.setOpacity(this.activeArrow,this.inactiveOpacity);this.activeArrow=null}};HoverIcons.prototype.getDirection=function(){var a=mxConstants.DIRECTION_EAST;if(this.activeArrow==this.arrowUp){a=mxConstants.DIRECTION_NORTH}else{if(this.activeArrow==this.arrowDown){a=mxConstants.DIRECTION_SOUTH}else{if(this.activeArrow==this.arrowLeft){a=mxConstants.DIRECTION_WEST}}}return a};HoverIcons.prototype.visitNodes=function(b){for(var a=0;a<this.elts.length;a++){if(this.elts[a]!=null){b(this.elts[a])}}};HoverIcons.prototype.removeNodes=function(){this.visitNodes(function(a){if(a.parentNode!=null){a.parentNode.removeChild(a)}})};HoverIcons.prototype.setDisplay=function(a){this.visitNodes(function(b){b.style.display=a})};HoverIcons.prototype.isActive=function(){return this.activeArrow!=null&&this.currentState!=null};HoverIcons.prototype.drag=function(b,a,d){this.graph.popupMenuHandler.hideMenu();this.graph.stopEditing(false);if(this.currentState!=null){this.graph.connectionHandler.start(this.currentState,a,d);this.graph.isMouseTrigger=mxEvent.isMouseEvent(b);this.graph.isMouseDown=true;var c=this.graph.selectionCellsHandler.getHandler(this.currentState.cell);if(c!=null){c.setHandlesVisible(false)}}};HoverIcons.prototype.click=function(g,d,f){var b=f.getEvent();var a=f.getGraphX();var h=f.getGraphY();var e=this.graph.view.getState(this.graph.getCellAt(a,h));if(e!=null&&this.graph.model.isEdge(e.cell)&&!mxEvent.isControlDown(b)&&(e.getVisibleTerminalState(true)==g||e.getVisibleTerminalState(false)==g)){this.graph.setSelectionCell(e.cell);this.reset()}else{if(g!=null){var c=this.graph.connectVertex(g.cell,d,this.graph.defaultEdgeLength,b);this.graph.selectCellsForConnectVertex(c,b,this);if(c.length==2&&this.graph.model.isVertex(c[1])){this.graph.setSelectionCell(c[1]);if(mxEvent.isTouchEvent(b)){this.update(this.getState(this.graph.view.getState(c[1])))}else{this.reset()}this.graph.scrollCellToVisible(c[1])}else{this.graph.setSelectionCells(c)}}}f.consume()};HoverIcons.prototype.reset=function(a){a=(a==null)?true:a;if(a&&this.updateThread!=null){window.clearTimeout(this.updateThread)}this.mouseDownPoint=null;this.currentState=null;this.activeArrow=null;this.removeNodes();this.bbox=null};HoverIcons.prototype.repaint=function(){this.bbox=null;if(this.currentState!=null){this.currentState=this.getState(this.currentState);if(this.currentState!=null&&this.graph.model.isVertex(this.currentState.cell)&&this.graph.isCellConnectable(this.currentState.cell)){var a=mxRectangle.fromRectangle(this.currentState);if(this.currentState.shape!=null&&this.currentState.shape.boundingBox!=null){a=mxRectangle.fromRectangle(this.currentState.shape.boundingBox)}a.grow(this.graph.tolerance);a.grow(this.arrowSpacing);var d=this.graph.selectionCellsHandler.getHandler(this.currentState.cell);if(d!=null){a.x-=d.horizontalOffset/2;a.y-=d.verticalOffset/2;a.width+=d.horizontalOffset;a.height+=d.verticalOffset;if(d.rotationShape!=null&&d.rotationShape.node!=null&&d.rotationShape.node.style.visibility!="hidden"&&d.rotationShape.node.style.display!="none"&&d.rotationShape.boundingBox!=null){a.add(d.rotationShape.boundingBox)}}this.arrowUp.style.left=Math.round(this.currentState.getCenterX()-this.triangleUp.width/2)+"px";this.arrowUp.style.top=Math.round(a.y-this.triangleUp.height)+"px";mxUtils.setOpacity(this.arrowUp,this.inactiveOpacity);this.arrowRight.style.left=Math.round(a.x+a.width)+"px";this.arrowRight.style.top=Math.round(this.currentState.getCenterY()-this.triangleRight.height/2)+"px";mxUtils.setOpacity(this.arrowRight,this.inactiveOpacity);this.arrowDown.style.left=this.arrowUp.style.left;this.arrowDown.style.top=Math.round(a.y+a.height)+"px";mxUtils.setOpacity(this.arrowDown,this.inactiveOpacity);this.arrowLeft.style.left=Math.round(a.x-this.triangleLeft.width)+"px";this.arrowLeft.style.top=this.arrowRight.style.top;mxUtils.setOpacity(this.arrowLeft,this.inactiveOpacity);if(this.checkCollisions){var c=this.graph.getCellAt(a.x+a.width+this.triangleRight.width/2,this.currentState.getCenterY());var f=this.graph.getCellAt(a.x-this.triangleLeft.width/2,this.currentState.getCenterY());var e=this.graph.getCellAt(this.currentState.getCenterX(),a.y-this.triangleUp.height/2);var b=this.graph.getCellAt(this.currentState.getCenterX(),a.y+a.height+this.triangleDown.height/2);if(c!=null&&c==f&&f==e&&e==b){c=null;f=null;e=null;b=null}if(c!=null&&!this.graph.model.isAncestor(c,this.currentState.cell)){this.arrowRight.style.visibility="hidden"}else{this.arrowRight.style.visibility="visible"}if(f!=null&&!this.graph.model.isAncestor(f,this.currentState.cell)){this.arrowLeft.style.visibility="hidden"}else{this.arrowLeft.style.visibility="visible"}if(e!=null&&!this.graph.model.isAncestor(e,this.currentState.cell)){this.arrowUp.style.visibility="hidden"}else{this.arrowUp.style.visibility="visible"}if(b!=null&&!this.graph.model.isAncestor(b,this.currentState.cell)){this.arrowDown.style.visibility="hidden"}else{this.arrowDown.style.visibility="visible"}}else{this.arrowLeft.style.visibility="visible";this.arrowRight.style.visibility="visible";this.arrowUp.style.visibility="visible";this.arrowDown.style.visibility="visible"}if(this.graph.tooltipHandler.isEnabled()){this.arrowLeft.setAttribute("title",mxResources.get("plusTooltip"));this.arrowRight.setAttribute("title",mxResources.get("plusTooltip"));this.arrowUp.setAttribute("title",mxResources.get("plusTooltip"));this.arrowDown.setAttribute("title",mxResources.get("plusTooltip"))}else{this.arrowLeft.removeAttribute("title");this.arrowRight.removeAttribute("title");this.arrowUp.removeAttribute("title");this.arrowDown.removeAttribute("title")}}else{this.reset()}if(this.currentState!=null){this.bbox=this.computeBoundingBox();if(this.bbox!=null){this.bbox.grow(10)}}}};HoverIcons.prototype.computeBoundingBox=function(){var a=(!this.graph.model.isEdge(this.currentState.cell))?mxRectangle.fromRectangle(this.currentState):null;this.visitNodes(function(b){if(b.parentNode!=null){var c=new mxRectangle(b.offsetLeft,b.offsetTop,b.offsetWidth,b.offsetHeight);if(a==null){a=c}else{a.add(c)}}});return a};HoverIcons.prototype.getState=function(c){if(c!=null){var a=c.cell;if(this.graph.getModel().isVertex(a)&&!this.graph.isCellConnectable(a)){var b=this.graph.getModel().getParent(a);if(this.graph.getModel().isVertex(b)&&this.graph.isCellConnectable(b)){a=b}}if(this.graph.isCellLocked(a)||this.graph.model.isEdge(a)){a=null}c=this.graph.view.getState(a)}return c};HoverIcons.prototype.update=function(c,a,d){if(!this.graph.connectionArrowsEnabled){this.reset()}else{var b=null;if(this.prev!=c||this.isActive()){this.startTime=new Date().getTime();this.prev=c;b=0;if(this.updateThread!=null){window.clearTimeout(this.updateThread)}if(c!=null){this.updateThread=window.setTimeout(mxUtils.bind(this,function(){if(!this.isActive()&&!this.graph.isMouseDown&&!this.graph.panningHandler.isActive()){this.prev=c;this.update(c,a,d)}}),this.updateDelay+10)}}else{if(this.startTime!=null){b=new Date().getTime()-this.startTime}}this.setDisplay("");if(this.currentState!=null&&this.currentState!=c&&b<this.activationDelay&&this.bbox!=null&&!mxUtils.contains(this.bbox,a,d)){this.reset(false)}else{if(this.currentState!=null||b>this.activationDelay){if(this.currentState!=c&&((b>this.updateDelay&&c!=null)||this.bbox==null||a==null||d==null||!mxUtils.contains(this.bbox,a,d))){if(c!=null&&this.graph.isEnabled()){this.removeNodes();this.setCurrentState(c);this.repaint();if(this.graph.connectionHandler.constraintHandler.currentFocus!=c){this.graph.connectionHandler.constraintHandler.reset()}}else{this.reset()}}}}}};HoverIcons.prototype.setCurrentState=function(a){if(a.style.portConstraint!="eastwest"){this.graph.container.appendChild(this.arrowUp);this.graph.container.appendChild(this.arrowDown)}this.graph.container.appendChild(this.arrowRight);this.graph.container.appendChild(this.arrowLeft);this.currentState=a};(function(){var a=mxGraphView.prototype.updateFloatingTerminalPoint;mxGraphView.prototype.updateFloatingTerminalPoint=function(k,j,g,p){if(j!=null&&k!=null&&(j.style.snapToPoint=="1"||k.style.snapToPoint=="1")){j=this.getTerminalPort(k,j,p);var m=this.getNextPoint(k,g,p);var t=this.graph.isOrthogonal(k);var h=mxUtils.toRadians(Number(j.style[mxConstants.STYLE_ROTATION]||"0"));var v=new mxPoint(j.getCenterX(),j.getCenterY());if(h!=0){var e=Math.cos(-h);var d=Math.sin(-h);m=mxUtils.getRotatedPoint(m,e,d,v)}var q=parseFloat(k.style[mxConstants.STYLE_PERIMETER_SPACING]||0);q+=parseFloat(k.style[(p)?mxConstants.STYLE_SOURCE_PERIMETER_SPACING:mxConstants.STYLE_TARGET_PERIMETER_SPACING]||0);var n=this.getPerimeterPoint(j,m,h==0&&t,q);if(h!=0){var e=Math.cos(h);var d=Math.sin(h);n=mxUtils.getRotatedPoint(n,e,d,v)}if(j!=null){var r=this.graph.getAllConnectionConstraints(j);var f=null;var o=null;for(var s=0;s<r.length;s++){var l=this.graph.getConnectionPoint(j,r[s]);if(l!=null){var u=(l.x-n.x)*(l.x-n.x)+(l.y-n.y)*(l.y-n.y);if(o==null||u<o){f=l;o=u}}}if(f!=null){n=f}}k.setAbsoluteTerminalPoint(n,p)}else{a.apply(this,arguments)}};var c=mxStencil.prototype.evaluateTextAttribute;mxStencil.prototype.evaluateTextAttribute=function(h,g,f){var d=c.apply(this,arguments);var e=h.getAttribute("placeholders");if(e=="1"&&f.state!=null){d=f.state.view.graph.replacePlaceholders(f.state.cell,d)}return d};var b=mxCellRenderer.prototype.createShape;mxCellRenderer.prototype.createShape=function(g){if(g.style!=null&&typeof(pako)!=="undefined"){var d=mxUtils.getValue(g.style,mxConstants.STYLE_SHAPE,null);if(d!=null&&d.substring(0,8)=="stencil("){try{var f=d.substring(8,d.length-1);var i=mxUtils.parseXml(g.view.graph.decompress(f));return new mxShape(new mxStencil(i.documentElement))}catch(h){if(window.console!=null){console.log("Error in shape: "+h)}}}}return b.apply(this,arguments)}})();mxStencilRegistry.libraries={};mxStencilRegistry.dynamicLoading=true;mxStencilRegistry.packages=[];mxStencilRegistry.getStencil=function(name){var result=mxStencilRegistry.stencils[name];if(result==null&&mxCellRenderer.prototype.defaultShapes[name]==null&&mxStencilRegistry.dynamicLoading){var basename=mxStencilRegistry.getBasenameForStencil(name);if(basename!=null){var libs=mxStencilRegistry.libraries[basename];if(libs!=null){if(mxStencilRegistry.packages[basename]==null){mxStencilRegistry.packages[basename]=1;for(var i=0;i<libs.length;i++){var fname=libs[i];if(fname.toLowerCase().substring(fname.length-4,fname.length)==".xml"){mxStencilRegistry.loadStencilSet(fname,null)}else{if(fname.toLowerCase().substring(fname.length-3,fname.length)==".js"){try{var req=mxUtils.load(fname);if(req!=null&&req.getStatus()>=200&&req.getStatus()<=299){eval.call(window,req.getText())}}catch(e){if(window.console!=null){console.log("error in getStencil:",fname,e)}}}else{}}}}}else{basename=basename.replace("_-_","_");mxStencilRegistry.loadStencilSet(STENCIL_PATH+"/"+basename+".xml",null)}result=mxStencilRegistry.stencils[name]}}return result};mxStencilRegistry.getBasenameForStencil=function(a){var c=null;if(a!=null){var d=a.split(".");if(d.length>0&&d[0]=="mxgraph"){c=d[1];for(var b=2;b<d.length-1;b++){c+="/"+d[b]}}}return c};mxStencilRegistry.loadStencilSet=function(a,c,h,b){h=(h!=null)?h:false;var g=mxStencilRegistry.packages[a];if(h||g==null){var f=false;if(g==null){try{if(b){var d=mxUtils.get(a,mxUtils.bind(this,function(e){if(e.getStatus()>=200&&e.getStatus()<=299){g=e.getXml();mxStencilRegistry.packages[a]=g;f=true;if(g!=null&&g.documentElement!=null){mxStencilRegistry.parseStencilSet(g.documentElement,c,f)}}}));return}else{var d=mxUtils.load(a);g=d.getXml();mxStencilRegistry.packages[a]=g;f=true}}catch(i){if(window.console!=null){console.log("error in loadStencilSet:",a,i)}}}if(g!=null&&g.documentElement!=null){mxStencilRegistry.parseStencilSet(g.documentElement,c,f)}}};mxStencilRegistry.parseStencilSets=function(b){for(var a=0;a<b.length;a++){mxStencilRegistry.parseStencilSet(mxUtils.parseXml(b[a]).documentElement)}};mxStencilRegistry.parseStencilSet=function(j,e,d){if(j.nodeName=="stencils"){var c=j.firstChild;while(c!=null){if(c.nodeName=="shapes"){mxStencilRegistry.parseStencilSet(c,e,d)}c=c.nextSibling}}else{d=(d!=null)?d:true;var i=j.firstChild;var a="";var b=j.getAttribute("name");if(b!=null){a=b+"."}while(i!=null){if(i.nodeType==mxConstants.NODETYPE_ELEMENT){b=i.getAttribute("name");if(b!=null){a=a.toLowerCase();var f=b.replace(/ /g,"_");if(d){mxStencilRegistry.addStencil(a+f.toLowerCase(),new mxStencil(i))}if(e!=null){var k=i.getAttribute("w");var g=i.getAttribute("h");k=(k==null)?80:parseInt(k,10);g=(g==null)?80:parseInt(g,10);e(a,f,b,k,g)}}}i=i.nextSibling}}};if(typeof mxVertexHandler!="undefined"){(function(){mxConstants.HANDLE_FILLCOLOR="#99ccff";mxConstants.HANDLE_STROKECOLOR="#0088cf";mxConstants.VERTEX_SELECTION_COLOR="#00a8ff";mxConstants.OUTLINE_COLOR="#00a8ff";mxConstants.OUTLINE_HANDLE_FILLCOLOR="#99ccff";mxConstants.OUTLINE_HANDLE_STROKECOLOR="#00a8ff";mxConstants.CONNECT_HANDLE_FILLCOLOR="#cee7ff";mxConstants.EDGE_SELECTION_COLOR="#00a8ff";mxConstants.DEFAULT_VALID_COLOR="#00a8ff";mxConstants.LABEL_HANDLE_FILLCOLOR="#cee7ff";mxConstants.GUIDE_COLOR="#0088cf";mxConstants.HIGHLIGHT_OPACITY=30;mxConstants.HIGHLIGHT_SIZE=8;mxEdgeHandler.prototype.snapToTerminals=true;mxGraphHandler.prototype.guidesEnabled=true;mxGuide.prototype.isEnabledForEvent=function(I){return !mxEvent.isAltDown(I)};var b=mxConnectionHandler.prototype.isCreateTarget;mxConnectionHandler.prototype.isCreateTarget=function(I){return mxEvent.isControlDown(I)||b.apply(this,arguments)};mxConstraintHandler.prototype.createHighlightShape=function(){var I=new mxEllipse(null,this.highlightColor,this.highlightColor,0);I.opacity=mxConstants.HIGHLIGHT_OPACITY;return I};mxConnectionHandler.prototype.livePreview=true;mxConnectionHandler.prototype.cursor="crosshair";mxConnectionHandler.prototype.createEdgeState=function(L){var J=this.graph.createCurrentEdgeStyle();var K=this.graph.createEdge(null,null,null,null,null,J);var M=new mxCellState(this.graph.view,K,this.graph.getCellStyle(K));for(var I in this.graph.currentEdgeStyle){M.style[I]=this.graph.currentEdgeStyle[I]}return M};var j=mxConnectionHandler.prototype.createShape;mxConnectionHandler.prototype.createShape=function(){var I=j.apply(this,arguments);I.isDashed=this.graph.currentEdgeStyle[mxConstants.STYLE_DASHED]=="1";return I};mxConnectionHandler.prototype.updatePreview=function(I){};var t=mxConnectionHandler.prototype.createMarker;mxConnectionHandler.prototype.createMarker=function(){var I=t.apply(this,arguments);var J=I.getCell;I.getCell=mxUtils.bind(this,function(L){var K=J.apply(this,arguments);this.error=null;return K});return I};Graph.prototype.defaultEdgeStyle={edgeStyle:"orthogonalEdgeStyle",rounded:"0",html:"1",jettySize:"auto",orthogonalLoop:"1"};Graph.prototype.currentEdgeStyle=Graph.prototype.defaultEdgeStyle;Graph.prototype.currentVertexStyle={};Graph.prototype.createCurrentEdgeStyle=function(){var I="edgeStyle="+(this.currentEdgeStyle.edgeStyle||"none")+";";if(this.currentEdgeStyle.shape!=null){I+="shape="+this.currentEdgeStyle.shape+";"}if(this.currentEdgeStyle.curved!=null){I+="curved="+this.currentEdgeStyle.curved+";"}if(this.currentEdgeStyle.rounded!=null){I+="rounded="+this.currentEdgeStyle.rounded+";"}if(this.currentEdgeStyle.comic!=null){I+="comic="+this.currentEdgeStyle.comic+";"}if(this.currentEdgeStyle.edgeStyle=="elbowEdgeStyle"&&this.currentEdgeStyle.elbow!=null){I+="elbow="+this.currentEdgeStyle.elbow+";"}if(this.currentEdgeStyle.html!=null){I+="html="+this.currentEdgeStyle.html+";"}else{I+="html=1;"}return I};Graph.prototype.getPagePadding=function(){return new mxPoint(0,0)};Graph.prototype.loadStylesheet=function(){var I=(this.themes!=null)?this.themes[this.defaultThemeName]:(!mxStyleRegistry.dynamicLoading)?null:mxUtils.load(STYLE_PATH+"/default.xml").getDocumentElement();if(I!=null){var J=new mxCodec(I.ownerDocument);J.decode(I,this.getStylesheet())}};Graph.prototype.getAllConnectionConstraints=function(L,M){if(L!=null){var P=mxUtils.getValue(L.style,"points",null);if(P!=null){var I=[];try{var O=JSON.parse(P);for(var K=0;K<O.length;K++){var J=O[K];I.push(new mxConnectionConstraint(new mxPoint(J[0],J[1]),(J.length>2)?J[2]!="0":true))}}catch(N){}return I}else{if(L.shape!=null){if(L.shape.stencil!=null){if(L.shape.stencil!=null){return L.shape.stencil.constraints}}else{if(L.shape.constraints!=null){return L.shape.constraints}}}}}return null};Graph.prototype.flipEdge=function(K){if(K!=null){var M=this.view.getState(K);var J=(M!=null)?M.style:this.getCellStyle(K);if(J!=null){var I=mxUtils.getValue(J,mxConstants.STYLE_ELBOW,mxConstants.ELBOW_HORIZONTAL);var L=(I==mxConstants.ELBOW_HORIZONTAL)?mxConstants.ELBOW_VERTICAL:mxConstants.ELBOW_HORIZONTAL;this.setCellStyles(mxConstants.STYLE_ELBOW,L,[K])}}};Graph.prototype.isValidRoot=function(I){var J=this.model.getChildCount(I);var L=0;for(var K=0;K<J;K++){var N=this.model.getChildAt(I,K);if(this.model.isVertex(N)){var M=this.getCellGeometry(N);if(M!=null&&!M.relative){L++}}}return L>0||this.isContainer(I)};Graph.prototype.isValidDropTarget=function(I){var K=this.view.getState(I);var J=(K!=null)?K.style:this.getCellStyle(I);return mxUtils.getValue(J,"part","0")!="1"&&(this.isContainer(I)||(mxGraph.prototype.isValidDropTarget.apply(this,arguments)&&mxUtils.getValue(J,"dropTarget","1")!="0"))};Graph.prototype.createGroupCell=function(){var I=mxGraph.prototype.createGroupCell.apply(this,arguments);I.setStyle("group");return I};Graph.prototype.isExtendParentsOnAdd=function(J){var I=mxGraph.prototype.isExtendParentsOnAdd.apply(this,arguments);if(I&&J!=null&&this.layoutManager!=null){var K=this.model.getParent(J);if(K!=null){var L=this.layoutManager.getLayout(K);if(L!=null&&L.constructor==mxStackLayout){I=false}}}return I};Graph.prototype.getPreferredSizeForCell=function(J){var I=mxGraph.prototype.getPreferredSizeForCell.apply(this,arguments);if(I!=null){I.width+=10;I.height+=4;if(this.gridEnabled){I.width=this.snap(I.width);I.height=this.snap(I.height)}}return I};Graph.prototype.turnShapes=function(M){var N=this.getModel();var S=[];N.beginUpdate();try{for(var U=0;U<M.length;U++){var J=M[U];if(N.isEdge(J)){var P=N.getTerminal(J,true);var W=N.getTerminal(J,false);N.setTerminal(J,W,true);N.setTerminal(J,P,false);var Z=N.getGeometry(J);if(Z!=null){Z=Z.clone();if(Z.points!=null){Z.points.reverse()}var V=Z.getTerminalPoint(true);var K=Z.getTerminalPoint(false);Z.setTerminalPoint(V,false);Z.setTerminalPoint(K,true);N.setGeometry(J,Z);var T=this.view.getState(J);var L=this.view.getState(P);var X=this.view.getState(W);if(T!=null){var I=(L!=null)?this.getConnectionConstraint(T,L,true):null;var Q=(X!=null)?this.getConnectionConstraint(T,X,false):null;this.setConnectionConstraint(J,P,true,Q);this.setConnectionConstraint(J,W,false,I)}S.push(J)}}else{if(N.isVertex(J)){var Z=this.getCellGeometry(J);if(Z!=null){Z=Z.clone();Z.x+=Z.width/2-Z.height/2;Z.y+=Z.height/2-Z.width/2;var Y=Z.width;Z.width=Z.height;Z.height=Y;N.setGeometry(J,Z);var O=this.view.getState(J);if(O!=null){var R=O.style[mxConstants.STYLE_DIRECTION]||"east";if(R=="east"){R="south"}else{if(R=="south"){R="west"}else{if(R=="west"){R="north"}else{if(R=="north"){R="east"}}}}this.setCellStyles(mxConstants.STYLE_DIRECTION,R,[J])}S.push(J)}}}}}finally{N.endUpdate()}return S};Graph.prototype.processChange=function(K){mxGraph.prototype.processChange.apply(this,arguments);if(K instanceof mxValueChange&&K.cell.value!=null&&typeof(K.cell.value)=="object"){var J=this.model.getDescendants(K.cell);if(J.length>0){for(var I=0;I<J.length;I++){if(this.isReplacePlaceholders(J[I])){this.view.invalidate(J[I],false,false)}}}}};Graph.prototype.cellLabelChanged=function(J,M,I){M=this.zapGremlins(M);this.model.beginUpdate();try{if(J.value!=null&&typeof J.value=="object"){if(this.isReplacePlaceholders(J)&&J.getAttribute("placeholder")!=null){var K=J.getAttribute("placeholder");var N=J;while(N!=null){if(N==this.model.getRoot()||(N.value!=null&&typeof(N.value)=="object"&&N.hasAttribute(K))){this.setAttributeForCell(N,K,M);break}N=this.model.getParent(N)}}var L=J.value.cloneNode(true);L.setAttribute("label",M);M=L}mxGraph.prototype.cellLabelChanged.apply(this,arguments)}finally{this.model.endUpdate()}};Graph.prototype.removeCellsAfterUngroup=function(I){var K=[];for(var J=0;J<I.length;J++){if(this.isCellDeletable(I[J])){var L=this.view.getState(I[J]);if(L!=null){var N=mxUtils.getValue(L.style,mxConstants.STYLE_STROKECOLOR,mxConstants.NONE);var M=mxUtils.getValue(L.style,mxConstants.STYLE_FILLCOLOR,mxConstants.NONE);if(N==mxConstants.NONE&&M==mxConstants.NONE){K.push(I[J])}}}}I=K;mxGraph.prototype.removeCellsAfterUngroup.apply(this,arguments)};Graph.prototype.setLinkForCell=function(I,J){this.setAttributeForCell(I,"link",J)};Graph.prototype.setTooltipForCell=function(I,J){this.setAttributeForCell(I,"tooltip",J)};Graph.prototype.setAttributeForCell=function(I,J,K){var L=null;if(I.value!=null&&typeof(I.value)=="object"){L=I.value.cloneNode(true)}else{var M=mxUtils.createXmlDocument();L=M.createElement("UserObject");L.setAttribute("label",I.value||"")}if(K!=null&&K.length>0){L.setAttribute(J,K)}else{L.removeAttribute(J)}this.model.setValue(I,L)};Graph.prototype.getDropTarget=function(L,J,I,N){var K=this.getModel();if(mxEvent.isAltDown(J)){return null}for(var M=0;M<L.length;M++){if(this.model.isEdge(this.model.getParent(L[M]))){return null}}return mxGraph.prototype.getDropTarget.apply(this,arguments)};Graph.prototype.click=function(I){mxGraph.prototype.click.call(this,I);this.firstClickState=I.getState();this.firstClickSource=I.getSource()};Graph.prototype.dblClick=function(J,I){if(this.isEnabled()){var L=mxUtils.convertPoint(this.container,mxEvent.getClientX(J),mxEvent.getClientY(J));if(J!=null&&!this.model.isVertex(I)){var K=(this.model.isEdge(I))?this.view.getState(I):null;var M=mxEvent.getSource(J);if(this.firstClickState==K&&this.firstClickSource==M){if(K==null||(K.text==null||K.text.node==null||(!mxUtils.contains(K.text.boundingBox,L.x,L.y)&&!mxUtils.isAncestorNode(K.text.node,mxEvent.getSource(J))))){if((K==null&&!this.isCellLocked(this.getDefaultParent()))||(K!=null&&!this.isCellLocked(K.cell))){if(K!=null||(mxClient.IS_VML&&M==this.view.getCanvas())||(mxClient.IS_SVG&&M==this.view.getCanvas().ownerSVGElement)){I=this.addText(L.x,L.y,K)}}}}}mxGraph.prototype.dblClick.call(this,J,I)}};Graph.prototype.getInsertPoint=function(){var K=this.getGridSize();var J=this.container.scrollLeft/this.view.scale-this.view.translate.x;var I=this.container.scrollTop/this.view.scale-this.view.translate.y;if(this.pageVisible){var L=this.getPageLayout();var M=this.getPageSize();J=Math.max(J,L.x*M.width);I=Math.max(I,L.y*M.height)}return new mxPoint(this.snap(J+K),this.snap(I+K))};Graph.prototype.getFreeInsertPoint=function(){var K=this.view;var J=this.getGraphBounds();var L=this.getInsertPoint();var I=this.snap(Math.round(Math.max(L.x,J.x/K.scale-K.translate.x+((J.width==0)?this.gridSize:0))));var M=this.snap(Math.round(Math.max(L.y,(J.y+J.height)/K.scale-K.translate.y+((J.height==0)?1:2)*this.gridSize)));return new mxPoint(I,M)};Graph.prototype.isMouseInsertPoint=function(){return false};Graph.prototype.addText=function(I,O,L){var J=new mxCell();J.value="Text";J.style="text;html=1;resizable=0;points=[];";J.geometry=new mxGeometry(0,0,0,0);J.vertex=true;if(L!=null){J.style+="align=center;verticalAlign=middle;labelBackgroundColor=#ffffff;";J.geometry.relative=true;J.connectable=false;var M=this.view.getRelativePoint(L,I,O);J.geometry.x=Math.round(M.x*10000)/10000;J.geometry.y=Math.round(M.y);J.geometry.offset=new mxPoint(0,0);M=this.view.getPoint(L,J.geometry);var N=this.view.scale;J.geometry.offset=new mxPoint(Math.round((I-M.x)/N),Math.round((O-M.y)/N))}else{J.style+="autosize=1;align=left;verticalAlign=top;spacingTop=-4;";var K=this.view.translate;J.geometry.width=40;J.geometry.height=20;J.geometry.x=Math.round(I/this.view.scale)-K.x;J.geometry.y=Math.round(O/this.view.scale)-K.y}this.getModel().beginUpdate();try{this.addCells([J],(L!=null)?L.cell:null);this.fireEvent(new mxEventObject("textInserted","cells",[J]));this.autoSizeCell(J)}finally{this.getModel().endUpdate()}return J};Graph.prototype.getAbsoluteUrl=function(I){if(I!=null&&this.isRelativeUrl(I)){if(I.charAt(0)=="#"){I=this.baseUrl+I}else{if(I.charAt(0)=="/"){I=this.domainUrl+I}else{I=this.domainPathUrl+I}}}return I};Graph.prototype.isExternalProtocol=function(I){return I.substring(0,7)==="mailto:"};Graph.prototype.isBlankLink=function(I){return !this.isExternalProtocol(I)&&(this.linkPolicy==="blank"||(this.linkPolicy!=="self"&&!this.isRelativeUrl(I)&&I.substring(0,this.domainUrl.length)!==this.domainUrl))};Graph.prototype.isRelativeUrl=function(I){return I!=null&&!this.absoluteUrlPattern.test(I)&&I.substring(0,5)!=="data:"&&!this.isExternalProtocol(I)};Graph.prototype.addClickHandler=function(K,L,P){var I=mxUtils.bind(this,function(){var R=this.container.getElementsByTagName("a");if(R!=null){for(var S=0;S<R.length;S++){var Q=this.getAbsoluteUrl(R[S].getAttribute("href"));if(Q!=null){R[S].setAttribute("href",Q);if(L!=null){mxEvent.addListener(R[S],"click",L)}}}}});this.model.addListener(mxEvent.CHANGE,I);I();var O=this.container.style.cursor;var J=this.getTolerance();var M=this;var N={currentState:null,currentLink:null,highlight:(K!=null&&K!=""&&K!=mxConstants.NONE)?new mxCellHighlight(M,K,4):null,startX:0,startY:0,scrollLeft:0,scrollTop:0,updateCurrentState:function(R){var Q=M.view.getState(R.getCell());if(Q!=this.currentState){if(this.currentState!=null){this.clear()}this.currentState=Q;if(this.currentState!=null){this.activate(this.currentState)}}},mouseDown:function(Q,R){this.startX=R.getGraphX();this.startY=R.getGraphY();this.scrollLeft=M.container.scrollLeft;this.scrollTop=M.container.scrollTop;if(this.currentLink==null&&M.container.style.overflow=="auto"){M.container.style.cursor="move"}this.updateCurrentState(R)},mouseMove:function(S,T){if(M.isMouseDown){if(this.currentLink!=null){var R=Math.abs(this.startX-T.getGraphX());var Q=Math.abs(this.startY-T.getGraphY());if(R>J||Q>J){this.clear()}}}else{if(T.getSource().nodeName.toLowerCase()=="a"){this.clear()}else{if(this.currentState!=null&&(T.getState()==this.currentState||T.getState()==null)&&M.intersects(this.currentState,T.getGraphX(),T.getGraphY())){return}this.updateCurrentState(T)}}},mouseUp:function(Q,R){var S=R.getSource();if(S.nodeName.toLowerCase()!="a"&&!R.isConsumed()&&(R.getState()==null||!R.isSource(R.getState().control))&&(mxEvent.isLeftMouseButton(R.getEvent())||mxEvent.isTouchEvent(R.getEvent()))){if(this.currentLink!=null){var U=M.isBlankLink(this.currentLink);if(!U&&L!=null){L(R.getEvent())}var T=(U)?M.linkTarget:"_top";if(T=="_self"&&window!=window.top){window.location.href=this.currentLink}else{window.open(this.currentLink,T)}R.consume()}else{if(P!=null&&!R.isConsumed()&&(Math.abs(this.scrollLeft-M.container.scrollLeft)<J&&Math.abs(this.scrollTop-M.container.scrollTop)<J)&&(Math.abs(this.startX-R.getGraphX())<J&&Math.abs(this.startY-R.getGraphY())<J)){P(R.getEvent())}}}this.clear()},activate:function(Q){this.currentLink=M.getAbsoluteUrl(M.getLinkForCell(Q.cell));if(this.currentLink!=null){M.container.style.cursor="pointer";if(this.highlight!=null){this.highlight.highlight(Q)}}},clear:function(){if(M.container!=null){M.container.style.cursor=O}this.currentState=null;this.currentLink=null;if(this.highlight!=null){this.highlight.hide()}}};M.click=function(Q){};M.addMouseListener(N);mxEvent.addListener(document,"mouseleave",function(Q){N.clear()})};Graph.prototype.duplicateCells=function(Q,J){Q=(Q!=null)?Q:this.getSelectionCells();J=(J!=null)?J:true;Q=this.model.getTopmostCells(Q);var L=this.getModel();var R=this.gridSize;var N=[];L.beginUpdate();try{var O=this.cloneCells(Q,false);for(var K=0;K<Q.length;K++){var P=L.getParent(Q[K]);var I=this.moveCells([O[K]],R,R,false,P)[0];N.push(I);if(J){L.add(P,O[K])}else{var M=P.getIndex(Q[K]);L.add(P,O[K],M+1)}}}finally{L.endUpdate()}return N};Graph.prototype.insertImage=function(N,J,M){if(N!=null){var L=this.cellEditor.textarea.getElementsByTagName("img");var O=[];for(var K=0;K<L.length;K++){O.push(L[K])}document.execCommand("insertimage",false,N);var I=this.cellEditor.textarea.getElementsByTagName("img");if(I.length==O.length+1){for(var K=I.length-1;K>=0;K--){if(K==0||I[K]!=O[K-1]){I[K].setAttribute("width",J);I[K].setAttribute("height",M);break}}}}};Graph.prototype.insertLink=function(I){if(I.length==0){document.execCommand("unlink",false)}else{document.execCommand("createlink",false,mxUtils.trim(I))}};Graph.prototype.isCellResizable=function(J){var I=mxGraph.prototype.isCellResizable.apply(this,arguments);var L=this.view.getState(J);var K=(L!=null)?L.style:this.getCellStyle(J);return I||(mxUtils.getValue(K,mxConstants.STYLE_RESIZABLE,"1")!="0"&&K[mxConstants.STYLE_WHITE_SPACE]=="wrap")};Graph.prototype.distributeCells=function(J,U){if(U==null){U=this.getSelectionCells()}if(U!=null&&U.length>1){var R=[];var S=null;var L=null;for(var O=0;O<U.length;O++){if(this.getModel().isVertex(U[O])){var I=this.view.getState(U[O]);if(I!=null){var P=(J)?I.getCenterX():I.getCenterY();S=(S!=null)?Math.max(S,P):P;L=(L!=null)?Math.min(L,P):P;R.push(I)}}}if(R.length>2){R.sort(function(X,W){return(J)?X.x-W.x:X.y-W.y});var T=this.view.translate;var V=this.view.scale;L=L/V-((J)?T.x:T.y);S=S/V-((J)?T.x:T.y);this.getModel().beginUpdate();try{var K=(S-L)/(R.length-1);var Q=L;for(var O=1;O<R.length-1;O++){var N=this.view.getState(this.model.getParent(R[O].cell));var M=this.getCellGeometry(R[O].cell);Q+=K;if(M!=null&&N!=null){M=M.clone();if(J){M.x=Math.round(Q-M.width/2)-N.origin.x}else{M.y=Math.round(Q-M.height/2)-N.origin.y}this.getModel().setGeometry(R[O].cell,M)}}}finally{this.getModel().endUpdate()}}}return U};Graph.prototype.isCloneEvent=function(I){return(mxClient.IS_MAC&&mxEvent.isMetaDown(I))||mxEvent.isControlDown(I)};Graph.prototype.encodeCells=function(Q){var P=this.cloneCells(Q);var J=new mxDictionary();for(var L=0;L<Q.length;L++){J.put(Q[L],true)}for(var L=0;L<P.length;L++){var I=this.view.getState(Q[L]);if(I!=null){var K=this.getCellGeometry(P[L]);if(K!=null&&K.relative&&!this.model.isEdge(Q[L])&&!J.get(this.model.getParent(Q[L]))){K.relative=false;K.x=I.x/I.view.scale-I.view.translate.x;K.y=I.y/I.view.scale-I.view.translate.y}}}var N=new mxCodec();var M=new mxGraphModel();var O=M.getChildAt(M.getRoot(),0);for(var L=0;L<Q.length;L++){M.add(O,P[L])}return N.encode(M)};Graph.prototype.createSvgImageExport=function(){var I=new mxImageExport();I.getLinkForCellState=mxUtils.bind(this,function(K,J){return this.getLinkForCell(K.cell)});return I};Graph.prototype.getSvg=function(aa,ad,Y,N,ac,U,J){ad=(ad!=null)?ad:1;Y=(Y!=null)?Y:0;ac=(ac!=null)?ac:true;U=(U!=null)?U:true;J=(J!=null)?J:true;var P=(U||N)?this.getGraphBounds():this.getBoundingBox(this.getSelectionCells());if(P==null){throw Error(mxResources.get("drawingEmpty"))}var Z=this.view.scale;var T=mxUtils.createXmlDocument();var W=(T.createElementNS!=null)?T.createElementNS(mxConstants.NS_SVG,"svg"):T.createElement("svg");if(aa!=null){if(W.style!=null){W.style.backgroundColor=aa}else{W.setAttribute("style","background-color:"+aa)}}if(T.createElementNS==null){W.setAttribute("xmlns",mxConstants.NS_SVG);W.setAttribute("xmlns:xlink",mxConstants.NS_XLINK)}else{W.setAttributeNS("http://www.w3.org/2000/xmlns/","xmlns:xlink",mxConstants.NS_XLINK)}var S=ad/Z;W.setAttribute("width",Math.max(1,Math.ceil(P.width*S)+2*Y)+"px");W.setAttribute("height",Math.max(1,Math.ceil(P.height*S)+2*Y)+"px");W.setAttribute("version","1.1");var V=W;if(ac){var Q=(T.createElementNS!=null)?T.createElementNS(mxConstants.NS_SVG,"g"):T.createElement("g");Q.setAttribute("transform","translate(0.5,0.5)");W.appendChild(Q);T.appendChild(W);V=Q}else{T.appendChild(W)}var X=this.createSvgCanvas(V);X.foOffset=(ac)?-0.5:0;X.textOffset=(ac)?-0.5:0;X.imageOffset=(ac)?-0.5:0;X.translate(Math.floor((Y/ad-P.x)/Z),Math.floor((Y/ad-P.y)/Z));var O=X.createAlternateContent;X.createAlternateContent=function(al,ao,am,aq,ai,ak,aj,an,ae,ap,ag,af,ar){var at=this.state;if(this.foAltText!=null&&(aq==0||(at.fontSize!=0&&ak.length<(aq*5)/at.fontSize))){var ah=this.createElement("text");ah.setAttribute("x",Math.round(aq/2));ah.setAttribute("y",Math.round((ai+at.fontSize)/2));ah.setAttribute("fill",at.fontColor||"black");ah.setAttribute("text-anchor","middle");ah.setAttribute("font-size",Math.round(at.fontSize)+"px");ah.setAttribute("font-family",at.fontFamily);if((at.fontStyle&mxConstants.FONT_BOLD)==mxConstants.FONT_BOLD){ah.setAttribute("font-weight","bold")}if((at.fontStyle&mxConstants.FONT_ITALIC)==mxConstants.FONT_ITALIC){ah.setAttribute("font-style","italic")}if((at.fontStyle&mxConstants.FONT_UNDERLINE)==mxConstants.FONT_UNDERLINE){ah.setAttribute("text-decoration","underline")}mxUtils.write(ah,ak);return ah}else{return O.apply(this,arguments)}};var M=this.backgroundImage;if(M!=null){var L=Z/ad;var K=this.view.translate;var ab=new mxRectangle(K.x*L,K.y*L,M.width*L,M.height*L);if(mxUtils.intersects(P,ab)){X.image(K.x,K.y,M.width,M.height,M.src,true)}}X.scale(S);X.textEnabled=J;var I=this.createSvgImageExport();var R=I.drawCellState;I.drawCellState=function(af,ae){if(U||af.view.graph.isCellSelected(af.cell)){R.apply(this,arguments)}};I.drawState(this.getView().getState(this.model.root),X);return W};Graph.prototype.createSvgCanvas=function(I){return new mxSvgCanvas2D(I)};Graph.prototype.getSelectedElement=function(){var J=null;if(window.getSelection){var K=window.getSelection();if(K.getRangeAt&&K.rangeCount){var I=K.getRangeAt(0);J=I.commonAncestorContainer}}else{if(document.selection){J=document.selection.createRange().parentElement()}}return J};Graph.prototype.getParentByName=function(K,J,I){while(K!=null){if(K.nodeName==J){return K}if(K==I){return null}K=K.parentNode}return K};Graph.prototype.selectNode=function(J){var L=null;if(window.getSelection){L=window.getSelection();if(L.getRangeAt&&L.rangeCount){var I=document.createRange();I.selectNode(J);L.removeAllRanges();L.addRange(I)}}else{if((L=document.selection)&&L.type!="Control"){var K=L.createRange();K.collapse(true);var I=L.createRange();I.setEndPoint("StartToStart",K);I.select()}}};Graph.prototype.insertRow=function(K,I){var L=K.tBodies[0];var M=(L.rows.length>0)?L.rows[0].cells.length:1;var N=L.insertRow(I);for(var J=0;J<M;J++){mxUtils.br(N.insertCell(-1))}return N.cells[0]};Graph.prototype.deleteRow=function(J,I){J.tBodies[0].deleteRow(I)};Graph.prototype.insertColumn=function(N,J){var P=N.tHead;if(P!=null){for(var L=0;L<P.rows.length;L++){var M=document.createElement("th");P.rows[L].appendChild(M);mxUtils.br(M)}}var O=N.tBodies[0];for(var K=0;K<O.rows.length;K++){var I=O.rows[K].insertCell(J);mxUtils.br(I)}return O.rows[0].cells[(J>=0)?J:O.rows[0].cells.length-1]};Graph.prototype.deleteColumn=function(K,I){if(I>=0){var M=K.tBodies[0];var L=M.rows;for(var J=0;J<L.length;J++){if(L[J].cells.length>I){L[J].deleteCell(I)}}}};Graph.prototype.pasteHtmlAtCaret=function(J){var M,I;if(window.getSelection){M=window.getSelection();if(M.getRangeAt&&M.rangeCount){I=M.getRangeAt(0);I.deleteContents();var K=document.createElement("div");K.innerHTML=J;var N=document.createDocumentFragment(),L;while((L=K.firstChild)){lastNode=N.appendChild(L)}I.insertNode(N)}}else{if((M=document.selection)&&M.type!="Control"){M.createRange().pasteHTML(J)}}};Graph.prototype.initTouch=function(){this.connectionHandler.marker.isEnabled=function(){return this.graph.connectionHandler.first!=null};this.addListener(mxEvent.START_EDITING,function(O,N){this.popupMenuHandler.hideMenu()});var M=this.updateMouseEvent;this.updateMouseEvent=function(O){O=M.apply(this,arguments);if(mxEvent.isTouchEvent(O.getEvent())&&O.getState()==null){var N=this.getCellAt(O.graphX,O.graphY);if(N!=null&&this.isSwimlane(N)&&this.hitsSwimlaneContent(N,O.graphX,O.graphY)){N=null}else{O.state=this.view.getState(N);if(O.state!=null&&O.state.shape!=null){this.container.style.cursor=O.state.shape.node.style.cursor}}}if(O.getState()==null&&this.isEnabled()){this.container.style.cursor="default"}return O};var L=false;var K=false;var I=false;var J=this.fireMouseEvent;this.fireMouseEvent=function(P,O,N){if(P==mxEvent.MOUSE_DOWN){O=this.updateMouseEvent(O);L=this.isCellSelected(O.getCell());K=this.isSelectionEmpty();I=this.popupMenuHandler.isMenuShowing()}J.apply(this,arguments)};this.popupMenuHandler.mouseUp=mxUtils.bind(this,function(N,O){this.popupMenuHandler.popupTrigger=!this.isEditing()&&this.isEnabled()&&(O.getState()==null||!O.isSource(O.getState().control))&&(this.popupMenuHandler.popupTrigger||(!I&&!mxEvent.isMouseEvent(O.getEvent())&&((K&&O.getCell()==null&&this.isSelectionEmpty())||(L&&this.isCellSelected(O.getCell())))));mxPopupMenuHandler.prototype.mouseUp.apply(this.popupMenuHandler,arguments)})};mxCellEditor.prototype.isContentEditing=function(){var I=this.graph.view.getState(this.editingCell);return I!=null&&I.style.html==1};mxCellEditor.prototype.saveSelection=function(){if(window.getSelection){sel=window.getSelection();if(sel.getRangeAt&&sel.rangeCount){var J=[];for(var K=0,I=sel.rangeCount;K<I;++K){J.push(sel.getRangeAt(K))}return J}}else{if(document.selection&&document.selection.createRange){return document.selection.createRange()}}return null};mxCellEditor.prototype.restoreSelection=function(K){try{if(K){if(window.getSelection){sel=window.getSelection();sel.removeAllRanges();for(var J=0,I=K.length;J<I;++J){sel.addRange(K[J])}}else{if(document.selection&&K.select){K.select()}}}}catch(L){}};var A=mxCellRenderer.prototype.initializeLabel;mxCellRenderer.prototype.initializeLabel=function(I){if(I.text!=null){I.text.replaceLinefeeds=mxUtils.getValue(I.style,"nl2Br","1")!="0"}A.apply(this,arguments)};var e=mxConstraintHandler.prototype.update;mxConstraintHandler.prototype.update=function(I,J){if(this.isKeepFocusEvent(I)||!mxEvent.isAltDown(I.getEvent())){e.apply(this,arguments)}else{this.reset()}};mxGuide.prototype.createGuideShape=function(J){var I=new mxPolyline([],mxConstants.GUIDE_COLOR,mxConstants.GUIDE_STROKEWIDTH);return I};mxCellEditor.prototype.escapeCancelsEditing=false;var E=mxCellEditor.prototype.startEditing;mxCellEditor.prototype.startEditing=function(I,J){E.apply(this,arguments);var L=this.graph.view.getState(I);if(L!=null&&L.style.html==1){this.textarea.className="mxCellEditor geContentEditable"}else{this.textarea.className="mxCellEditor mxPlainTextEditor"}this.codeViewMode=false;this.switchSelectionState=null;this.graph.setSelectionCell(I);var K=this.graph.getModel().getParent(I);var M=this.graph.getCellGeometry(I);if((this.graph.getModel().isEdge(K)&&M!=null&&M.relative)||this.graph.getModel().isEdge(I)){if(mxClient.IS_QUIRKS){this.textarea.style.border="gray dotted 1px"}else{if(mxClient.IS_IE||mxClient.IS_IE11||(mxClient.IS_FF&&mxClient.IS_WIN)){this.textarea.style.outline="gray dotted 1px"}else{this.textarea.style.outline=""}}}else{if(mxClient.IS_QUIRKS){this.textarea.style.outline="none";this.textarea.style.border=""}}};var u=mxCellEditor.prototype.installListeners;mxCellEditor.prototype.installListeners=function(K){u.apply(this,arguments);function I(M,O){O.originalNode=M;M=M.firstChild;var N=O.firstChild;while(M!=null&&N!=null){I(M,N);M=M.nextSibling;N=N.nextSibling}return O}function J(N,O){if(N!=null){if(O.originalNode!=N){L(N)}else{N=N.firstChild;O=O.firstChild;while(N!=null){var M=N.nextSibling;if(O==null){L(N)}else{J(N,O);O=O.nextSibling}N=M}}}}function L(N){var O=N.firstChild;while(O!=null){var M=O.nextSibling;L(O);O=M}if((N.nodeType!=1||(N.nodeName!=="BR"&&N.firstChild==null))&&(N.nodeType!=3||mxUtils.trim(mxUtils.getTextContent(N)).length==0)){N.parentNode.removeChild(N)}else{if(N.nodeType==3){mxUtils.setTextContent(N,mxUtils.getTextContent(N).replace(/\n|\r/g,""))}if(N.nodeType==1){N.removeAttribute("style");N.removeAttribute("class");N.removeAttribute("width");N.removeAttribute("cellpadding");N.removeAttribute("cellspacing");N.removeAttribute("border")}}}if(!mxClient.IS_QUIRKS&&document.documentMode!==7&&document.documentMode!==8){mxEvent.addListener(this.textarea,"paste",mxUtils.bind(this,function(M){var N=I(this.textarea,this.textarea.cloneNode(true));window.setTimeout(mxUtils.bind(this,function(){J(this.textarea,N)}),0)}))}};mxCellEditor.prototype.toggleViewMode=function(){var I=this.graph.view.getState(this.editingCell);var J=I!=null&&mxUtils.getValue(I.style,"nl2Br","1")!="0";var L=this.saveSelection();if(!this.codeViewMode){if(this.clearOnChange&&this.textarea.innerHTML==this.getEmptyLabelText()){this.clearOnChange=false;this.textarea.innerHTML=""}var O=mxUtils.htmlEntities(this.textarea.innerHTML);if(!mxClient.IS_QUIRKS&&document.documentMode!=8){O=mxUtils.replaceTrailingNewlines(O,"<div><br></div>")}O=this.graph.sanitizeHtml((J)?O.replace(/\n/g,"").replace(/&lt;br\s*.?&gt;/g,"<br>"):O,true);this.textarea.className="mxCellEditor mxPlainTextEditor";var R=mxConstants.DEFAULT_FONTSIZE;this.textarea.style.lineHeight=(mxConstants.ABSOLUTE_LINE_HEIGHT)?Math.round(R*mxConstants.LINE_HEIGHT)+"px":mxConstants.LINE_HEIGHT;this.textarea.style.fontSize=Math.round(R)+"px";this.textarea.style.textDecoration="";this.textarea.style.fontWeight="normal";this.textarea.style.fontStyle="";this.textarea.style.fontFamily=mxConstants.DEFAULT_FONTFAMILY;this.textarea.style.textAlign="left";this.textarea.style.padding="2px";if(this.textarea.innerHTML!=O){this.textarea.innerHTML=O}this.codeViewMode=true}else{var O=mxUtils.extractTextWithWhitespace(this.textarea.childNodes);if(O.length>0&&O.charAt(O.length-1)=="\n"){O=O.substring(0,O.length-1)}O=this.graph.sanitizeHtml((J)?O.replace(/\n/g,"<br/>"):O,true);this.textarea.className="mxCellEditor geContentEditable";var R=mxUtils.getValue(I.style,mxConstants.STYLE_FONTSIZE,mxConstants.DEFAULT_FONTSIZE);var K=mxUtils.getValue(I.style,mxConstants.STYLE_FONTFAMILY,mxConstants.DEFAULT_FONTFAMILY);var N=mxUtils.getValue(I.style,mxConstants.STYLE_ALIGN,mxConstants.ALIGN_LEFT);var P=(mxUtils.getValue(I.style,mxConstants.STYLE_FONTSTYLE,0)&mxConstants.FONT_BOLD)==mxConstants.FONT_BOLD;var M=(mxUtils.getValue(I.style,mxConstants.STYLE_FONTSTYLE,0)&mxConstants.FONT_ITALIC)==mxConstants.FONT_ITALIC;var Q=(mxUtils.getValue(I.style,mxConstants.STYLE_FONTSTYLE,0)&mxConstants.FONT_UNDERLINE)==mxConstants.FONT_UNDERLINE;this.textarea.style.lineHeight=(mxConstants.ABSOLUTE_LINE_HEIGHT)?Math.round(R*mxConstants.LINE_HEIGHT)+"px":mxConstants.LINE_HEIGHT;this.textarea.style.fontSize=Math.round(R)+"px";this.textarea.style.textDecoration=(Q)?"underline":"";this.textarea.style.fontWeight=(P)?"bold":"normal";this.textarea.style.fontStyle=(M)?"italic":"";this.textarea.style.fontFamily=K;this.textarea.style.textAlign=N;this.textarea.style.padding="0px";if(this.textarea.innerHTML!=O){this.textarea.innerHTML=O;if(this.textarea.innerHTML.length==0){this.textarea.innerHTML=this.getEmptyLabelText();this.clearOnChange=this.textarea.innerHTML.length>0}}this.codeViewMode=false}this.textarea.focus();if(this.switchSelectionState!=null){this.restoreSelection(this.switchSelectionState)}this.switchSelectionState=L;this.resize()};var d=mxCellEditor.prototype.resize;mxCellEditor.prototype.resize=function(K,J){if(this.textarea!=null){var K=this.graph.getView().getState(this.editingCell);if(this.codeViewMode&&K!=null){var L=K.view.scale;this.bounds=mxRectangle.fromRectangle(K);if(this.bounds.width==0&&this.bounds.height==0){this.bounds.width=160*L;this.bounds.height=60*L;var I=(K.text!=null)?K.text.margin:null;if(I==null){I=mxUtils.getAlignmentAsPoint(mxUtils.getValue(K.style,mxConstants.STYLE_ALIGN,mxConstants.ALIGN_CENTER),mxUtils.getValue(K.style,mxConstants.STYLE_VERTICAL_ALIGN,mxConstants.ALIGN_MIDDLE))}this.bounds.x+=I.x*this.bounds.width;this.bounds.y+=I.y*this.bounds.height}this.textarea.style.width=Math.round((this.bounds.width-4)/L)+"px";this.textarea.style.height=Math.round((this.bounds.height-4)/L)+"px";this.textarea.style.overflow="auto";if(this.textarea.clientHeight<this.textarea.offsetHeight){this.textarea.style.height=Math.round((this.bounds.height/L))+(this.textarea.offsetHeight-this.textarea.clientHeight)+"px";this.bounds.height=parseInt(this.textarea.style.height)*L}if(this.textarea.clientWidth<this.textarea.offsetWidth){this.textarea.style.width=Math.round((this.bounds.width/L))+(this.textarea.offsetWidth-this.textarea.clientWidth)+"px";this.bounds.width=parseInt(this.textarea.style.width)*L}this.textarea.style.left=Math.round(this.bounds.x)+"px";this.textarea.style.top=Math.round(this.bounds.y)+"px";if(mxClient.IS_VML){this.textarea.style.zoom=L}else{mxUtils.setPrefixedStyle(this.textarea.style,"transform","scale("+L+","+L+")")}}else{this.textarea.style.height="";this.textarea.style.overflow="";d.apply(this,arguments)}}};mxCellEditorGetInitialValue=mxCellEditor.prototype.getInitialValue;mxCellEditor.prototype.getInitialValue=function(K,J){if(mxUtils.getValue(K.style,"html","0")=="0"){return mxCellEditorGetInitialValue.apply(this,arguments)}else{var I=this.graph.getEditingValue(K.cell,J);if(mxUtils.getValue(K.style,"nl2Br","1")=="1"){I=I.replace(/\n/g,"<br/>")}I=this.graph.sanitizeHtml(I,true);return I}};mxCellEditorGetCurrentValue=mxCellEditor.prototype.getCurrentValue;mxCellEditor.prototype.getCurrentValue=function(J){if(mxUtils.getValue(J.style,"html","0")=="0"){return mxCellEditorGetCurrentValue.apply(this,arguments)}else{var I=this.graph.sanitizeHtml(this.textarea.innerHTML,true);if(mxUtils.getValue(J.style,"nl2Br","1")=="1"){I=I.replace(/\r\n/g,"<br/>").replace(/\n/g,"<br/>")}else{I=I.replace(/\r\n/g,"").replace(/\n/g,"")}return I}};var G=mxCellEditor.prototype.stopEditing;mxCellEditor.prototype.stopEditing=function(I){if(this.codeViewMode){this.toggleViewMode()}G.apply(this,arguments);try{this.graph.container.focus()}catch(J){}};var m=mxCellEditor.prototype.applyValue;mxCellEditor.prototype.applyValue=function(J,I){this.graph.getModel().beginUpdate();try{m.apply(this,arguments);if(this.graph.isCellDeletable(J.cell)){var L=mxUtils.getValue(J.style,mxConstants.STYLE_STROKECOLOR,mxConstants.NONE);var K=mxUtils.getValue(J.style,mxConstants.STYLE_FILLCOLOR,mxConstants.NONE);if(mxUtils.trim(I||"")==""&&L==mxConstants.NONE&&K==mxConstants.NONE){this.graph.removeCells([J.cell],false)}}}finally{this.graph.getModel().endUpdate()}};mxCellEditor.prototype.getBackgroundColor=function(J){var I=null;if(this.graph.getModel().isEdge(J.cell)||this.graph.getModel().isEdge(this.graph.getModel().getParent(J.cell))){var I=mxUtils.getValue(J.style,mxConstants.STYLE_LABEL_BACKGROUNDCOLOR,null);if(I==mxConstants.NONE){I=null}}return I};mxCellEditor.prototype.getMinimumSize=function(I){var J=this.graph.getView().scale;return new mxRectangle(0,0,(I.text==null)?30:I.text.size*J+20,30)};var k=mxGraphHandler.prototype.moveCells;mxGraphHandler.prototype.moveCells=function(L,K,J,N,M,I){if(mxEvent.isAltDown(I)){M=null}k.apply(this,arguments)};function F(){var I=document.createElement("div");I.className="geHint";I.style.whiteSpace="nowrap";I.style.position="absolute";return I}mxGraphHandler.prototype.updateHint=function(L){if(this.shape!=null){if(this.hint==null){this.hint=F();this.graph.container.appendChild(this.hint)}var J=this.graph.view.translate;var K=this.graph.view.scale;var I=this.roundLength((this.bounds.x+this.currentDx)/K-J.x);var M=this.roundLength((this.bounds.y+this.currentDy)/K-J.y);this.hint.innerHTML=I+", "+M;this.hint.style.left=(this.shape.bounds.x+Math.round((this.shape.bounds.width-this.hint.clientWidth)/2))+"px";this.hint.style.top=(this.shape.bounds.y+this.shape.bounds.height+12)+"px"}};mxGraphHandler.prototype.removeHint=function(){if(this.hint!=null){this.hint.parentNode.removeChild(this.hint);this.hint=null}};mxVertexHandler.prototype.isRecursiveResize=function(J,I){return !this.graph.isSwimlane(J.cell)&&this.graph.model.getChildCount(J.cell)>0&&!mxEvent.isControlDown(I.getEvent())&&!this.graph.isCellCollapsed(J.cell)&&mxUtils.getValue(J.style,"recursiveResize","1")=="1"&&mxUtils.getValue(J.style,"childLayout",null)==null};mxVertexHandler.prototype.isCenteredEvent=function(J,I){return(!(!this.graph.isSwimlane(J.cell)&&this.graph.model.getChildCount(J.cell)>0&&!this.graph.isCellCollapsed(J.cell)&&mxUtils.getValue(J.style,"recursiveResize","1")=="1"&&mxUtils.getValue(J.style,"childLayout",null)==null)&&mxEvent.isControlDown(I.getEvent()))||mxEvent.isMetaDown(I.getEvent())};var w=mxVertexHandler.prototype.getHandlePadding;mxVertexHandler.prototype.getHandlePadding=function(){var I=new mxPoint(0,0);var J=this.tolerance;if(this.graph.cellEditor.getEditingCell()==this.state.cell&&this.sizers!=null&&this.sizers.length>0&&this.sizers[0]!=null){J/=2;I.x=this.sizers[0].bounds.width+J;I.y=this.sizers[0].bounds.height+J}else{I=w.apply(this,arguments)}return I};mxVertexHandler.prototype.updateHint=function(K){if(this.index!=mxEvent.LABEL_HANDLE){if(this.hint==null){this.hint=F();this.state.view.graph.container.appendChild(this.hint)}if(this.index==mxEvent.ROTATION_HANDLE){this.hint.innerHTML=this.currentAlpha+"&deg;"}else{var J=this.state.view.scale;this.hint.innerHTML=this.roundLength(this.bounds.width/J)+" x "+this.roundLength(this.bounds.height/J)}var I=(this.currentAlpha!=null)?this.currentAlpha:this.state.style[mxConstants.STYLE_ROTATION]||"0";var L=mxUtils.getBoundingBox(this.bounds,I);if(L==null){L=this.bounds}this.hint.style.left=L.x+Math.round((L.width-this.hint.clientWidth)/2)+"px";this.hint.style.top=(L.y+L.height+12)+"px"}};mxVertexHandler.prototype.removeHint=mxGraphHandler.prototype.removeHint;mxEdgeHandler.prototype.updateHint=function(M,J){if(this.hint==null){this.hint=F();this.state.view.graph.container.appendChild(this.hint)}var K=this.graph.view.translate;var L=this.graph.view.scale;var I=this.roundLength(J.x/L-K.x);var O=this.roundLength(J.y/L-K.y);this.hint.innerHTML=I+", "+O;this.hint.style.visibility="visible";if(this.isSource||this.isTarget){if(this.constraintHandler.currentConstraint!=null&&this.constraintHandler.currentFocus!=null){var N=this.constraintHandler.currentConstraint.point;this.hint.innerHTML="["+Math.round(N.x*100)+"%, "+Math.round(N.y*100)+"%]"}else{if(this.marker.hasValidState()){this.hint.style.visibility="hidden"}}}this.hint.style.left=Math.round(M.getGraphX()-this.hint.clientWidth/2)+"px";this.hint.style.top=(Math.max(M.getGraphY(),J.y)+this.state.view.graph.gridSize)+"px";if(this.hideEdgeHintThread!=null){window.clearTimeout(this.hideEdgeHintThread)}this.hideEdgeHintThread=window.setTimeout(mxUtils.bind(this,function(){if(this.hint!=null){this.hint.style.visibility="hidden"}}),500)};mxEdgeHandler.prototype.removeHint=mxGraphHandler.prototype.removeHint;HoverIcons.prototype.mainHandle=new mxImage((mxClient.IS_SVG)?"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABEAAAARCAYAAAA7bUf6AAAACXBIWXMAAAsTAAALEwEAmpwYAAABLUlEQVQ4y61US4rCQBBNeojiRrLSnbMOWWU3V1FPouARcgc9hyLOCSSbYZw5gRCIkM9KbevJaycS4zCOBY+iq6pf1y+xrNtiE6oEY/tVzMUXgSNoCJrUDu3qHpldutwSuIKOoEvt0m7I7DoCvNj2fb8XRdEojuN5lmVraJxhh59xFSLFF9phGL7lef6hRb63R73aHM8aAjv8JHJ47yqLlud5r0VRbHa51sPZQVuT/QU4ww4/4ljaJRubrC5SxouD6TWBQV/sEIkbs0eOIVGssSO1L5D6LQID+BHHZjdMSYpj7KZpun7/uk8CP5rNqTXLJP/OpNyTMWruP9CTP08nCILKdCp7gkCzJ8vPnz2BvW5PKhuLjJBykiQLaWIEjTP3o3Zjn/LtPO0rfvh/cgKu7z6wtPPltQAAAABJRU5ErkJggg==":IMAGE_PATH+"/handle-main.png",17,17);HoverIcons.prototype.fixedHandle=new mxImage((mxClient.IS_SVG)?"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABEAAAARCAYAAAA7bUf6AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYwIDYxLjEzNDc3NywgMjAxMC8wMi8xMi0xNzozMjowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNSBNYWNpbnRvc2giIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6NkE1NkU4Njk2QjI1MTFFNEFDMjFGQTcyODkzNTc3NkYiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6NkE1NkU4NkE2QjI1MTFFNEFDMjFGQTcyODkzNTc3NkYiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDo2QTU2RTg2NzZCMjUxMUU0QUMyMUZBNzI4OTM1Nzc2RiIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDo2QTU2RTg2ODZCMjUxMUU0QUMyMUZBNzI4OTM1Nzc2RiIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/Pmuk6K8AAAGBSURBVHjarFRBSsNQEM3/atNs6qLowixcKELoqjuXoqfQeoF6BMEj9BCC1YIXcCGlV8hGLNZlBKWlCk1JSs13Xvw/nca6UDrwmMzMy8tk/iTCWmwi52Eq53+QeWwg2bXSSNi1WiRibgRWCTahwEQmhJgw1WJGML2BC6wQnEqlsuH7fr3f7zdHo9EdPGLkUdc8mX8TJNYIpUajsR+G4YMie3pNVKebpB6GPOrgab7kr5F24Hne9ng87r6HStUuP5V1Mc2AGHnUwWMdCck6sVut1onjOHtnt4nV7M0fAuI65VEnXk3PTFq5Eyi4rnvUe1PW9fO3QOdUzvkbyqNOvEM2dMEHK2zbLr98zJ5+cJWkAvDGUC8Wi2X28Gww6bnHcTzYWp+JGAHTCQz1KIoGfFckCyZBELR3N4V1vCOyTrhHHnXw9N5kQn8+nWq1Onc6C/cERLMn7cfZniD/257wbjDxEjqiDT0fDof3tLE+PGK9HyXNy7pYyrez9K/43/+TLwEGAMb7AY6w980DAAAAAElFTkSuQmCC":IMAGE_PATH+"/handle-fixed.png",17,17);HoverIcons.prototype.terminalHandle=new mxImage((mxClient.IS_SVG)?"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABEAAAARCAYAAAA7bUf6AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYwIDYxLjEzNDc3NywgMjAxMC8wMi8xMi0xNzozMjowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNSBNYWNpbnRvc2giIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6MEMzRUVERTk2NzU1MTFFNTg5NjNEMjREQ0FFNENFQzgiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6MEMzRUVERUE2NzU1MTFFNTg5NjNEMjREQ0FFNENFQzgiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDowQzNFRURFNzY3NTUxMUU1ODk2M0QyNERDQUU0Q0VDOCIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDowQzNFRURFODY3NTUxMUU1ODk2M0QyNERDQUU0Q0VDOCIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/Poj8AGUAAAF6SURBVHjarFTBSsNAEM2u2jSXeCh6sAcPilB6ys2j6Fdo/YH6CYKf0I8QrBb8AQ9S+gu5iMV6jKC0VCEJTalZ54VNnMR4ULrwmJ2Zt5PZmdkIo3yJgsRSBfmDzPUUku2VRsz2qixIehBYJZiECgsyJ0SEhQ6WBkwO8AArBKvZbG64rtsej8dd3/fvIKHDDr/myeJNYFgj2J1OZz8IggdF6+k1VoNhnEgs2OEHT/Mlv0aSQaPR2A7DcPgeKNW6/FTGxSIDdNjhB49lJCTLxOz1eieWZe2d3cZGd5RvAvQ22eEnXkvXTBqFDlTq9frR6E0Z18+qtO83ZIefeIes6IIXVpimWXv5yB8cnMqcDn+1Wq2xj2eFSfoeRdFkaz0f5OAqzunwz2azCZ8VyZS553n93U1hHO+I0uvADj94em6yQH/ujuM4ue6UzgmI6Zz0H7/nBPbf5oRng4rbyIgm9Hw6nd7TxLqQ0PV82JqXZbGUt7P0V/zv/8mXAAMASSz1f9Cd7ycAAAAASUVORK5CYII=":IMAGE_PATH+"/handle-terminal.png",17,17);HoverIcons.prototype.secondaryHandle=new mxImage((mxClient.IS_SVG)?"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABEAAAARCAYAAAA7bUf6AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYwIDYxLjEzNDc3NywgMjAxMC8wMi8xMi0xNzozMjowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNSBNYWNpbnRvc2giIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6MEJBMUVERjNEMkZDMTFFM0I0Qzc5RkE1RTc2NjI0OUIiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6MEJBMUVERjREMkZDMTFFM0I0Qzc5RkE1RTc2NjI0OUIiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDowQkExRURGMUQyRkMxMUUzQjRDNzlGQTVFNzY2MjQ5QiIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDowQkExRURGMkQyRkMxMUUzQjRDNzlGQTVFNzY2MjQ5QiIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PvXDOj4AAAFqSURBVHjarFTNToNAEN5FLeiBmDRe7MGLF4IXbp71KapP4CPoO/QdvKiv4ME0PkAvJI2J0SueIHgAAk3b7XxkwSlgE38mmSwz8+3HsPMtUnSbbKww1VhbYB5XbrBnpX3JnlUXSbURvk1ukvcYyYy8IJ9rsoqw3MAJtsh3Xdc98H3/KgzDuyRJHrEiRh51jTOaX4LEDrk9Go1O0zR9UWTL9E0to+dyhSGPOnAab/DPKDtwHOcoy7LXz1SpxeRSzW9F7YiRRx041pGsSMC6Ty1f442LycUawRfRsOyIcDfA632ST6A3GAzOVfYu1PS+c+5q+iBQJ9wZO3TJD1aaptkX+YfYaFS3LKvPXl4fTDn3oigiYR1uJqF6nucR14rBglkQBGO5dyzkybBbxpRHHTitm5rox9PxPK81nZZOAKx1Eo5rnSD/nU54NzhxGx1hjHEcP5FifayItT5sjVvTyJ/vzr/f4l//T1YCDAC4VAdLL1OIRAAAAABJRU5ErkJggg==":IMAGE_PATH+"/handle-secondary.png",17,17);HoverIcons.prototype.rotationHandle=new mxImage((mxClient.IS_SVG)?"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABMAAAAVCAYAAACkCdXRAAAACXBIWXMAAAsTAAALEwEAmpwYAAAKT2lDQ1BQaG90b3Nob3AgSUNDIHByb2ZpbGUAAHjanVNnVFPpFj333vRCS4iAlEtvUhUIIFJCi4AUkSYqIQkQSoghodkVUcERRUUEG8igiAOOjoCMFVEsDIoK2AfkIaKOg6OIisr74Xuja9a89+bN/rXXPues852zzwfACAyWSDNRNYAMqUIeEeCDx8TG4eQuQIEKJHAAEAizZCFz/SMBAPh+PDwrIsAHvgABeNMLCADATZvAMByH/w/qQplcAYCEAcB0kThLCIAUAEB6jkKmAEBGAYCdmCZTAKAEAGDLY2LjAFAtAGAnf+bTAICd+Jl7AQBblCEVAaCRACATZYhEAGg7AKzPVopFAFgwABRmS8Q5ANgtADBJV2ZIALC3AMDOEAuyAAgMADBRiIUpAAR7AGDIIyN4AISZABRG8lc88SuuEOcqAAB4mbI8uSQ5RYFbCC1xB1dXLh4ozkkXKxQ2YQJhmkAuwnmZGTKBNA/g88wAAKCRFRHgg/P9eM4Ors7ONo62Dl8t6r8G/yJiYuP+5c+rcEAAAOF0ftH+LC+zGoA7BoBt/qIl7gRoXgugdfeLZrIPQLUAoOnaV/Nw+H48PEWhkLnZ2eXk5NhKxEJbYcpXff5nwl/AV/1s+X48/Pf14L7iJIEyXYFHBPjgwsz0TKUcz5IJhGLc5o9H/LcL//wd0yLESWK5WCoU41EScY5EmozzMqUiiUKSKcUl0v9k4t8s+wM+3zUAsGo+AXuRLahdYwP2SycQWHTA4vcAAPK7b8HUKAgDgGiD4c93/+8//UegJQCAZkmScQAAXkQkLlTKsz/HCAAARKCBKrBBG/TBGCzABhzBBdzBC/xgNoRCJMTCQhBCCmSAHHJgKayCQiiGzbAdKmAv1EAdNMBRaIaTcA4uwlW4Dj1wD/phCJ7BKLyBCQRByAgTYSHaiAFiilgjjggXmYX4IcFIBBKLJCDJiBRRIkuRNUgxUopUIFVIHfI9cgI5h1xGupE7yAAygvyGvEcxlIGyUT3UDLVDuag3GoRGogvQZHQxmo8WoJvQcrQaPYw2oefQq2gP2o8+Q8cwwOgYBzPEbDAuxsNCsTgsCZNjy7EirAyrxhqwVqwDu4n1Y8+xdwQSgUXACTYEd0IgYR5BSFhMWE7YSKggHCQ0EdoJNwkDhFHCJyKTqEu0JroR+cQYYjIxh1hILCPWEo8TLxB7iEPENyQSiUMyJ7mQAkmxpFTSEtJG0m5SI+ksqZs0SBojk8naZGuyBzmULCAryIXkneTD5DPkG+Qh8lsKnWJAcaT4U+IoUspqShnlEOU05QZlmDJBVaOaUt2ooVQRNY9aQq2htlKvUYeoEzR1mjnNgxZJS6WtopXTGmgXaPdpr+h0uhHdlR5Ol9BX0svpR+iX6AP0dwwNhhWDx4hnKBmbGAcYZxl3GK+YTKYZ04sZx1QwNzHrmOeZD5lvVVgqtip8FZHKCpVKlSaVGyovVKmqpqreqgtV81XLVI+pXlN9rkZVM1PjqQnUlqtVqp1Q61MbU2epO6iHqmeob1Q/pH5Z/YkGWcNMw09DpFGgsV/jvMYgC2MZs3gsIWsNq4Z1gTXEJrHN2Xx2KruY/R27iz2qqaE5QzNKM1ezUvOUZj8H45hx+Jx0TgnnKKeX836K3hTvKeIpG6Y0TLkxZVxrqpaXllirSKtRq0frvTau7aedpr1Fu1n7gQ5Bx0onXCdHZ4/OBZ3nU9lT3acKpxZNPTr1ri6qa6UbobtEd79up+6Ynr5egJ5Mb6feeb3n+hx9L/1U/W36p/VHDFgGswwkBtsMzhg8xTVxbzwdL8fb8VFDXcNAQ6VhlWGX4YSRudE8o9VGjUYPjGnGXOMk423GbcajJgYmISZLTepN7ppSTbmmKaY7TDtMx83MzaLN1pk1mz0x1zLnm+eb15vft2BaeFostqi2uGVJsuRaplnutrxuhVo5WaVYVVpds0atna0l1rutu6cRp7lOk06rntZnw7Dxtsm2qbcZsOXYBtuutm22fWFnYhdnt8Wuw+6TvZN9un2N/T0HDYfZDqsdWh1+c7RyFDpWOt6azpzuP33F9JbpL2dYzxDP2DPjthPLKcRpnVOb00dnF2e5c4PziIuJS4LLLpc+Lpsbxt3IveRKdPVxXeF60vWdm7Obwu2o26/uNu5p7ofcn8w0nymeWTNz0MPIQ+BR5dE/C5+VMGvfrH5PQ0+BZ7XnIy9jL5FXrdewt6V3qvdh7xc+9j5yn+M+4zw33jLeWV/MN8C3yLfLT8Nvnl+F30N/I/9k/3r/0QCngCUBZwOJgUGBWwL7+Hp8Ib+OPzrbZfay2e1BjKC5QRVBj4KtguXBrSFoyOyQrSH355jOkc5pDoVQfujW0Adh5mGLw34MJ4WHhVeGP45wiFga0TGXNXfR3ENz30T6RJZE3ptnMU85ry1KNSo+qi5qPNo3ujS6P8YuZlnM1VidWElsSxw5LiquNm5svt/87fOH4p3iC+N7F5gvyF1weaHOwvSFpxapLhIsOpZATIhOOJTwQRAqqBaMJfITdyWOCnnCHcJnIi/RNtGI2ENcKh5O8kgqTXqS7JG8NXkkxTOlLOW5hCepkLxMDUzdmzqeFpp2IG0yPTq9MYOSkZBxQqohTZO2Z+pn5mZ2y6xlhbL+xW6Lty8elQfJa7OQrAVZLQq2QqboVFoo1yoHsmdlV2a/zYnKOZarnivN7cyzytuQN5zvn//tEsIS4ZK2pYZLVy0dWOa9rGo5sjxxedsK4xUFK4ZWBqw8uIq2Km3VT6vtV5eufr0mek1rgV7ByoLBtQFr6wtVCuWFfevc1+1dT1gvWd+1YfqGnRs+FYmKrhTbF5cVf9go3HjlG4dvyr+Z3JS0qavEuWTPZtJm6ebeLZ5bDpaql+aXDm4N2dq0Dd9WtO319kXbL5fNKNu7g7ZDuaO/PLi8ZafJzs07P1SkVPRU+lQ27tLdtWHX+G7R7ht7vPY07NXbW7z3/T7JvttVAVVN1WbVZftJ+7P3P66Jqun4lvttXa1ObXHtxwPSA/0HIw6217nU1R3SPVRSj9Yr60cOxx++/p3vdy0NNg1VjZzG4iNwRHnk6fcJ3/ceDTradox7rOEH0x92HWcdL2pCmvKaRptTmvtbYlu6T8w+0dbq3nr8R9sfD5w0PFl5SvNUyWna6YLTk2fyz4ydlZ19fi753GDborZ752PO32oPb++6EHTh0kX/i+c7vDvOXPK4dPKy2+UTV7hXmq86X23qdOo8/pPTT8e7nLuarrlca7nuer21e2b36RueN87d9L158Rb/1tWeOT3dvfN6b/fF9/XfFt1+cif9zsu72Xcn7q28T7xf9EDtQdlD3YfVP1v+3Njv3H9qwHeg89HcR/cGhYPP/pH1jw9DBY+Zj8uGDYbrnjg+OTniP3L96fynQ89kzyaeF/6i/suuFxYvfvjV69fO0ZjRoZfyl5O/bXyl/erA6xmv28bCxh6+yXgzMV70VvvtwXfcdx3vo98PT+R8IH8o/2j5sfVT0Kf7kxmTk/8EA5jz/GMzLdsAAAAgY0hSTQAAeiUAAICDAAD5/wAAgOkAAHUwAADqYAAAOpgAABdvkl/FRgAAA6ZJREFUeNqM001IY1cUB/D/fYmm2sbR2lC1zYlgoRG6MpEyBlpxM9iFIGKFIm3s0lCKjOByhCLZCFqLBF1YFVJdSRbdFHRhBbULtRuFVBTzYRpJgo2mY5OX5N9Fo2TG+eiFA/dd3vvd8+65ByTxshARTdf1JySp6/oTEdFe9T5eg5lIcnBwkCSZyWS+exX40oyur68/KxaLf5Okw+H4X+A9JBaLfUySZ2dnnJqaosPhIAACeC34DJRKpb7IZrMcHx+nwWCgUopGo/EOKwf9fn/1CzERUevr6+9ls1mOjIwQAH0+H4PBIKPR6D2ofAQCgToRUeVYJUkuLy8TANfW1kiS8/PzCy84Mw4MDBAAZ2dnmc/nub+/X0MSEBF1cHDwMJVKsaGhgV6vl+l0mqOjo1+KyKfl1dze3l4NBoM/PZ+diFSLiIKIGBOJxA9bW1sEwNXVVSaTyQMRaRaRxrOzs+9J8ujoaE5EPhQRq67rcZ/PRwD0+/3Udf03EdEgIqZisZibnJykwWDg4eEhd3Z2xkXELCJvPpdBrYjUiEhL+Xo4HH4sIhUaAKNSqiIcDsNkMqG+vh6RSOQQQM7tdhsAQCkFAHC73UUATxcWFqypVApmsxnDw8OwWq2TADQNgAYAFosF+XweyWQSdru9BUBxcXFRB/4rEgDcPouIIx6P4+bmBi0tLSCpAzBqAIqnp6c/dnZ2IpfLYXNzE62traMADACKNputpr+/v8lms9UAKAAwiMjXe3t7KBQKqKurQy6Xi6K0i2l6evpROp1mbW0t29vbGY/Hb8/IVIqq2zlJXl1dsaOjg2azmefn5wwEAl+JSBVExCgi75PkzMwMlVJsbGxkIpFgPp8PX15ePopEIs3JZPITXdf/iEajbGpqolKKExMT1HWdHo/nIxGpgIgoEXnQ3d39kCTHxsYIgC6Xi3NzcwyHw8xkMozFYlxaWmJbWxuVUuzt7WUul6PX6/1cRN4WEe2uA0SkaWVl5XGpRVhdXU0A1DSNlZWVdz3qdDrZ09PDWCzG4+Pjn0XEWvp9KJKw2WwKwBsA3gHQHAqFfr24uMDGxgZ2d3cRiUQAAHa7HU6nE319fTg5Ofmlq6vrGwB/AngaCoWK6rbsNptNA1AJoA7Aux6Pp3NoaMhjsVg+QNmIRqO/u1yubwFEASRKUAEA7rASqABUAKgC8KAUb5XWCOAfAFcA/gJwDSB7C93DylCtdM8qABhLc5TumV6KQigUeubjfwcAHkQJ94ndWeYAAAAASUVORK5CYII=":IMAGE_PATH+"/handle-rotate.png",19,21);mxVertexHandler.prototype.handleImage=HoverIcons.prototype.mainHandle;mxVertexHandler.prototype.secondaryHandleImage=HoverIcons.prototype.secondaryHandle;mxEdgeHandler.prototype.handleImage=HoverIcons.prototype.mainHandle;mxEdgeHandler.prototype.terminalHandleImage=HoverIcons.prototype.terminalHandle;mxEdgeHandler.prototype.fixedHandleImage=HoverIcons.prototype.fixedHandle;mxEdgeHandler.prototype.labelHandleImage=HoverIcons.prototype.secondaryHandle;mxOutline.prototype.sizerImage=HoverIcons.prototype.mainHandle;if(window.Sidebar!=null){Sidebar.prototype.triangleUp=HoverIcons.prototype.triangleUp;Sidebar.prototype.triangleRight=HoverIcons.prototype.triangleRight;Sidebar.prototype.triangleDown=HoverIcons.prototype.triangleDown;Sidebar.prototype.triangleLeft=HoverIcons.prototype.triangleLeft;Sidebar.prototype.refreshTarget=HoverIcons.prototype.refreshTarget;Sidebar.prototype.roundDrop=HoverIcons.prototype.roundDrop}if(!mxClient.IS_SVG){new Image().src=HoverIcons.prototype.mainHandle.src;new Image().src=HoverIcons.prototype.fixedHandle.src;new Image().src=HoverIcons.prototype.terminalHandle.src;new Image().src=HoverIcons.prototype.secondaryHandle.src;new Image().src=HoverIcons.prototype.rotationHandle.src;new Image().src=HoverIcons.prototype.triangleUp.src;new Image().src=HoverIcons.prototype.triangleRight.src;new Image().src=HoverIcons.prototype.triangleDown.src;new Image().src=HoverIcons.prototype.triangleLeft.src;new Image().src=HoverIcons.prototype.refreshTarget.src;new Image().src=HoverIcons.prototype.roundDrop.src}mxVertexHandler.prototype.rotationEnabled=true;mxVertexHandler.prototype.manageSizers=true;mxVertexHandler.prototype.livePreview=true;mxRubberband.prototype.defaultOpacity=30;mxConnectionHandler.prototype.outlineConnect=true;mxCellHighlight.prototype.keepOnTop=true;mxVertexHandler.prototype.parentHighlightEnabled=true;mxVertexHandler.prototype.rotationHandleVSpacing=-20;mxEdgeHandler.prototype.parentHighlightEnabled=true;mxEdgeHandler.prototype.dblClickRemoveEnabled=true;mxEdgeHandler.prototype.straightRemoveEnabled=true;mxEdgeHandler.prototype.virtualBendsEnabled=true;mxEdgeHandler.prototype.mergeRemoveEnabled=true;mxEdgeHandler.prototype.manageLabelHandle=true;mxEdgeHandler.prototype.outlineConnect=true;mxEdgeHandler.prototype.isAddVirtualBendEvent=function(I){return !mxEvent.isShiftDown(I.getEvent())};mxEdgeHandler.prototype.isCustomHandleEvent=function(I){return !mxEvent.isShiftDown(I.getEvent())};if(Graph.touchStyle){if(mxClient.IS_TOUCH||navigator.maxTouchPoints>0||navigator.msMaxTouchPoints>0){mxShape.prototype.svgStrokeTolerance=18;mxVertexHandler.prototype.tolerance=12;mxEdgeHandler.prototype.tolerance=12;Graph.prototype.tolerance=12;mxVertexHandler.prototype.rotationHandleVSpacing=-24;mxConstraintHandler.prototype.getTolerance=function(I){return(mxEvent.isMouseEvent(I.getEvent()))?4:this.graph.getTolerance()}}mxPanningHandler.prototype.isPanningTrigger=function(J){var I=J.getEvent();return(J.getState()==null&&!mxEvent.isMouseEvent(I))||(mxEvent.isPopupTrigger(I)&&(J.getState()==null||mxEvent.isControlDown(I)||mxEvent.isShiftDown(I)))};var q=mxGraphHandler.prototype.mouseDown;mxGraphHandler.prototype.mouseDown=function(I,J){q.apply(this,arguments);if(mxEvent.isTouchEvent(J.getEvent())&&this.graph.isCellSelected(J.getCell())&&this.graph.getSelectionCount()>1){this.delayedSelection=false}}}else{mxPanningHandler.prototype.isPanningTrigger=function(J){var I=J.getEvent();return(mxEvent.isLeftMouseButton(I)&&((this.useLeftButtonForPanning&&J.getState()==null)||(mxEvent.isControlDown(I)&&!mxEvent.isShiftDown(I))))||(this.usePopupTrigger&&mxEvent.isPopupTrigger(I))}}mxRubberband.prototype.isSpaceEvent=function(I){return this.graph.isEnabled()&&!this.graph.isCellLocked(this.graph.getDefaultParent())&&mxEvent.isControlDown(I.getEvent())&&mxEvent.isShiftDown(I.getEvent())};mxRubberband.prototype.mouseUp=function(M,N){var O=this.div!=null&&this.div.style.display!="none";var I=null;var Q=null;var T=null;var S=null;if(this.first!=null&&this.currentX!=null&&this.currentY!=null){I=this.first.x;Q=this.first.y;T=(this.currentX-I)/this.graph.view.scale;S=(this.currentY-Q)/this.graph.view.scale;if(!mxEvent.isAltDown(N.getEvent())){T=this.graph.snap(T);S=this.graph.snap(S)}}this.reset();if(O){if(mxEvent.isAltDown(N.getEvent())&&this.graph.isToggleEvent(N.getEvent())){var P=new mxRectangle(this.x,this.y,this.width,this.height);var R=this.graph.getCells(P.x,P.y,P.width,P.height);this.graph.removeSelectionCells(R)}else{if(this.isSpaceEvent(N)){this.graph.model.beginUpdate();try{var R=this.graph.getCellsBeyond(I,Q,this.graph.getDefaultParent(),true,true);for(var L=0;L<R.length;L++){if(this.graph.isCellMovable(R[L])){var K=this.graph.view.getState(R[L]);var J=this.graph.getCellGeometry(R[L]);if(K!=null&&J!=null){J=J.clone();J.translate(T,S);this.graph.model.setGeometry(R[L],J)}}}}finally{this.graph.model.endUpdate()}}else{var P=new mxRectangle(this.x,this.y,this.width,this.height);this.graph.selectRegion(P,N.getEvent())}}N.consume()}};mxRubberband.prototype.mouseMove=function(L,M){if(!M.isConsumed()&&this.first!=null){var P=mxUtils.getScrollOrigin(this.graph.container);var K=mxUtils.getOffset(this.graph.container);P.x-=K.x;P.y-=K.y;var O=M.getX()+P.x;var N=M.getY()+P.y;var T=this.first.x-O;var S=this.first.y-N;var R=this.graph.tolerance;if(this.div!=null||Math.abs(T)>R||Math.abs(S)>R){if(this.div==null){this.div=this.createShape()}mxUtils.clearSelection();this.update(O,N);if(this.isSpaceEvent(M)){var Q=this.x+this.width;var I=this.y+this.height;var J=this.graph.view.scale;if(!mxEvent.isAltDown(M.getEvent())){this.width=this.graph.snap(this.width/J)*J;this.height=this.graph.snap(this.height/J)*J;if(!this.graph.isGridEnabled()){if(this.width<this.graph.tolerance){this.width=0}if(this.height<this.graph.tolerance){this.height=0}}if(this.x<this.first.x){this.x=Q-this.width}if(this.y<this.first.y){this.y=I-this.height}}this.div.style.borderStyle="dashed";this.div.style.backgroundColor="white";this.div.style.left=this.x+"px";this.div.style.top=this.y+"px";this.div.style.width=Math.max(0,this.width)+"px";this.div.style.height=this.graph.container.clientHeight+"px";this.div.style.borderWidth=(this.width<=0)?"0px 1px 0px 0px":"0px 1px 0px 1px";if(this.secondDiv==null){this.secondDiv=this.div.cloneNode(true);this.div.parentNode.appendChild(this.secondDiv)}this.secondDiv.style.left=this.x+"px";this.secondDiv.style.top=this.y+"px";this.secondDiv.style.width=this.graph.container.clientWidth+"px";this.secondDiv.style.height=Math.max(0,this.height)+"px";this.secondDiv.style.borderWidth=(this.height<=0)?"1px 0px 0px 0px":"1px 0px 1px 0px"}else{this.div.style.backgroundColor="";this.div.style.borderWidth="";this.div.style.borderStyle="";if(this.secondDiv!=null){this.secondDiv.parentNode.removeChild(this.secondDiv);this.secondDiv=null}}M.consume()}}};var l=mxRubberband.prototype.reset;mxRubberband.prototype.reset=function(){if(this.secondDiv!=null){this.secondDiv.parentNode.removeChild(this.secondDiv);this.secondDiv=null}l.apply(this,arguments)};var x=new Date().getTime();var a=0;var D=mxEdgeHandler.prototype.updatePreviewState;mxEdgeHandler.prototype.updatePreviewState=function(L,I,K,J){D.apply(this,arguments);if(K!=this.currentTerminalState){x=new Date().getTime();a=0}else{a=new Date().getTime()-x}this.currentTerminalState=K};var B=mxEdgeHandler.prototype.isOutlineConnectEvent;mxEdgeHandler.prototype.isOutlineConnectEvent=function(I){return(this.currentTerminalState!=null&&I.getState()==this.currentTerminalState&&a>2000)||((this.currentTerminalState==null||mxUtils.getValue(this.currentTerminalState.style,"outlineConnect","1")!="0")&&B.apply(this,arguments))};mxVertexHandler.prototype.isCustomHandleEvent=function(I){return !mxEvent.isShiftDown(I.getEvent())};mxEdgeHandler.prototype.createHandleShape=function(M,K){var I=M!=null&&M==0;var J=this.state.getVisibleTerminalState(I);var O=(M!=null&&(M==0||M>=this.state.absolutePoints.length-1||(this.constructor==mxElbowEdgeHandler&&M==2)))?this.graph.getConnectionConstraint(this.state,J,I):null;var Q=(O!=null)?this.graph.getConnectionPoint(this.state.getVisibleTerminalState(I),O):null;var L=(Q!=null)?this.fixedHandleImage:((O!=null&&J!=null)?this.terminalHandleImage:this.handleImage);if(L!=null){var N=new mxImageShape(new mxRectangle(0,0,L.width,L.height),L.src);N.preserveImageAspect=false;return N}else{var P=mxConstants.HANDLE_SIZE;if(this.preferHtml){P-=1}return new mxRectangleShape(new mxRectangle(0,0,P,P),mxConstants.HANDLE_FILLCOLOR,mxConstants.HANDLE_STROKECOLOR)}};var i=mxVertexHandler.prototype.createSizerShape;mxVertexHandler.prototype.createSizerShape=function(J,I,K){this.handleImage=(I==mxEvent.ROTATION_HANDLE)?HoverIcons.prototype.rotationHandle:(I==mxEvent.LABEL_HANDLE)?this.secondaryHandleImage:this.handleImage;return i.apply(this,arguments)};var g=mxGraphHandler.prototype.getBoundingBox;mxGraphHandler.prototype.getBoundingBox=function(J){if(J!=null&&J.length==1){var I=this.graph.getModel();var K=I.getParent(J[0]);var M=this.graph.getCellGeometry(J[0]);if(I.isEdge(K)&&M!=null&&M.relative){var L=this.graph.view.getState(J[0]);if(L!=null&&L.width<2&&L.height<2&&L.text!=null&&L.text.boundingBox!=null){return mxRectangle.fromRectangle(L.text.boundingBox)}}}return g.apply(this,arguments)};var n=mxVertexHandler.prototype.getSelectionBounds;mxVertexHandler.prototype.getSelectionBounds=function(K){var I=this.graph.getModel();var J=I.getParent(K.cell);var L=this.graph.getCellGeometry(K.cell);if(I.isEdge(J)&&L!=null&&L.relative&&K.width<2&&K.height<2&&K.text!=null&&K.text.boundingBox!=null){var M=K.text.unrotatedBoundingBox||K.text.boundingBox;return new mxRectangle(Math.round(M.x),Math.round(M.y),Math.round(M.width),Math.round(M.height))}else{return n.apply(this,arguments)}};var C=mxVertexHandler.prototype.mouseDown;mxVertexHandler.prototype.mouseDown=function(J,L){var I=this.graph.getModel();var K=I.getParent(this.state.cell);var N=this.graph.getCellGeometry(this.state.cell);var M=this.getHandleForEvent(L);if(M==mxEvent.ROTATION_HANDLE||!I.isEdge(K)||N==null||!N.relative||this.state==null||this.state.width>=2||this.state.height>=2){C.apply(this,arguments)}};mxVertexHandler.prototype.isRotationHandleVisible=function(){return this.graph.isEnabled()&&this.rotationEnabled&&this.graph.isCellRotatable(this.state.cell)&&(mxGraphHandler.prototype.maxCells<=0||this.graph.getSelectionCount()<mxGraphHandler.prototype.maxCells)};mxVertexHandler.prototype.rotateClick=function(){this.state.view.graph.turnShapes([this.state.cell])};var s=mxVertexHandler.prototype.mouseMove;mxVertexHandler.prototype.mouseMove=function(I,J){s.apply(this,arguments);if(this.graph.graphHandler.first!=null){if(this.rotationShape!=null&&this.rotationShape.node!=null){this.rotationShape.node.style.display="none"}}};var c=mxVertexHandler.prototype.mouseUp;mxVertexHandler.prototype.mouseUp=function(I,J){c.apply(this,arguments);if(this.rotationShape!=null&&this.rotationShape.node!=null){this.rotationShape.node.style.display=(this.graph.getSelectionCount()==1)?"":"none"}};var v=mxVertexHandler.prototype.init;mxVertexHandler.prototype.init=function(){v.apply(this,arguments);var K=false;if(this.rotationShape!=null){this.rotationShape.node.setAttribute("title",mxResources.get("rotateTooltip"))}var J=mxUtils.bind(this,function(){if(this.rotationShape!=null&&this.rotationShape.node!=null){this.rotationShape.node.style.display=(this.graph.getSelectionCount()==1)?"":"none"}if(this.specialHandle!=null){this.specialHandle.node.style.display=(this.graph.isEnabled()&&this.graph.getSelectionCount()<this.graph.graphHandler.maxCells)?"":"none"}this.redrawHandles()});this.selectionHandler=mxUtils.bind(this,function(M,L){J()});this.graph.getSelectionModel().addListener(mxEvent.CHANGE,this.selectionHandler);this.changeHandler=mxUtils.bind(this,function(M,L){this.updateLinkHint(this.graph.getLinkForCell(this.state.cell));J()});this.graph.getModel().addListener(mxEvent.CHANGE,this.changeHandler);this.editingHandler=mxUtils.bind(this,function(M,L){this.redrawHandles()});this.graph.addListener(mxEvent.EDITING_STOPPED,this.editingHandler);var I=this.graph.getLinkForCell(this.state.cell);this.updateLinkHint(I);if(I!=null){K=true}if(K){this.redrawHandles()}};mxVertexHandler.prototype.updateLinkHint=function(O){if(O==null||this.graph.getSelectionCount()>1){if(this.linkHint!=null){this.linkHint.parentNode.removeChild(this.linkHint);this.linkHint=null}}else{if(O!=null){if(this.linkHint==null){this.linkHint=F();this.linkHint.style.padding="4px 10px 6px 10px";this.linkHint.style.fontSize="90%";this.linkHint.style.opacity="1";this.linkHint.style.filter="";this.updateLinkHint(O);this.graph.container.appendChild(this.linkHint)}var M=O;var I=60;var N=36;var L=20;if(M.length>I){M=M.substring(0,N)+"..."+M.substring(M.length-L)}var K=document.createElement("a");K.setAttribute("href",this.graph.getAbsoluteUrl(O));K.setAttribute("title",O);if(this.graph.linkTarget!=null){K.setAttribute("target",this.graph.linkTarget)}mxUtils.write(K,M);this.linkHint.innerHTML="";this.linkHint.appendChild(K);if(this.graph.isEnabled()&&typeof this.graph.editLink==="function"){var J=document.createElement("img");J.setAttribute("src",IMAGE_PATH+"/edit.gif");J.setAttribute("title",mxResources.get("editLink"));J.setAttribute("width","11");J.setAttribute("height","11");J.style.marginLeft="10px";J.style.marginBottom="-1px";J.style.cursor="pointer";this.linkHint.appendChild(J);mxEvent.addListener(J,"click",mxUtils.bind(this,function(P){this.graph.setSelectionCell(this.state.cell);this.graph.editLink();mxEvent.consume(P)}))}}}};mxEdgeHandler.prototype.updateLinkHint=mxVertexHandler.prototype.updateLinkHint;var z=mxEdgeHandler.prototype.init;mxEdgeHandler.prototype.init=function(){z.apply(this,arguments);this.constraintHandler.isEnabled=mxUtils.bind(this,function(){return this.state.view.graph.connectionHandler.isEnabled()});var J=mxUtils.bind(this,function(){if(this.linkHint!=null){this.linkHint.style.display=(this.graph.getSelectionCount()==1)?"":"none"}if(this.labelShape!=null){this.labelShape.node.style.display=(this.graph.isEnabled()&&this.graph.getSelectionCount()<this.graph.graphHandler.maxCells)?"":"none"}});this.selectionHandler=mxUtils.bind(this,function(L,K){J()});this.graph.getSelectionModel().addListener(mxEvent.CHANGE,this.selectionHandler);this.changeHandler=mxUtils.bind(this,function(L,K){this.updateLinkHint(this.graph.getLinkForCell(this.state.cell));J();this.redrawHandles()});this.graph.getModel().addListener(mxEvent.CHANGE,this.changeHandler);var I=this.graph.getLinkForCell(this.state.cell);if(I!=null){this.updateLinkHint(I);this.redrawHandles()}};var p=mxConnectionHandler.prototype.init;mxConnectionHandler.prototype.init=function(){p.apply(this,arguments);this.constraintHandler.isEnabled=mxUtils.bind(this,function(){return this.graph.connectionHandler.isEnabled()})};var r=mxVertexHandler.prototype.redrawHandles;mxVertexHandler.prototype.redrawHandles=function(){r.apply(this);if(this.state!=null&&this.linkHint!=null){var L=new mxPoint(this.state.getCenterX(),this.state.getCenterY());var J=new mxRectangle(this.state.x,this.state.y-22,this.state.width+24,this.state.height+22);var K=mxUtils.getBoundingBox(J,this.state.style[mxConstants.STYLE_ROTATION]||"0",L);var I=(K!=null)?mxUtils.getBoundingBox(this.state,this.state.style[mxConstants.STYLE_ROTATION]||"0"):this.state;if(K==null){K=this.state}this.linkHint.style.left=Math.round(I.x+(I.width-this.linkHint.clientWidth)/2)+"px";this.linkHint.style.top=Math.round(K.y+K.height+this.verticalOffset/2+6+this.state.view.graph.tolerance)+"px"}};var H=mxVertexHandler.prototype.reset;mxVertexHandler.prototype.reset=function(){H.apply(this,arguments);if(this.rotationShape!=null&&this.rotationShape.node!=null){this.rotationShape.node.style.display=(this.graph.getSelectionCount()==1)?"":"none"}};var y=mxVertexHandler.prototype.destroy;mxVertexHandler.prototype.destroy=function(){y.apply(this,arguments);if(this.linkHint!=null){this.linkHint.parentNode.removeChild(this.linkHint);this.linkHint=null}if(this.selectionHandler!=null){this.graph.getSelectionModel().removeListener(this.selectionHandler);this.selectionHandler=null}if(this.changeHandler!=null){this.graph.getModel().removeListener(this.changeHandler);this.changeHandler=null}if(this.editingHandler!=null){this.graph.removeListener(this.editingHandler);this.editingHandler=null}};var f=mxEdgeHandler.prototype.redrawHandles;mxEdgeHandler.prototype.redrawHandles=function(){if(this.marker!=null){f.apply(this);if(this.state!=null&&this.linkHint!=null){var I=this.state;if(this.state.text!=null&&this.state.text.bounds!=null){I=new mxRectangle(I.x,I.y,I.width,I.height);I.add(this.state.text.bounds)}this.linkHint.style.left=Math.round(I.x+(I.width-this.linkHint.clientWidth)/2)+"px";this.linkHint.style.top=Math.round(I.y+I.height+6+this.state.view.graph.tolerance)+"px"}}};var h=mxEdgeHandler.prototype.reset;mxEdgeHandler.prototype.reset=function(){h.apply(this,arguments);if(this.linkHint!=null){this.linkHint.style.visibility=""}};var o=mxEdgeHandler.prototype.destroy;mxEdgeHandler.prototype.destroy=function(){o.apply(this,arguments);if(this.linkHint!=null){this.linkHint.parentNode.removeChild(this.linkHint);this.linkHint=null}if(this.selectionHandler!=null){this.graph.getSelectionModel().removeListener(this.selectionHandler);this.selectionHandler=null}if(this.changeHandler!=null){this.graph.getModel().removeListener(this.changeHandler);this.changeHandler=null}}})()};