Editor=function(b,a,c,d){mxEventSource.call(this);this.chromeless=(b!=null)?b:this.chromeless;this.initStencilRegistry();this.graph=d||this.createGraph(a,c);this.undoManager=this.createUndoManager();this.status="";this.getOrCreateFilename=function(){return this.filename||mxResources.get("drawing",[Editor.pageCounter])+".xml"};this.getFilename=function(){return this.filename};this.setStatus=function(e){this.status=e;this.fireEvent(new mxEventObject("statusChanged"))};this.getStatus=function(){return this.status};this.graphChangeListener=function(f,e){var g=(e!=null)?e.getProperty("edit"):null;if(g==null||!g.ignoreEdit){this.setModified(true)}};this.graph.getModel().addListener(mxEvent.CHANGE,mxUtils.bind(this,function(){this.graphChangeListener.apply(this,arguments)}));this.graph.resetViewOnRootChange=false;this.init()};Editor.pageCounter=0;(function(){try{var b=window;while(b.opener!=null&&typeof b.opener.Editor!=="undefined"&&!isNaN(b.opener.Editor.pageCounter)&&b.opener!=b){b=b.opener}if(b!=null){b.Editor.pageCounter++;Editor.pageCounter=b.Editor.pageCounter}}catch(a){}})();Editor.useLocalStorage=typeof(Storage)!="undefined"&&mxClient.IS_IOS;Editor.helpImage=(mxClient.IS_SVG)?"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAMAAAAoLQ9TAAAAXVBMVEUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAC5BxTwAAAAH3RSTlMAlUF8boNQIE0LBgOgkGlHNSwqFIx/dGVUOjApmV9ezNACSAAAAIVJREFUGNNtjNsOgzAMQ5NeoVcKDAZs+//PXLKI8YKlWvaRU7jXuFpb9qsbdK05XILUiE8JHQox1Pv3OgFUzf1AGqWqUg+QBwLF0YAeegBlCNgRWOpB5vUfTCmeoHQ/wNdy0jLH/cM+b+wLTw4n/7ACEmHVVy8h6qy8V7MNcGowWpsNbvUFcGUEdSi1s/oAAAAASUVORK5CYII=":IMAGE_PATH+"/help.png";Editor.checkmarkImage=(mxClient.IS_SVG)?"data:image/gif;base64,R0lGODlhFQAVAMQfAGxsbHx8fIqKioaGhvb29nJycvr6+sDAwJqamltbW5OTk+np6YGBgeTk5Ly8vJiYmP39/fLy8qWlpa6ursjIyOLi4vj4+N/f3+3t7fT09LCwsHZ2dubm5r6+vmZmZv///yH/C1hNUCBEYXRhWE1QPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4gPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNS4wLWMwNjAgNjEuMTM0Nzc3LCAyMDEwLzAyLzEyLTE3OjMyOjAwICAgICAgICAiPiA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPiA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtbG5zOnhtcE1NPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvbW0vIiB4bWxuczpzdFJlZj0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL3NUeXBlL1Jlc291cmNlUmVmIyIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ1M1IFdpbmRvd3MiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6OEY4NTZERTQ5QUFBMTFFMUE5MTVDOTM5MUZGMTE3M0QiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6OEY4NTZERTU5QUFBMTFFMUE5MTVDOTM5MUZGMTE3M0QiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDo4Rjg1NkRFMjlBQUExMUUxQTkxNUM5MzkxRkYxMTczRCIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDo4Rjg1NkRFMzlBQUExMUUxQTkxNUM5MzkxRkYxMTczRCIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PgH//v38+/r5+Pf29fTz8vHw7+7t7Ovq6ejn5uXk4+Lh4N/e3dzb2tnY19bV1NPS0dDPzs3My8rJyMfGxcTDwsHAv769vLu6ubi3trW0s7KxsK+urayrqqmop6alpKOioaCfnp2cm5qZmJeWlZSTkpGQj46NjIuKiYiHhoWEg4KBgH9+fXx7enl4d3Z1dHNycXBvbm1sa2ppaGdmZWRjYmFgX15dXFtaWVhXVlVUU1JRUE9OTUxLSklIR0ZFRENCQUA/Pj08Ozo5ODc2NTQzMjEwLy4tLCsqKSgnJiUkIyIhIB8eHRwbGhkYFxYVFBMSERAPDg0MCwoJCAcGBQQDAgEAACH5BAEAAB8ALAAAAAAVABUAAAVI4CeOZGmeaKqubKtylktSgCOLRyLd3+QJEJnh4VHcMoOfYQXQLBcBD4PA6ngGlIInEHEhPOANRkaIFhq8SuHCE1Hb8Lh8LgsBADs=":IMAGE_PATH+"/checkmark.gif";Editor.maximizeImage="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABUAAAAVBAMAAABbObilAAAAElBMVEUAAAAAAAAAAAAAAAAAAAAAAADgKxmiAAAABXRSTlMA758vX1Pw3BoAAABJSURBVAjXY8AJQkODGBhUQ0MhbAUGBiYY24CBgRnGFmZgMISwgwwDGRhEhVVBbAVmEQYGRwMmBjIAQi/CTIRd6G5AuA3dzYQBAHj0EFdHkvV4AAAAAElFTkSuQmCC";Editor.zoomOutImage="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABUAAAAVBAMAAABbObilAAAAElBMVEUAAAAAAAAsLCxxcXEhISFgYGChjTUxAAAAAXRSTlMAQObYZgAAAEdJREFUCNdjIAMwCQrB2YKCggJQJqMwA7MglK1owMBgqABVApITgLJZXFxgbIQ4Qj3CHIT5ggoIe5kgNkM1KSDYKBKqxPkDAPo5BAZBE54hAAAAAElFTkSuQmCC";Editor.zoomInImage="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABUAAAAVBAMAAABbObilAAAAElBMVEUAAAAAAAAsLCwhISFxcXFgYGBavKaoAAAAAXRSTlMAQObYZgAAAElJREFUCNdjIAMwCQrB2YKCggJQJqMIA4sglK3owMzgqABVwsDMwCgAZTMbG8PYCHGEeoQ5CPMFFRD2MkFshmpSQLBRJFSJ8wcAEqcEM2uhl2MAAAAASUVORK5CYII=";Editor.zoomFitImage="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABUAAAAVBAMAAABbObilAAAAD1BMVEUAAAAAAAAwMDBwcHBgYGC1xl09AAAAAXRSTlMAQObYZgAAAEFJREFUCNdjIAMwCQrB2YKCggJQJqMwA7MglK1owMBgqABVApITwMdGqEeYgzBfUAFhLxPEZqgmBQQbRUKFOH8AAK5OA3lA+FFOAAAAAElFTkSuQmCC";Editor.layersImage="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABUAAAAVCAMAAACeyVWkAAAAaVBMVEUAAAAgICAICAgdHR0PDw8WFhYICAgLCwsXFxcvLy8ODg4uLi4iIiIqKiokJCQYGBgKCgonJycFBQUCAgIqKiocHBwcHBwODg4eHh4cHBwnJycJCQkUFBQqKiojIyMuLi4ZGRkgICAEBATOWYXAAAAAGnRSTlMAD7+fnz8/H7/ff18/77+vr5+fn39/b28fH2xSoKsAAACQSURBVBjTrYxJEsMgDARZZMAY73sgCcn/HxnhKtnk7j6oRq0psfuoyndZ/SuODkHPLzfVT6KeyPePnJ7KrnkRjWMXTn4SMnN8mXe2SSM3ts8L/ZUxxrbAULSYJJULE0Iw9pjpenoICcgcX61mGgTgtCv9Be99pzCoDhNQWQnchD1mup5++CYGcoQexajZbfwAj/0MD8ZOaUgAAAAASUVORK5CYII=";Editor.previousImage="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAABmJLR0QA/wD/AP+gvaeTAAAAh0lEQVQ4je3UsQnCUBCA4U8hpa1NsoEjpHQJS0dxADdwEMuMIJkgA1hYChbGQgMi+JC8q4L/AB/vDu7x74cWWEZhJU44RmA1zujR5GIbXF9YNrjD/Q0bDRY4fEBZ4P4LlgTnCbAf84pUM8/9hY08tMUtEoQ1LpEgrNBFglChFXR6Q6GfwwR6AGKJMF74Vtt3AAAAAElFTkSuQmCC";Editor.nextImage="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAABmJLR0QA/wD/AP+gvaeTAAAAi0lEQVQ4jeXUIQ7CUAwA0MeGxWI2yylwnALJUdBcgYvM7QYLmjOQIAkIPmJZghiIvypoUtX0tfnJL38X5ZfaEgUeUcManFBHgS0SLlhHggk3bCPBhCf2keCQR8wjwYTDp6YiZxJmOU1jGw7vGALescuBxsArNlOwd/CM1VSM/ut1qCIw+uOwiMJ+OF4CQzBCXm3hyAAAAABJRU5ErkJggg==";Editor.zoomOutLargeImage="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAAilBMVEUAAAD////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////2N2iNAAAALXRSTlMA+vTcKMM96GRBHwXxi0YaX1HLrKWhiHpWEOnOr52Vb2xKSDcT19PKv5l/Ngdk8+viAAABJklEQVQ4y4WT2XaDMAxEvWD2nSSUNEnTJN3r//+9Sj7ILAY6L0ijC4ONYVZRpo6cByrz2YKSUGorGTpz71lPVHvT+avoB5wIkU/mxk8veceSuNoLg44IzziXjvpih72wKQnm8yc2UoiP/LAd8jQfe2Xf4Pq+2EyYIvv9wbzHHCgwxDdlBtWZOdqDfTCVgqpygQpsZaojVAVc9UjQxnAJDIBhiQv84tq3gMQCAVTxVoSibXJf8tMuc7e1TB/DCmejBNg/w1Y3c+AM5vv4w7xM59/oXamrHaLVqPQ+OTCnmMZxgz0SdL5zji0/ld6j88qGa5KIiBB6WeJGKfUKwSMKLuXgvl1TW0tm5R9UQL/efSDYsnzxD8CinhBsTTdugJatKpJwf8v+ADb8QmvW7AeAAAAAAElFTkSuQmCC";Editor.zoomInLargeImage="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAAilBMVEUAAAD////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////2N2iNAAAALXRSTlMA+vTcKMM96GRBHwXxi0YaX1HLrKWhiHpWEOnOr52Vb2xKSDcT19PKv5l/Ngdk8+viAAABKElEQVQ4y4WT6WKCMBCENwkBwn2oFKvWqr3L+79es4EkQIDOH2d3Pxk2ABiJlB8JCXjqw4LikHVGLHTm3nM3UeVN5690GBBN0GwyV/3kkrUQR+WeKnREeKpzaXWd77CmJiXGfPIEI4V4yQ9TIW/ntlcMBe731Vts9w5TWG8F5j3mQI4hvrKpdGeYA7CX9qAcl650gVJartxRuhyHVghF8idQAIbFLvCLu28BsQEC6aKtCK6Pyb3JT7PmbmtNH8Ny56CotD/2qOs5cJbuffxgXmCib+xddVU5RNOhkvvkhTlFehzVWCOh3++MYElOhfdovaImnRYVmqDdsuhNp1QrBBE6uGC2+3ZNjGdg5B94oD+9uyVgWT79BwAxEBTWdOu3bWBVgsn/N/AHUD9IC01Oe40AAAAASUVORK5CYII=";Editor.actualSizeLargeImage="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAAilBMVEUAAAD////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////2N2iNAAAALXRSTlMA+vTcKMM96GRBHwXxi0YaX1HLrKWhiHpWEOnOr52Vb2xKSDcT19PKv5l/Ngdk8+viAAABIUlEQVQ4y4WT2XqDIBCFBxDc9yTWNEnTJN3r+79eGT4BEbXnaubMr8dBBaM450dCQp4LWFAascGIRd48eB4cNYE7f6XjgGiCFs5c+dml6CFN6j1V6IQIlHPpdV/usKcmJcV88gQTRXjLD9Mhb+fWq8YG9/uCmTCFjeeDeY85UGKIUGUuqzN42kv7oCouq9oHamlzVR1lVfpAIu1QVRiW+sAv7r4FpAYIZZVsRXB9TP5Dfpo1d1trCgzz1iiptH/sUbdz4CzN9+mLeXHn3+hdddd4RDegsrvzwZwSs2GLPRJidAqCLTlVwaMPqpYMWjTWBB2WRW86pVkhSKyDK2bdt2tmagZG4sBD/evdLQHLEvQfAOKRoLCmG1FAB6uKmby+gz+REDn7O5+EwQAAAABJRU5ErkJggg==";Editor.layersLargeImage="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAAmVBMVEUAAAD////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////+/v7///+bnZkkAAAAMnRSTlMABPr8ByiD88KsTi/rvJb272mjeUA1CuPe1M/KjVxYHxMP6KZ0S9nYzGRGGRaznpGIbzaGUf0AAAHESURBVDjLbZLZYoIwEEVDgLCjbKIgAlqXqt3m/z+uNwu1rcyDhjl3ktnYL7OY254C0VX3yWFZfzDrOClbbgKxi0YDHjwl4jbnRkXxJS/C1YP3DbBhD1n7Ex4uaAqdVDb3yJ/4J/3nJD2to/ngQz/DfUvzMp4JJ5sSCaF5oXmemgQDfDxzbi+Kq4sU+vNcuAmx94JtyOP2DD4Epz2asWSCz4Z/4fECxyNj9zC9xNLHcdPEO+awDKeSaUu0W4twZQiO2hYVisTR3RCtK/c1X6t4xMEpiGqXqVntEBLolkZZsKY4QtwH6jzq67dEHlJysB1aNOD3XT7n1UkasQN59L4yC2RELMDSeCRtz3yV22Ub3ozIUTknYx8JWqDdQxbUes98cR2kZtUSveF/bAhcedwEWmlxIkpZUy4XOCb6VBjjxHvbwo/1lBAHHi2JCr0NI570QhyHq/DhJoE2lLgyA4RVe6KmZ47O/3b86MCP0HWa73A8/C3SUc5Qc1ajt6fgpXJ+RGpMvDSchepZDOOQRcZVIKcK90x2D7etqtI+56+u6n3sPriO6nfphitR4+O2m3EbM7lh3me1FM1o+LMI887rN+s3/wZdTFlpNVJiOAAAAABJRU5ErkJggg==";Editor.closeLargeImage="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAAUVBMVEUAAAD///////////////////////////////////////////////////////////////////////////////////////////////////////8IN+deAAAAGnRSTlMAuvAIg/dDM/QlOeuFhj0S5s4vKgzjxJRQNiLSey0AAADNSURBVDjLfZLbEoMgDEQjRRRs1XqX///QNmOHJSnjPkHOGR7IEmeoGtJZstnwjqbRfIsmgEdtPCqe9Ynz7ZSc07rE2QiSc+qv8TvjRXA2PDUm3dpe82iJhOEUfxJJo3aCv+jKmRmH4lcCjCjeh9GWOdL/GZZkXH3PYYDrHBnfc4D/RVZf5sjoC1was+Y6HQxwaUxFvq/a0Pv343VCTxfBSRiB+ab3M3eiQZXmMNBJ3Y8pGRZtYQ7DgHMXJEdPLTaN/qBjzJOBc3nmNcbsA16bMR0oLqf+AAAAAElFTkSuQmCC";Editor.editLargeImage="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgAgMAAAAOFJJnAAAACVBMVEUAAAD///////9zeKVjAAAAAnRSTlMAgJsrThgAAABcSURBVBjThc6xDcAgDATAd8MQTEPW8TRUmYCGnzLRYyOlIV+dZFtvkICTFGqiJEzAG0/Uje9oL+e5Vu4F5yUYJxxqGKhQZ0eBvmgwYQLQaARKD1hbiPyDR0QOeAC31EyNe5X/kAAAAABJRU5ErkJggg==";Editor.previousLargeImage="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAAPFBMVEUAAAD////////////////////////////////////////////////////////////////////////////YSWgTAAAAE3RSTlMA7fci493c0MW8uJ6CZks4MxQHEZL6ewAAAFZJREFUOMvdkskRgDAMA4lDwg2B7b9XOlge/KKvdsa25KFb5XlRvxXC/DNBEv8IFNjBgGdDgXtFgTyhwDXiQAUHCvwa4Uv6mR6UR+1led2mVonvl+tML45qCQNQLIx7AAAAAElFTkSuQmCC";Editor.nextLargeImage="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAAPFBMVEUAAAD////////////////////////////////////////////////////////////////////////////YSWgTAAAAE3RSTlMA7fci493c0MW8uJ6CZks4MxQHEZL6ewAAAFRJREFUOMvd0skRgCAQBVEFwQ0V7fxzNQP6wI05v6pZ/kyj1b7FNgik2gQzzLcAwiUAigHOTwDHK4A1CmB5BJANJG1hQ9qafYcqFlZP3IFc9eVGrR+iIgkDQRUXIAAAAABJRU5ErkJggg==";mxUtils.extend(Editor,mxEventSource);Editor.prototype.originalNoForeignObject=mxClient.NO_FO;Editor.prototype.transparentImage=(mxClient.IS_SVG)?"data:image/gif;base64,R0lGODlhMAAwAIAAAP///wAAACH5BAEAAAAALAAAAAAwADAAAAIxhI+py+0Po5y02ouz3rz7D4biSJbmiabqyrbuC8fyTNf2jef6zvf+DwwKh8Si8egpAAA7":IMAGE_PATH+"/transparent.gif";Editor.prototype.extendCanvas=true;Editor.prototype.chromeless=false;Editor.prototype.cancelFirst=true;Editor.prototype.enabled=true;Editor.prototype.filename=null;Editor.prototype.modified=false;Editor.prototype.autosave=true;Editor.prototype.initialTopSpacing=0;Editor.prototype.appName=document.title;Editor.prototype.editBlankUrl=window.location.protocol+"//"+window.location.host+"/?client=1";Editor.prototype.editBlankFallbackUrl=window.location.protocol+"//"+window.location.host+"/?create=drawdata&splash=0";Editor.prototype.init=function(){};Editor.prototype.setAutosave=function(a){this.autosave=a;this.fireEvent(new mxEventObject("autosaveChanged"))};Editor.prototype.getEditBlankUrl=function(a,b){return((b)?this.editBlankFallbackUrl:this.editBlankUrl)+a};Editor.prototype.editAsNew=function(a,e){var d=(e!=null)?"&title="+encodeURIComponent(e):"";if(typeof window.postMessage!=="undefined"&&(document.documentMode==null||document.documentMode>=10)){var b=null;var c=mxUtils.bind(this,function(f){if(f.data=="ready"&&f.source==b){b.postMessage(a,"*");mxEvent.removeListener(window,"message",c)}});mxEvent.addListener(window,"message",c);b=window.open(this.getEditBlankUrl(d,false))}else{window.drawdata=a;window.open(this.getEditBlankUrl(d,true))}};Editor.prototype.createGraph=function(a,b){var c=new Graph(null,b,null,null,a);c.transparentBackground=false;if(!this.chromeless){c.isBlankLink=function(d){return !this.isExternalProtocol(d)}}return c};Editor.prototype.resetGraph=function(){this.graph.gridEnabled=!this.chromeless||urlParams.grid=="1";this.graph.graphHandler.guidesEnabled=true;this.graph.setTooltips(true);this.graph.setConnectable(true);this.graph.foldingEnabled=true;this.graph.scrollbars=this.graph.defaultScrollbars;this.graph.pageVisible=this.graph.defaultPageVisible;this.graph.pageBreaksVisible=this.graph.pageVisible;this.graph.preferPageSize=this.graph.pageBreaksVisible;this.graph.background=this.graph.defaultGraphBackground;this.graph.pageScale=mxGraph.prototype.pageScale;this.graph.pageFormat=mxGraph.prototype.pageFormat;this.updateGraphComponents();this.graph.view.setScale(1)};Editor.prototype.readGraphState=function(d){this.graph.gridEnabled=d.getAttribute("grid")!="0"&&(!this.chromeless||urlParams.grid=="1");this.graph.gridSize=parseFloat(d.getAttribute("gridSize"))||mxGraph.prototype.gridSize;this.graph.graphHandler.guidesEnabled=d.getAttribute("guides")!="0";this.graph.setTooltips(d.getAttribute("tooltips")!="0");this.graph.setConnectable(d.getAttribute("connect")!="0");this.graph.connectionArrowsEnabled=d.getAttribute("arrows")!="0";this.graph.foldingEnabled=d.getAttribute("fold")!="0";if(this.chromeless&&this.graph.foldingEnabled){this.graph.foldingEnabled=urlParams.nav=="1";this.graph.cellRenderer.forceControlClickHandler=this.graph.foldingEnabled}var f=d.getAttribute("pageScale");if(f!=null){this.graph.pageScale=f}else{this.graph.pageScale=mxGraph.prototype.pageScale}if(!this.graph.lightbox){var c=d.getAttribute("page");if(c!=null){this.graph.pageVisible=(c!="0")}else{this.graph.pageVisible=this.graph.defaultPageVisible}}else{this.graph.pageVisible=false}this.graph.pageBreaksVisible=this.graph.pageVisible;this.graph.preferPageSize=this.graph.pageBreaksVisible;var b=d.getAttribute("pageWidth");var e=d.getAttribute("pageHeight");if(b!=null&&e!=null){this.graph.pageFormat=new mxRectangle(0,0,parseFloat(b),parseFloat(e))}var a=d.getAttribute("background");if(a!=null&&a.length>0){this.graph.background=a}else{this.graph.background=this.graph.defaultGraphBackground}};Editor.prototype.setGraphXml=function(a){if(a!=null){var c=new mxCodec(a.ownerDocument);if(a.nodeName=="mxGraphModel"){this.graph.model.beginUpdate();try{this.graph.model.clear();this.graph.view.scale=1;this.readGraphState(a);this.updateGraphComponents();c.decode(a,this.graph.getModel())}finally{this.graph.model.endUpdate()}this.fireEvent(new mxEventObject("resetGraphView"))}else{if(a.nodeName=="root"){this.resetGraph();var b=c.document.createElement("mxGraphModel");b.appendChild(a);c.decode(b,this.graph.getModel());this.updateGraphComponents();this.fireEvent(new mxEventObject("resetGraphView"))}else{throw {message:mxResources.get("cannotOpenFile"),node:a,toString:function(){return this.message}}}}}else{this.resetGraph();this.graph.model.clear();this.fireEvent(new mxEventObject("resetGraphView"))}};Editor.prototype.getGraphXml=function(b){b=(b!=null)?b:true;var c=null;if(b){var a=new mxCodec(mxUtils.createXmlDocument());c=a.encode(this.graph.getModel())}else{c=this.graph.encodeCells(mxUtils.sortCells(this.graph.model.getTopmostCells(this.graph.getSelectionCells())))}if(this.graph.view.translate.x!=0||this.graph.view.translate.y!=0){c.setAttribute("dx",Math.round(this.graph.view.translate.x*100)/100);c.setAttribute("dy",Math.round(this.graph.view.translate.y*100)/100)}c.setAttribute("grid",(this.graph.isGridEnabled())?"1":"0");c.setAttribute("gridSize",this.graph.gridSize);c.setAttribute("guides",(this.graph.graphHandler.guidesEnabled)?"1":"0");c.setAttribute("tooltips",(this.graph.tooltipHandler.isEnabled())?"1":"0");c.setAttribute("connect",(this.graph.connectionHandler.isEnabled())?"1":"0");c.setAttribute("arrows",(this.graph.connectionArrowsEnabled)?"1":"0");c.setAttribute("fold",(this.graph.foldingEnabled)?"1":"0");c.setAttribute("page",(this.graph.pageVisible)?"1":"0");c.setAttribute("pageScale",this.graph.pageScale);c.setAttribute("pageWidth",this.graph.pageFormat.width);c.setAttribute("pageHeight",this.graph.pageFormat.height);if(this.graph.background!=null){c.setAttribute("background",this.graph.background)}return c};Editor.prototype.updateGraphComponents=function(){var a=this.graph;if(a.container!=null){a.view.validateBackground();a.container.style.overflow=(a.scrollbars)?"auto":"hidden";this.fireEvent(new mxEventObject("updateGraphComponents"))}};Editor.prototype.setModified=function(a){this.modified=a};Editor.prototype.setFilename=function(a){this.filename=a};Editor.prototype.createUndoManager=function(){var b=this.graph;var c=new mxUndoManager();this.undoListener=function(f,e){c.undoableEditHappened(e.getProperty("edit"))};var a=mxUtils.bind(this,function(f,e){this.undoListener.apply(this,arguments)});b.getModel().addListener(mxEvent.UNDO,a);b.getView().addListener(mxEvent.UNDO,a);var d=function(j,e){var k=b.getSelectionCellsForChanges(e.getProperty("edit").changes);var g=b.getModel();var f=[];for(var h=0;h<k.length;h++){if((g.isVertex(k[h])||g.isEdge(k[h]))&&b.view.getState(k[h])!=null){f.push(k[h])}}b.setSelectionCells(f)};c.addListener(mxEvent.UNDO,d);c.addListener(mxEvent.REDO,d);return c};Editor.prototype.initStencilRegistry=function(){};Editor.prototype.destroy=function(){if(this.graph!=null){this.graph.destroy();this.graph=null}};OpenFile=function(a){this.producer=null;this.consumer=null;this.done=a;this.args=null};OpenFile.prototype.setConsumer=function(a){this.consumer=a;this.execute()};OpenFile.prototype.setData=function(){this.args=arguments;this.execute()};OpenFile.prototype.error=function(a){this.cancel(true);mxUtils.alert(a)};OpenFile.prototype.execute=function(){if(this.consumer!=null&&this.args!=null){this.cancel(false);this.consumer.apply(this,this.args)}};OpenFile.prototype.cancel=function(a){if(this.done!=null){this.done((a!=null)?a:true)}};(function(){mxGraphView.prototype.validateBackgroundPage=function(){var i=this.graph;if(i.container!=null&&!i.transparentBackground){if(i.pageVisible){var h=this.getBackgroundPageBounds();if(this.backgroundPageShape==null){var j=i.container.firstChild;while(j!=null&&j.nodeType!=mxConstants.NODETYPE_ELEMENT){j=j.nextSibling}if(j!=null){this.backgroundPageShape=this.createBackgroundPageShape(h);this.backgroundPageShape.scale=1;this.backgroundPageShape.isShadow=!mxClient.IS_QUIRKS;this.backgroundPageShape.dialect=mxConstants.DIALECT_STRICTHTML;this.backgroundPageShape.init(i.container);j.style.position="absolute";i.container.insertBefore(this.backgroundPageShape.node,j);this.backgroundPageShape.redraw();this.backgroundPageShape.node.className="geBackgroundPage";mxEvent.addListener(this.backgroundPageShape.node,"dblclick",mxUtils.bind(this,function(k){i.dblClick(k)}));mxEvent.addGestureListeners(this.backgroundPageShape.node,mxUtils.bind(this,function(k){i.fireMouseEvent(mxEvent.MOUSE_DOWN,new mxMouseEvent(k))}),mxUtils.bind(this,function(k){if(i.tooltipHandler!=null&&i.tooltipHandler.isHideOnHover()){i.tooltipHandler.hide()}if(i.isMouseDown&&!mxEvent.isConsumed(k)){i.fireMouseEvent(mxEvent.MOUSE_MOVE,new mxMouseEvent(k))}}),mxUtils.bind(this,function(k){i.fireMouseEvent(mxEvent.MOUSE_UP,new mxMouseEvent(k))}))}}else{this.backgroundPageShape.scale=1;this.backgroundPageShape.bounds=h;this.backgroundPageShape.redraw()}}else{if(this.backgroundPageShape!=null){this.backgroundPageShape.destroy();this.backgroundPageShape=null}}this.validateBackgroundStyles()}};mxGraphView.prototype.validateBackgroundStyles=function(){var q=this.graph;var k=(q.background==null||q.background==mxConstants.NONE)?"#ffffff":q.background;var o=(this.gridColor!=k.toLowerCase())?this.gridColor:"#ffffff";var j="none";var l="";if(q.isGridEnabled()){var p=10;if(mxClient.IS_SVG){j=unescape(encodeURIComponent(this.createSvgGrid(o)));j=(window.btoa)?btoa(j):Base64.encode(j,true);j="url(data:image/svg+xml;base64,"+j+")";p=q.gridSize*this.scale*this.gridSteps}else{j="url("+this.gridImage+")"}var i=0;var n=0;if(q.view.backgroundPageShape!=null){var m=this.getBackgroundPageBounds();i=1+m.x;n=1+m.y}l=-Math.round(p-mxUtils.mod(this.translate.x*this.scale-i,p))+"px "+-Math.round(p-mxUtils.mod(this.translate.y*this.scale-n,p))+"px"}var h=q.view.canvas;if(h.ownerSVGElement!=null){h=h.ownerSVGElement}if(q.view.backgroundPageShape!=null){q.view.backgroundPageShape.node.style.backgroundPosition=l;q.view.backgroundPageShape.node.style.backgroundImage=j;q.view.backgroundPageShape.node.style.backgroundColor=k;q.container.className="geDiagramContainer geDiagramBackdrop";h.style.backgroundImage="none";h.style.backgroundColor=""}else{q.container.className="geDiagramContainer";h.style.backgroundPosition=l;h.style.backgroundColor=k;h.style.backgroundImage=j}};mxGraphView.prototype.createSvgGrid=function(j){var n=this.graph.gridSize*this.scale;while(n<this.minGridSize){n*=2}var o=this.gridSteps*n;var p=[];for(var m=1;m<this.gridSteps;m++){var l=m*n;p.push("M 0 "+l+" L "+o+" "+l+" M "+l+" 0 L "+l+" "+o)}var k=o;var h='<svg width="'+k+'" height="'+k+'" xmlns="'+mxConstants.NS_SVG+'"><defs><pattern id="grid" width="'+o+'" height="'+o+'" patternUnits="userSpaceOnUse"><path d="'+p.join(" ")+'" fill="none" stroke="'+j+'" opacity="0.2" stroke-width="1"/><path d="M '+o+" 0 L 0 0 0 "+o+'" fill="none" stroke="'+j+'" stroke-width="1"/></pattern></defs><rect width="100%" height="100%" fill="url(#grid)"/></svg>';return h};var c=mxGraph.prototype.panGraph;mxGraph.prototype.panGraph=function(k,j){c.apply(this,arguments);if(this.shiftPreview1!=null){var l=this.view.canvas;if(l.ownerSVGElement!=null){l=l.ownerSVGElement}var i=this.gridSize*this.view.scale*this.view.gridSteps;var h=-Math.round(i-mxUtils.mod(this.view.translate.x*this.view.scale+k,i))+"px "+-Math.round(i-mxUtils.mod(this.view.translate.y*this.view.scale+j,i))+"px";l.style.backgroundPosition=h}};mxGraph.prototype.updatePageBreaks=function(q,m,u){var r=this.view.scale;var s=this.view.translate;var o=this.pageFormat;var j=r*this.pageScale;var k=this.view.getBackgroundPageBounds();m=k.width;u=k.height;var i=new mxRectangle(r*s.x,r*s.y,o.width*j,o.height*j);q=q&&Math.min(i.width,i.height)>this.minPageBreakDist;var l=(q)?Math.ceil(u/i.height)-1:0;var n=(q)?Math.ceil(m/i.width)-1:0;var t=k.x+m;var h=k.y+u;if(this.horizontalPageBreaks==null&&l>0){this.horizontalPageBreaks=[]}if(this.verticalPageBreaks==null&&n>0){this.verticalPageBreaks=[]}var p=mxUtils.bind(this,function(y){if(y!=null){var x=(y==this.horizontalPageBreaks)?l:n;for(var w=0;w<=x;w++){var z=(y==this.horizontalPageBreaks)?[new mxPoint(Math.round(k.x),Math.round(k.y+(w+1)*i.height)),new mxPoint(Math.round(t),Math.round(k.y+(w+1)*i.height))]:[new mxPoint(Math.round(k.x+(w+1)*i.width),Math.round(k.y)),new mxPoint(Math.round(k.x+(w+1)*i.width),Math.round(h))];if(y[w]!=null){y[w].points=z;y[w].redraw()}else{var v=new mxPolyline(z,this.pageBreakColor);v.dialect=this.dialect;v.isDashed=this.pageBreakDashed;v.pointerEvents=false;v.init(this.view.backgroundPane);v.redraw();y[w]=v}}for(var w=x;w<y.length;w++){y[w].destroy()}y.splice(x,y.length-x)}});p(this.horizontalPageBreaks);p(this.verticalPageBreaks)};var b=mxGraphHandler.prototype.shouldRemoveCellsFromParent;mxGraphHandler.prototype.shouldRemoveCellsFromParent=function(l,j,h){for(var k=0;k<j.length;k++){if(this.graph.getModel().isVertex(j[k])){var m=this.graph.getCellGeometry(j[k]);if(m!=null&&m.relative){return false}}}return b.apply(this,arguments)};var a=mxConnectionHandler.prototype.createMarker;mxConnectionHandler.prototype.createMarker=function(){var h=a.apply(this,arguments);h.intersects=mxUtils.bind(this,function(j,i){if(this.isConnecting()){return true}return mxCellMarker.prototype.intersects.apply(h,arguments)});return h};mxGraphView.prototype.createBackgroundPageShape=function(h){return new mxRectangleShape(h,"#ffffff","#cacaca")};mxGraphView.prototype.getBackgroundPageBounds=function(){var z=this.getGraphBounds();var r=(z.width>0)?z.x/this.scale-this.translate.x:0;var q=(z.height>0)?z.y/this.scale-this.translate.y:0;var t=z.width/this.scale;var m=z.height/this.scale;var l=this.graph.pageFormat;var j=this.graph.pageScale;var v=l.width*j;var o=l.height*j;var k=Math.floor(Math.min(0,r)/v);var s=Math.floor(Math.min(0,q)/o);var u=Math.ceil(Math.max(1,r+t)/v);var n=Math.ceil(Math.max(1,q+m)/o);var A=u-k;var p=n-s;var i=new mxRectangle(this.scale*(this.translate.x+k*v),this.scale*(this.translate.y+s*o),this.scale*A*v,this.scale*p*o);return i};var d=mxGraph.prototype.panGraph;mxGraph.prototype.panGraph=function(i,h){d.apply(this,arguments);if((this.dialect!=mxConstants.DIALECT_SVG&&this.view.backgroundPageShape!=null)&&(!this.useScrollbarsForPanning||!mxUtils.hasScrollbars(this.container))){this.view.backgroundPageShape.node.style.marginLeft=i+"px";this.view.backgroundPageShape.node.style.marginTop=h+"px"}};var g=mxPopupMenu.prototype.addItem;mxPopupMenu.prototype.addItem=function(n,m,i,l,k,j){var h=g.apply(this,arguments);if(j!=null&&!j){mxEvent.addListener(h,"mousedown",function(o){mxEvent.consume(o)})}return h};var f=mxGraphHandler.prototype.getInitialCellForEvent;mxGraphHandler.prototype.getInitialCellForEvent=function(l){var j=this.graph.getModel();var i=j.getParent(this.graph.getSelectionCell());var h=f.apply(this,arguments);var k=j.getParent(h);if(i==null||(i!=h&&i!=k)){while(!this.graph.isCellSelected(h)&&!this.graph.isCellSelected(k)&&j.isVertex(k)&&!this.graph.isContainer(k)){h=k;k=this.graph.getModel().getParent(h)}}return h};var e=mxGraphHandler.prototype.isDelayedSelection;mxGraphHandler.prototype.isDelayedSelection=function(i,l){var h=e.apply(this,arguments);if(!h){var j=this.graph.getModel();var k=j.getParent(i);while(k!=null){if(this.graph.isCellSelected(k)&&j.isVertex(k)){h=true;break}k=j.getParent(k)}}return h};mxGraphHandler.prototype.selectDelayed=function(k){if(!this.graph.popupMenuHandler.isPopupTrigger(k)){var h=k.getCell();if(h==null){h=this.cell}var l=this.graph.view.getState(h);if(l!=null&&k.isSource(l.control)){this.graph.selectCellForEvent(h,k.getEvent())}else{var i=this.graph.getModel();var j=i.getParent(h);while(!this.graph.isCellSelected(j)&&i.isVertex(j)){h=j;j=i.getParent(h)}this.graph.selectCellForEvent(h,k.getEvent())}}};mxPopupMenuHandler.prototype.getCellForPopupEvent=function(k){var h=k.getCell();var i=this.graph.getModel();var j=i.getParent(h);while(i.isVertex(j)&&!this.graph.isContainer(j)){if(this.graph.isCellSelected(j)){h=j}j=i.getParent(j)}return h}})();(function(){Editor.prototype.appName="draw.io";Editor.closeImage=(mxClient.IS_SVG)?"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABkAAAAZCAMAAADzN3VRAAAApVBMVEUAAAD////k5OT///8AAAB1dXXMzMz9/f39/f37+/v5+fn+/v7///9iYmJaWlqFhYWnp6ejo6OHh4f////////////////7+/v5+fnx8fH///8AAAD///8bGxv7+/v5+fkoKCghISFDQ0MYGBjh4eHY2Njb29tQUFBvb29HR0c/Pz82NjYrKyu/v78SEhLu7u7s7OzV1dVVVVU7OzsVFRXAv78QEBBzqehMAAAAG3RSTlMAA/7p/vz5xZlrTiPL/v78+/v7+OXd2TYQDs8L70ZbAAABKUlEQVQoz3VS13LCMBBUXHChd8iukDslQChJ/v/TchaG4cXS+OSb1c7trU7V60OpdRz2ZtNZL4zXNlcN8BEtSG6+NxIXkeRPoBuQ1cjvZ31/VJFB10ISli6diYfH8iYO3WUNCcNlB0gTrXOtkxTo0O1aKKiBBMhhv2MNBQKoiA5wxlZo0JDzD3AYKbWacyj3fs01wxey0pyEP+R8pWKWXoqtIZ0DDg5pbki9krEKOa6LVDQsdoXEsi46Zqh69KFz7B1u7Hb2yDV8firXDKBlZ4UFiswKGRhXTS93/ECK7yxnJ3+S3y/ThpO+cfSD017nqa18aasabU0/t7d+tk0/1oMEJ1NaD67iwdF68OabFSLn+eHb0+vjy+uk8br9fdrftH0O2menfd7+AQfYM/lNjoDHAAAAAElFTkSuQmCC":IMAGE_PATH+"/delete.png";Editor.plusImage=(!mxClient.IS_SVG)?IMAGE_PATH+"/plus.png":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAoAAAAKCAYAAACNMs+9AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYwIDYxLjEzNDc3NywgMjAxMC8wMi8xMi0xNzozMjowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNSBNYWNpbnRvc2giIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6MDdCMTdENjVCOEM4MTFFNDlCRjVBNDdCODU5NjNBNUMiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6MDdCMTdENjZCOEM4MTFFNDlCRjVBNDdCODU5NjNBNUMiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDowN0IxN0Q2M0I4QzgxMUU0OUJGNUE0N0I4NTk2M0E1QyIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDowN0IxN0Q2NEI4QzgxMUU0OUJGNUE0N0I4NTk2M0E1QyIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PtjrjmgAAAAtSURBVHjaYvz//z8DMigvLwcLdHZ2MiKLMzEQCaivkLGsrOw/dU0cAr4GCDAARQsQbTFrv10AAAAASUVORK5CYII=";Editor.spinImage=(!mxClient.IS_SVG)?IMAGE_PATH+"/spin.gif":"data:image/gif;base64,R0lGODlhDAAMAPUxAEVriVp7lmCAmmGBm2OCnGmHn3OPpneSqYKbr4OcsIScsI2kto6kt46lt5KnuZmtvpquvpuvv56ywaCzwqK1xKu7yay9yq+/zLHAzbfF0bjG0bzJ1LzK1MDN18jT28nT3M3X3tHa4dTc49Xd5Njf5dng5t3k6d/l6uDm6uru8e7x8/Dz9fT29/b4+Pj5+fj5+vr6+v///wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACH5BAkKADEAIf8LTkVUU0NBUEUyLjADAQAAACwAAAAADAAMAAAGR8CYcEgsOgYAIax4CCQuQldrCBEsiK8VS2hoFGOrlJDA+cZQwkLnqyoJFZKviSS0ICrE0ec0jDAwIiUeGyBFGhMPFBkhZo1BACH5BAkKAC4ALAAAAAAMAAwAhVB0kFR3k1V4k2CAmmWEnW6Lo3KOpXeSqH2XrIOcsISdsImhtIqhtJCmuJGnuZuwv52wwJ+ywZ+ywqm6yLHBzbLCzrXEz7fF0LnH0rrI0r7L1b/M1sXR2cfT28rV3czW3s/Z4Nfe5Nvi6ODm6uLn6+Ln7OLo7OXq7efs7+zw8u/y9PDy9PX3+Pr7+////wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAZDQJdwSCxGDAIAoVFkFBwYSyIwGE4OkCJxIdG6WkJEx8sSKj7elfBB0a5SQg1EQ0SVVMPKhDM6iUIkRR4ZFxsgJl6JQQAh+QQJCgAxACwAAAAADAAMAIVGa4lcfZdjgpxkg51nhp5ui6N3kqh5lKqFnbGHn7KIoLOQp7iRp7mSqLmTqbqarr6br7+fssGitcOitcSuvsuuv8uwwMyzw861xNC5x9K6x9K/zNbDztjE0NnG0drJ1NzQ2eDS2+LT2+LV3ePZ4Oba4ebb4ufc4+jm6+7t8PLt8PPt8fPx8/Xx9PX09vf19/j3+Pn///8AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAGQ8CYcEgsUhQFggFSjCQmnE1jcBhqGBXiIuAQSi7FGEIgfIzCFoCXFCZiPO0hKBMiwl7ET6eUYqlWLkUnISImKC1xbUEAIfkECQoAMgAsAAAAAAwADACFTnKPT3KPVHaTYoKcb4yjcY6leZSpf5mtgZuvh5+yiqG0i6K1jqW3kae5nrHBnrLBn7LCoLPCobTDqbrIqrvIs8LOtMPPtcPPtcTPuMbRucfSvcrUvsvVwMzWxdHaydTcytXdzNbezdff0drh2ODl2+Ln3eTp4Obq4ujs5Ont5uvu6O3w6u7w6u7x7/L09vj5+vr7+vv7////AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABkdAmXBILHIcicOCUqxELKKPxKAYgiYd4oMAEWo8RVmjIMScwhmBcJMKXwLCECmMGAhPI1QRwBiaSixCMDFhLSorLi8wYYxCQQAh+QQJCgAxACwAAAAADAAMAIVZepVggJphgZtnhp5vjKN2kah3kqmBmq+KobSLorWNpLaRp7mWq7ybr7+gs8KitcSktsWnuManucexwM2ywc63xtG6yNO9ytS+ytW/zNbDz9jH0tvL1d3N197S2+LU3OPU3ePV3eTX3+Xa4efb4ufd5Onl6u7r7vHs7/Lt8PLw8/Xy9Pby9fb09ff2+Pn3+Pn6+vr///8AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAGSMCYcEgseiwSR+RS7GA4JFGF8RiWNiEiJTERgkjFGAQh/KTCGoJwpApnBkITKrwoCFWnFlEhaAxXLC9CBwAGRS4wQgELYY1CQQAh+QQJCgAzACwAAAAADAAMAIVMcI5SdZFhgZtti6JwjaR4k6mAma6Cm6+KobSLorWLo7WNo7aPpredsMCescGitMOitcSmuMaqu8ixwc2zws63xdC4xtG5x9K9ytXAzdfCztjF0NnF0drK1d3M1t7P2N/P2eDT2+LX3+Xe5Onh5+vi5+vj6Ozk6e3n7O/o7O/q7vHs7/Lt8PPu8fPx8/X3+Pn6+vv7+/v8/Pz///8AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAGRcCZcEgsmkIbTOZTLIlGqZNnchm2SCgiJ6IRqljFmQUiXIVnoITQde4chC9Y+LEQxmTFRkFSNFAqDAMIRQoCAAEEDmeLQQAh+QQJCgAwACwAAAAADAAMAIVXeZRefplff5lhgZtph59yjqV2kaeAmq6FnbGFnrGLorWNpLaQp7mRqLmYrb2essGgs8Klt8apusitvcquv8u2xNC7yNO8ydS8ytTAzdfBzdfM1t7N197Q2eDU3OPX3+XZ4ObZ4ebc4+jf5erg5erg5uvp7fDu8fPv8vTz9fb09vf19/j3+Pn4+fn5+vr6+/v///8AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAGRUCYcEgspkwjEKhUVJ1QsBNp0xm2VixiSOMRvlxFGAcTJook5eEHIhQcwpWIkAFQECkNy9AQWFwyEAkPRQ4FAwQIE2llQQAh+QQJCgAvACwAAAAADAAMAIVNcY5SdZFigptph6BvjKN0kKd8lquAmq+EnbGGn7KHn7ONpLaOpbearr+csMCdscCescGhtMOnuMauvsuzws60w862xdC9ytW/y9a/zNbCztjG0drH0tvK1N3M1t7N19/U3ePb4uff5urj6Ozk6e3l6u7m6u7o7PDq7vDt8PPv8vTw8vTw8/X19vf6+vv///8AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAGQ8CXcEgsvlytVUplJLJIpSEDUESFTELBwSgCCQEV42kjDFiMo4uQsDB2MkLHoEHUTD7DRAHC8VAiZ0QSCgYIDxhNiUEAOw==";Editor.tweetImage=(mxClient.IS_SVG)?"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABIAAAASCAYAAABWzo5XAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAARlJREFUeNpi/P//PwM1ABMDlQDVDGKAeo0biMXwKOMD4ilA/AiInwDxfCBWBeIgINYDmwE1yB2Ir0Alsbl6JchONPwNiC8CsTPIDJjXuIBYG4gPAnE8EDMjGaQCxGFYLOAEYlYg/o3sNSkgfo1k2ykgLgRiIyAOwOIaGE6CmwE1SA6IZ0BNR1f8GY9BXugG2UMN+YtHEzr+Aw0OFINYgHgdCYaA8HUgZkM3CASEoYb9ItKgapQkhGQQKC0dJdKQx1CLsRoEArpAvAuI3+Ix5B8Q+2AkaiyZVgGId+MwBBQhKVhzB9QgKyDuAOJ90BSLzZBzQOyCK5uxQNnXoGlJHogfIOU7UCI9C8SbgHgjEP/ElRkZB115BBBgAPbkvQ/azcC0AAAAAElFTkSuQmCC":IMAGE_PATH+"/tweet.png";Editor.facebookImage=(mxClient.IS_SVG)?"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABIAAAASCAMAAABhEH5lAAAARVBMVEUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADc6ur3AAAAFnRSTlMAYmRg2KVCC/oPq0uAcVQtHtvZuoYh/a7JUAAAAGJJREFUGNOlzkkOgCAMQNEvagvigBP3P6pRNoCJG/+myVu0RdsqxcQqQ/NFVkKQgqwDzoJ2WKajoB66atcAa0GjX0D8lJHwNGfknYJzY77LDtDZ+L74j0z26pZI2yYlMN9TL17xEd+fl1D+AAAAAElFTkSuQmCC":IMAGE_PATH+"/facebook.png";Editor.blankImage="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAACklEQVR4nGMAAQAABQABDQottAAAAABJRU5ErkJggg==";Editor.defaultCsvValue='##\n## Example CSV import. Use ## for comments and # for configuration. Paste CSV below.\n## The following names are reserved and should not be used (or ignored):\n## id, tooltip, placeholder(s), link and label (see below)\n##\n#\n## Node label with placeholders and HTML.\n## Default is \'%name_of_first_column%\'.\n#\n# label: %name%<br><i style="color:gray;">%position%</i><br><a href="mailto:%email%">Email</a>\n#\n## Node style (placeholders are replaced once).\n## Default is the current style for nodes.\n#\n# style: label;image=%image%;whiteSpace=wrap;html=1;rounded=1;fillColor=%fill%;strokeColor=%stroke%;\n#\n## Connections between rows ("from": source colum, "to": target column).\n## Label, style and invert are optional. Defaults are \'\', current style and false.\n## The target column may contain a comma-separated list of values.\n## Multiple connect entries are allowed.\n#\n# connect: {"from": "manager", "to": "name", "invert": true, "label": "manages", \\\n#          "style": "curved=1;endArrow=blockThin;endFill=1;fontSize=11;"}\n# connect: {"from": "refs", "to": "id", "style": "curved=1;fontSize=11;"}\n#\n## Node width. Possible value are px or auto. Default is auto.\n#\n# width: auto\n#\n## Node height. Possible value are px or auto. Default is auto.\n#\n# height: auto\n#\n## Padding for autosize. Default is 0.\n#\n# padding: -26\n#\n## Comma-separated list of ignored columns for metadata. (These can be\n## used for connections and styles but will not be added as metadata.)\n#\n# ignore: id,image,fill,stroke\n#\n## Column to be renamed to link attribute (used as link).\n#\n# link: url\n#\n## Spacing between nodes. Default is 40.\n#\n# nodespacing: 40\n#\n## Spacing between parallel edges. Default is 40.\n#\n# edgespacing: 40\n#\n## Name of layout. Possible values are auto, none, verticaltree, horizontaltree,\n## verticalflow, horizontalflow, organic, circle. Default is auto.\n#\n# layout: auto\n#\n## ---- CSV below this line. First line are column names. ----\nname,position,id,location,manager,email,fill,stroke,refs,url,image\nEvan Miller,CFO,emi,Office 1,,me@example.com,#dae8fc,#6c8ebf,,https://www.draw.io,https://cdn3.iconfinder.com/data/icons/user-avatars-1/512/users-9-2-128.png\nEdward Morrison,Brand Manager,emo,Office 2,Evan Miller,me@example.com,#d5e8d4,#82b366,,https://www.draw.io,https://cdn3.iconfinder.com/data/icons/user-avatars-1/512/users-10-3-128.png\nRon Donovan,System Admin,rdo,Office 3,Evan Miller,me@example.com,#d5e8d4,#82b366,"emo,tva",https://www.draw.io,https://cdn3.iconfinder.com/data/icons/user-avatars-1/512/users-2-128.png\nTessa Valet,HR Director,tva,Office 4,Evan Miller,me@example.com,#d5e8d4,#82b366,,https://www.draw.io,https://cdn3.iconfinder.com/data/icons/user-avatars-1/512/users-3-128.png\n';Editor.prototype.editButtonLink=(urlParams.edit!=null)?decodeURIComponent(urlParams.edit):null;if(urlParams.dev=="1"){Editor.prototype.editBlankUrl=Editor.prototype.editBlankUrl+"&dev=1";Editor.prototype.editBlankFallbackUrl=Editor.prototype.editBlankFallbackUrl+"&dev=1"}var j=Editor.prototype.setGraphXml;Editor.prototype.setGraphXml=function(v){v=(v!=null&&v.nodeName!="mxlibrary")?this.extractGraphModel(v):null;if(v!=null){var q=v.getElementsByTagName("parsererror");if(q!=null&&q.length>0){var r=q[0];var u=r.getElementsByTagName("div");if(u!=null&&u.length>0){r=u[0]}throw {message:mxUtils.getTextContent(r)}}else{if(v.nodeName=="mxGraphModel"){var t=v.getAttribute("style")||"default-style2";if(urlParams.embed!="1"&&(t==null||t=="")){var o=(this.graph.themes!=null)?this.graph.themes["default-old"]:mxUtils.load(STYLE_PATH+"/default-old.xml").getDocumentElement();if(o!=null){var s=new mxCodec(o.ownerDocument);s.decode(o,this.graph.getStylesheet())}}else{if(t!=this.graph.currentStyle){var o=(this.graph.themes!=null)?this.graph.themes[t]:mxUtils.load(STYLE_PATH+"/"+t+".xml").getDocumentElement();if(o!=null){var s=new mxCodec(o.ownerDocument);s.decode(o,this.graph.getStylesheet())}}}this.graph.currentStyle=t;this.graph.mathEnabled=(urlParams.math=="1"||v.getAttribute("math")=="1");var p=v.getAttribute("backgroundImage");if(p!=null){p=JSON.parse(p);this.graph.setBackgroundImage(new mxImage(p.src,p.width,p.height))}else{this.graph.setBackgroundImage(null)}mxClient.NO_FO=(this.graph.mathEnabled)?true:this.originalNoForeignObject;this.graph.setShadowVisible(v.getAttribute("shadow")=="1",false)}}j.apply(this,arguments)}else{throw {message:mxResources.get("notADiagramFile")||"Invalid data",toString:function(){return this.message}}}};var l=Editor.prototype.getGraphXml;Editor.prototype.getGraphXml=function(o){o=(o!=null)?o:true;var p=l.apply(this,arguments);if(this.graph.currentStyle!=null&&this.graph.currentStyle!="default-style2"){p.setAttribute("style",this.graph.currentStyle)}if(this.graph.backgroundImage!=null){p.setAttribute("backgroundImage",JSON.stringify(this.graph.backgroundImage))}p.setAttribute("math",(this.graph.mathEnabled)?"1":"0");p.setAttribute("shadow",(this.graph.shadowVisible)?"1":"0");return p};Editor.prototype.isDataSvg=function(p){try{var o=mxUtils.parseXml(p).documentElement;var q=o.getAttribute("content");if(q!=null){if(q!=null&&q.charAt(0)!="<"&&q.charAt(0)!="%"){q=unescape((window.atob)?atob(q):Base64.decode(cont,q))}if(q!=null&&q.charAt(0)=="%"){q=decodeURIComponent(q)}if(q!=null&&q.length>0){var r=mxUtils.parseXml(q).documentElement;return r.nodeName=="mxfile"||r.nodeName=="mxGraphModel"}}}catch(s){}return false};Editor.prototype.extractGraphModel=function(s,p){if(s!=null&&typeof(pako)!=="undefined"){var w=s.ownerDocument.getElementsByTagName("div");var y=[];if(w!=null&&w.length>0){for(var x=0;x<w.length;x++){if(w[x].getAttribute("class")=="mxgraph"){y.push(w[x]);break}}}if(y.length>0){var v=y[0].getAttribute("data-mxgraph");if(v!=null){var q=JSON.parse(v);if(q!=null&&q.xml!=null){var u=mxUtils.parseXml(q.xml);s=u.documentElement}}else{var t=y[0].getElementsByTagName("div");if(t.length>0){var v=mxUtils.getTextContent(t[0]);v=this.graph.decompress(v);if(v.length>0){var u=mxUtils.parseXml(v);s=u.documentElement}}}}}if(s!=null&&s.nodeName=="svg"){var w=s.getAttribute("content");if(w!=null&&w.charAt(0)!="<"&&w.charAt(0)!="%"){w=unescape((window.atob)?atob(w):Base64.decode(cont,w))}if(w!=null&&w.charAt(0)=="%"){w=decodeURIComponent(w)}if(w!=null&&w.length>0){s=mxUtils.parseXml(w).documentElement}else{throw {message:mxResources.get("notADiagramFile")}}}if(s!=null&&!p){var r=null;if(s.nodeName=="diagram"){r=s}else{if(s.nodeName=="mxfile"){var o=s.getElementsByTagName("diagram");if(o.length>0){r=o[Math.max(0,Math.min(o.length-1,urlParams.page||0))]}}}if(r!=null){var w=this.graph.decompress(mxUtils.getTextContent(r));if(w!=null&&w.length>0){s=mxUtils.parseXml(w).documentElement}}}if(s!=null&&s.nodeName!="mxGraphModel"&&(!p||s.nodeName!="mxfile")){s=null}return s};var d=Editor.prototype.resetGraph;Editor.prototype.resetGraph=function(){this.graph.mathEnabled=(urlParams.math=="1");this.graph.view.x0=null;this.graph.view.y0=null;mxClient.NO_FO=(this.graph.mathEnabled)?true:this.originalNoForeignObject;d.apply(this,arguments)};Editor.prototype.originalNoForeignObject=mxClient.NO_FO;var c=Editor.prototype.updateGraphComponents;Editor.prototype.updateGraphComponents=function(){c.apply(this,arguments);mxClient.NO_FO=(this.graph.mathEnabled&&Editor.MathJaxRender!=null)?true:this.originalNoForeignObject};Editor.initMath=function(s,q){s=(s!=null)?s:"https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-MML-AM_HTMLorMML";Editor.mathJaxQueue=[];Editor.doMathJaxRender=function(t){MathJax.Hub.Queue(["Typeset",MathJax.Hub,t])};window.MathJax={skipStartupTypeset:true,showMathMenu:false,messageStyle:"none",AuthorInit:function(){MathJax.Hub.Config(q||{jax:["input/TeX","input/MathML","input/AsciiMath","output/HTML-CSS"],extensions:["tex2jax.js","mml2jax.js","asciimath2jax.js"],TeX:{extensions:["AMSmath.js","AMSsymbols.js","noErrors.js","noUndefined.js"]},tex2jax:{ignoreClass:"mxCellEditor"},asciimath2jax:{ignoreClass:"mxCellEditor"}});MathJax.Hub.Register.StartupHook("Begin",function(){for(var t=0;t<Editor.mathJaxQueue.length;t++){Editor.doMathJaxRender(Editor.mathJaxQueue[t])}})}};Editor.MathJaxRender=function(t){if(typeof(MathJax)!=="undefined"&&typeof(MathJax.Hub)!=="undefined"){Editor.doMathJaxRender(t)}else{Editor.mathJaxQueue.push(t)}};Editor.MathJaxClear=function(){Editor.mathJaxQueue=[]};var r=Editor.prototype.init;Editor.prototype.init=function(){this.graph.addListener(mxEvent.SIZE,mxUtils.bind(this,function(u,t){if(this.graph.mathEnabled){Editor.MathJaxRender(this.graph.container)}}))};var p=document.getElementsByTagName("script");if(p!=null&&p.length>0){var o=document.createElement("script");o.type="text/javascript";o.src=s;p[0].parentNode.appendChild(o)}};Editor.prototype.csvToArray=function(r){var p=/^\s*(?:'[^'\\]*(?:\\[\S\s][^'\\]*)*'|"[^"\\]*(?:\\[\S\s][^"\\]*)*"|[^,'"\s\\]*(?:\s+[^,'"\s\\]+)*)\s*(?:,\s*(?:'[^'\\]*(?:\\[\S\s][^'\\]*)*'|"[^"\\]*(?:\\[\S\s][^"\\]*)*"|[^,'"\s\\]*(?:\s+[^,'"\s\\]+)*)\s*)*$/;var q=/(?!\s*$)\s*(?:'([^'\\]*(?:\\[\S\s][^'\\]*)*)'|"([^"\\]*(?:\\[\S\s][^"\\]*)*)"|([^,'"\s\\]*(?:\s+[^,'"\s\\]+)*))\s*(?:,|$)/g;if(!p.test(r)){return null}var o=[];r.replace(q,function(v,u,t,s){if(u!==undefined){o.push(u.replace(/\\'/g,"'"))}else{if(t!==undefined){o.push(t.replace(/\\"/g,'"'))}else{if(s!==undefined){o.push(s)}}}return""});if(/,\s*$/.test(r)){o.push("")}return o};if(window.ColorDialog){var i=ColorDialog.addRecentColor;ColorDialog.addRecentColor=function(p,o){i.apply(this,arguments);mxSettings.setRecentColors(ColorDialog.recentColors);mxSettings.save()};var h=ColorDialog.resetRecentColors;ColorDialog.resetRecentColors=function(){h.apply(this,arguments);mxSettings.setRecentColors(ColorDialog.recentColors);mxSettings.save()}}if(window.StyleFormatPanel!=null){var k=Format.prototype.init;Format.prototype.init=function(){k.apply(this,arguments);var o=this.editorUi;o.editor.addListener("fileLoaded",this.update)};var m=Format.prototype.refresh;Format.prototype.refresh=function(){var o=this.editorUi;if(o.getCurrentFile()!=null||urlParams.embed=="1"){m.apply(this,arguments)}else{this.clear()}};var f=DiagramFormatPanel.prototype.addOptions;DiagramFormatPanel.prototype.addOptions=function(t){t=f.apply(this,arguments);var s=this.editorUi;var q=s.editor;var r=q.graph;if(r.isEnabled()){var p=s.getCurrentFile();if(p!=null&&p.isAutosaveOptional()){var o=this.createOption(mxResources.get("autosave"),function(){return s.editor.autosave},function(u){s.editor.setAutosave(u)},{install:function(u){this.listener=function(){u(s.editor.autosave)};s.editor.addListener("autosaveChanged",this.listener)},destroy:function(){s.editor.removeListener(this.listener)}});t.appendChild(o)}}return t};var n=StyleFormatPanel.prototype.init;StyleFormatPanel.prototype.init=function(){var o=this.format.createSelectionState();if(o.style.shape!="image"){this.container.appendChild(this.addStyles(this.createPanel()))}n.apply(this,arguments)};var b=StyleFormatPanel.prototype.addStyleOps;StyleFormatPanel.prototype.addStyleOps=function(p){var o=mxUtils.button(mxResources.get("copyStyle"),mxUtils.bind(this,function(q){this.editorUi.actions.get("copyStyle").funct()}));o.setAttribute("title",mxResources.get("copyStyle")+" ("+this.editorUi.actions.get("copyStyle").shortcut+")");o.style.marginBottom="2px";o.style.width="100px";o.style.marginRight="2px";p.appendChild(o);var o=mxUtils.button(mxResources.get("pasteStyle"),mxUtils.bind(this,function(q){this.editorUi.actions.get("pasteStyle").funct()}));o.setAttribute("title",mxResources.get("pasteStyle")+" ("+this.editorUi.actions.get("pasteStyle").shortcut+")");o.style.marginBottom="2px";o.style.width="100px";p.appendChild(o);mxUtils.br(p);return b.apply(this,arguments)};StyleFormatPanel.prototype.addStyles=function(o){var w=this.editorUi.editor.graph;var s=document.createElement("div");s.style.whiteSpace="normal";s.style.paddingLeft="24px";s.style.paddingRight="20px";o.style.paddingLeft="16px";o.style.paddingBottom="6px";o.style.position="relative";o.appendChild(s);var p=["plain-gray","plain-blue","plain-green","plain-turquoise","plain-orange","plain-yellow","plain-red","plain-pink","plain-purple","gray","blue","green","turquoise","orange","yellow","red","pink","purple"];function t(z){function y(B){var A=mxUtils.button("",function(C){w.getModel().beginUpdate();try{var E=w.getSelectionCells();for(var F=0;F<E.length;F++){var G=w.getModel().getStyle(E[F]);for(var D=0;D<p.length;D++){G=mxUtils.removeStylename(G,p[D])}if(B!=null){G=mxUtils.setStyle(G,mxConstants.STYLE_FILLCOLOR,B.fill);G=mxUtils.setStyle(G,mxConstants.STYLE_STROKECOLOR,B.stroke);G=mxUtils.setStyle(G,mxConstants.STYLE_GRADIENTCOLOR,B.gradient)}else{G=mxUtils.setStyle(G,mxConstants.STYLE_FILLCOLOR,"#ffffff");G=mxUtils.setStyle(G,mxConstants.STYLE_STROKECOLOR,"#000000");G=mxUtils.setStyle(G,mxConstants.STYLE_GRADIENTCOLOR,null)}w.getModel().setStyle(E[F],G)}}finally{w.getModel().endUpdate()}});A.style.width="36px";A.style.height="30px";A.style.margin="0px 6px 6px 0px";if(B!=null){if(B.gradient!=null){if(mxClient.IS_IE&&(mxClient.IS_QUIRKS||document.documentMode<10)){A.style.filter="progid:DXImageTransform.Microsoft.Gradient(StartColorStr='"+B.fill+"', EndColorStr='"+B.gradient+"', GradientType=0)"}else{A.style.backgroundImage="linear-gradient("+B.fill+" 0px,"+B.gradient+" 100%)"}}else{A.style.backgroundColor=B.fill}A.style.border="1px solid "+B.stroke}else{A.style.backgroundColor="#ffffff";A.style.border="1px solid #000000"}s.appendChild(A)}s.innerHTML="";for(var x=0;x<z.length;x++){if(x>0&&mxUtils.mod(x,4)==0){mxUtils.br(s)}y(z[x])}}if(this.editorUi.currentScheme==null){this.editorUi.currentScheme=0}var u=[[null,{fill:"#f5f5f5",stroke:"#666666"},{fill:"#dae8fc",stroke:"#6c8ebf"},{fill:"#d5e8d4",stroke:"#82b366"},{fill:"#ffe6cc",stroke:"#d79b00"},{fill:"#fff2cc",stroke:"#d6b656"},{fill:"#f8cecc",stroke:"#b85450"},{fill:"#e1d5e7",stroke:"#9673a6"}],[null,{fill:"#f5f5f5",stroke:"#666666",gradient:"#b3b3b3"},{fill:"#dae8fc",stroke:"#6c8ebf",gradient:"#7ea6e0"},{fill:"#d5e8d4",stroke:"#82b366",gradient:"#97d077"},{fill:"#ffcd28",stroke:"#d79b00",gradient:"#ffa500"},{fill:"#fff2cc",stroke:"#d6b656",gradient:"#ffd966"},{fill:"#f8cecc",stroke:"#b85450",gradient:"#ea6b66"},{fill:"#e6d0de",stroke:"#996185",gradient:"#d5739d"}],[null,{fill:"#eeeeee",stroke:"#36393d"},{fill:"#f9f7ed",stroke:"#36393d"},{fill:"#ffcc99",stroke:"#36393d"},{fill:"#cce5ff",stroke:"#36393d"},{fill:"#ffff88",stroke:"#36393d"},{fill:"#cdeb8b",stroke:"#36393d"},{fill:"#ffcccc",stroke:"#36393d"}]];var q=document.createElement("div");q.style.cssText="position:absolute;left:10px;top:8px;bottom:8px;width:20px;margin:4px;opacity:0.5;background-repeat:no-repeat;background-position:center center;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAQBAMAAADQT4M0AAAAIVBMVEUAAAB2dnZ4eHh3d3d1dXVxcXF2dnZ2dnZ2dnZxcXF2dnYmb3w1AAAACnRSTlMAfCTkhhvb7cQSPH2JPgAAADRJREFUCNdjwACMAmBKaiGYs2oJmLPKAZ3DabU8AMRTXpUKopislqFyVzCAuUZgikkBZjoAcMYLnp53P/UAAAAASUVORK5CYII=);";o.appendChild(q);mxEvent.addListener(q,"click",mxUtils.bind(this,function(){this.editorUi.currentScheme=mxUtils.mod(this.editorUi.currentScheme-1,u.length);t(u[this.editorUi.currentScheme])}));var v=document.createElement("div");v.style.cssText="position:absolute;left:202px;top:8px;bottom:8px;width:20px;margin:4px;opacity:0.5;background-repeat:no-repeat;background-position:center center;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAQBAMAAADQT4M0AAAAIVBMVEUAAAB2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnYBuwCcAAAACnRSTlMAfCTkhhvb7cQSPH2JPgAAADZJREFUCNdjQAOMAmBKaiGY8loF5rKswsZlrVo8AUiFrTICcbIWK8A5DF1gDoMymMPApIAwHwCS0Qx/U7qCBQAAAABJRU5ErkJggg==);";o.appendChild(v);mxEvent.addListener(v,"click",mxUtils.bind(this,function(){this.editorUi.currentScheme=mxUtils.mod(this.editorUi.currentScheme+1,u.length);t(u[this.editorUi.currentScheme])}));function r(x){mxEvent.addListener(x,"mouseenter",function(){x.style.opacity="1"});mxEvent.addListener(x,"mouseleave",function(){x.style.opacity="0.5"})}r(q);r(v);t(u[this.editorUi.currentScheme]);return o};StyleFormatPanel.prototype.addEditOps=function(t){var p=this.format.getSelectionState();var o=null;if(this.editorUi.editor.graph.getSelectionCount()==1){o=mxUtils.button(mxResources.get("editStyle"),mxUtils.bind(this,function(u){this.editorUi.actions.get("editStyle").funct()}));o.setAttribute("title",mxResources.get("editStyle")+" ("+this.editorUi.actions.get("editStyle").shortcut+")");o.style.width="202px";o.style.marginBottom="2px";t.appendChild(o)}var s=this.editorUi.editor.graph;var r=s.view.getState(s.getSelectionCell());if(s.getSelectionCount()==1&&r!=null&&r.shape!=null&&r.shape.stencil!=null){var q=mxUtils.button(mxResources.get("editShape"),mxUtils.bind(this,function(u){this.editorUi.actions.get("editShape").funct()}));q.setAttribute("title",mxResources.get("editShape"));q.style.marginBottom="2px";if(o==null){q.style.width="202px"}else{o.style.width="100px";q.style.width="100px";q.style.marginLeft="2px"}t.appendChild(q)}else{if(p.image){var q=mxUtils.button(mxResources.get("editImage"),mxUtils.bind(this,function(u){this.editorUi.actions.get("image").funct()}));q.setAttribute("title",mxResources.get("editImage"));q.style.marginBottom="2px";if(o==null){q.style.width="202px"}else{o.style.width="100px";q.style.width="100px";q.style.marginLeft="2px"}t.appendChild(q)}}return t}}Graph.prototype.defaultThemeName="default-style2";Graph.prototype.lastPasteXml=null;Graph.prototype.pasteCounter=0;Graph.prototype.defaultScrollbars=urlParams.sb!="0";Graph.prototype.defaultPageVisible=urlParams.pv!="0";Graph.prototype.shadowId="dropShadow";Graph.prototype.edgeMode=urlParams.edge!="move";var g=Graph.prototype.init;Graph.prototype.init=function(){g.apply(this,arguments);var q=null;function p(s){q=s;if(mxClient.IS_QUIRKS||document.documentMode==7||document.documentMode==8){q=mxUtils.clone(s)}}mxEvent.addListener(this.container,"mouseenter",p);mxEvent.addListener(this.container,"mousemove",p);mxEvent.addListener(this.container,"mouseleave",function(s){q=null});this.isMouseInsertPoint=function(){return q!=null};var r=this.getInsertPoint;this.getInsertPoint=function(){if(q!=null){return this.getPointForEvent(q)}return r.apply(this,arguments)};var o=this.layoutManager.getLayout;this.layoutManager.getLayout=function(s){var u=this.graph.view.getState(s);var t=(u!=null)?u.style:this.graph.getCellStyle(s);if(typeof(mxRackContainer)!="undefined"&&t.childLayout=="rack"){var v=new mxStackLayout(this.graph,false);v.setChildGeometry=function(z,y){var w=20;y.height=Math.max(y.height,w);if(y.height/w>1){var x=y.height%w;y.height+=x>w/2?(w-x):-x}this.graph.getModel().setGeometry(z,y)};v.fill=true;v.unitSize=mxRackContainer.unitSize|20;v.marginLeft=t.marginLeft||0;v.marginRight=t.marginRight||0;v.marginTop=t.marginTop||0;v.marginBottom=t.marginBottom||0;v.resizeParent=false;return v}return o.apply(this,arguments)}};var e=Graph.prototype.loadStylesheet;Graph.prototype.loadStylesheet=function(){e.apply(this,arguments);this.currentStyle="default-style2"};Graph.prototype.addSvgShadow=function(w,y,v){v=(v!=null)?v:false;var z=w.ownerDocument;var p=(z.createElementNS!=null)?z.createElementNS(mxConstants.NS_SVG,"filter"):z.createElement("filter");p.setAttribute("id",this.shadowId);var q=(z.createElementNS!=null)?z.createElementNS(mxConstants.NS_SVG,"feGaussianBlur"):z.createElement("feGaussianBlur");q.setAttribute("in","SourceAlpha");q.setAttribute("stdDeviation","1.7");q.setAttribute("result","blur");p.appendChild(q);var s=(z.createElementNS!=null)?z.createElementNS(mxConstants.NS_SVG,"feOffset"):z.createElement("feOffset");s.setAttribute("in","blur");s.setAttribute("dx","3");s.setAttribute("dy","3");s.setAttribute("result","offsetBlur");p.appendChild(s);var o=(z.createElementNS!=null)?z.createElementNS(mxConstants.NS_SVG,"feFlood"):z.createElement("feFlood");o.setAttribute("flood-color","#3D4574");o.setAttribute("flood-opacity","0.4");o.setAttribute("result","offsetColor");p.appendChild(o);var x=(z.createElementNS!=null)?z.createElementNS(mxConstants.NS_SVG,"feComposite"):z.createElement("feComposite");x.setAttribute("in","offsetColor");x.setAttribute("in2","offsetBlur");x.setAttribute("operator","in");x.setAttribute("result","offsetBlur");p.appendChild(x);var u=(z.createElementNS!=null)?z.createElementNS(mxConstants.NS_SVG,"feBlend"):z.createElement("feBlend");u.setAttribute("in","SourceGraphic");u.setAttribute("in2","offsetBlur");p.appendChild(u);var r=w.getElementsByTagName("defs");var t=null;if(r.length==0){t=(z.createElementNS!=null)?z.createElementNS(mxConstants.NS_SVG,"defs"):z.createElement("defs");if(w.firstChild!=null){w.insertBefore(t,w.firstChild)}else{w.appendChild(t)}}else{t=r[0]}t.appendChild(p);if(!v){(y||w.getElementsByTagName("g")[0]).setAttribute("filter","url(#"+this.shadowId+")");if(!isNaN(parseInt(w.getAttribute("width")))){w.setAttribute("width",parseInt(w.getAttribute("width"))+6);w.setAttribute("height",parseInt(w.getAttribute("height"))+6)}}return p};Graph.prototype.setShadowVisible=function(p,o){if(mxClient.IS_SVG){o=(o!=null)?o:true;this.shadowVisible=p;if(this.shadowVisible){this.view.getDrawPane().setAttribute("filter","url(#"+this.shadowId+")")}else{this.view.getDrawPane().removeAttribute("filter")}if(o){this.fireEvent(new mxEventObject("shadowVisibleChanged"))}}};Graph.prototype.selectUnlockedLayer=function(){if(this.defaultParent==null){var p=this.model.getChildCount(this.model.root);var o=null;var q=0;do{o=this.model.getChildAt(this.model.root,q)}while(q++<p&&mxUtils.getValue(this.getCellStyle(o),"locked","0")=="1");if(o!=null){this.setDefaultParent(o)}}};mxStencilRegistry.libraries.mockup=[SHAPES_PATH+"/mockup/mxMockupButtons.js"];mxStencilRegistry.libraries.arrows2=[SHAPES_PATH+"/mxArrows.js"];mxStencilRegistry.libraries.bpmn=[SHAPES_PATH+"/bpmn/mxBpmnShape2.js",STENCIL_PATH+"/bpmn.xml"];mxStencilRegistry.libraries.er=[SHAPES_PATH+"/er/mxER.js"];mxStencilRegistry.libraries.ios=[SHAPES_PATH+"/mockup/mxMockupiOS.js"];mxStencilRegistry.libraries.rackGeneral=[SHAPES_PATH+"/rack/mxRack.js",STENCIL_PATH+"/rack/general.xml"];mxStencilRegistry.libraries.rackF5=[STENCIL_PATH+"/rack/f5.xml"];mxStencilRegistry.libraries.lean_mapping=[SHAPES_PATH+"/mxLeanMap.js",STENCIL_PATH+"/lean_mapping.xml"];mxStencilRegistry.libraries.basic=[SHAPES_PATH+"/mxBasic.js",STENCIL_PATH+"/basic.xml"];mxStencilRegistry.libraries.ios7icons=[STENCIL_PATH+"/ios7/icons.xml"];mxStencilRegistry.libraries.ios7ui=[SHAPES_PATH+"/ios7/mxIOS7Ui.js",STENCIL_PATH+"/ios7/misc.xml"];mxStencilRegistry.libraries.android=[SHAPES_PATH+"/mxAndroid.js",STENCIL_PATH+"/android/android.xml"];mxStencilRegistry.libraries["electrical/transmission"]=[SHAPES_PATH+"/mxElectrical.js",STENCIL_PATH+"/electrical/transmission.xml"];mxStencilRegistry.libraries["mockup/buttons"]=[SHAPES_PATH+"/mockup/mxMockupButtons.js"];mxStencilRegistry.libraries["mockup/containers"]=[SHAPES_PATH+"/mockup/mxMockupContainers.js"];mxStencilRegistry.libraries["mockup/forms"]=[SHAPES_PATH+"/mockup/mxMockupForms.js"];mxStencilRegistry.libraries["mockup/graphics"]=[SHAPES_PATH+"/mockup/mxMockupGraphics.js",STENCIL_PATH+"/mockup/misc.xml"];mxStencilRegistry.libraries["mockup/markup"]=[SHAPES_PATH+"/mockup/mxMockupMarkup.js"];mxStencilRegistry.libraries["mockup/misc"]=[SHAPES_PATH+"/mockup/mxMockupMisc.js",STENCIL_PATH+"/mockup/misc.xml"];mxStencilRegistry.libraries["mockup/navigation"]=[SHAPES_PATH+"/mockup/mxMockupNavigation.js",STENCIL_PATH+"/mockup/misc.xml"];mxStencilRegistry.libraries["mockup/text"]=[SHAPES_PATH+"/mockup/mxMockupText.js"];mxStencilRegistry.libraries.floorplan=[SHAPES_PATH+"/mxFloorplan.js",STENCIL_PATH+"/floorplan.xml"];mxStencilRegistry.libraries.bootstrap=[SHAPES_PATH+"/mxBootstrap.js",STENCIL_PATH+"/bootstrap.xml"];mxStencilRegistry.libraries.gmdl=[SHAPES_PATH+"/mxGmdl.js",STENCIL_PATH+"/gmdl.xml"];mxStencilRegistry.libraries.cabinets=[SHAPES_PATH+"/mxCabinets.js",STENCIL_PATH+"/cabinets.xml"];mxStencilRegistry.libraries.archimate=[SHAPES_PATH+"/mxArchiMate.js"];mxStencilRegistry.libraries.archimate3=[SHAPES_PATH+"/mxArchiMate3.js"];mxStencilRegistry.libraries.sysml=[SHAPES_PATH+"/mxSysML.js"];mxStencilRegistry.libraries.eip=[SHAPES_PATH+"/mxEip.js",STENCIL_PATH+"/eip.xml"];mxStencilRegistry.libraries.networks=[SHAPES_PATH+"/mxNetworks.js",STENCIL_PATH+"/networks.xml"];mxStencilRegistry.libraries.aws3d=[SHAPES_PATH+"/mxAWS3D.js",STENCIL_PATH+"/aws3d.xml"];mxStencilRegistry.libraries.pid2inst=[SHAPES_PATH+"/pid2/mxPidInstruments.js"];mxStencilRegistry.libraries.pid2misc=[SHAPES_PATH+"/pid2/mxPidMisc.js",STENCIL_PATH+"/pid/misc.xml"];mxStencilRegistry.libraries.pid2valves=[SHAPES_PATH+"/pid2/mxPidValves.js"];mxStencilRegistry.libraries.pidFlowSensors=[STENCIL_PATH+"/pid/flow_sensors.xml"];mxMarker.getPackageForType=function(p){var o=null;if(p!=null&&p.length>0){if(p.substring(0,2)=="ER"){o="mxgraph.er"}else{if(p.substring(0,5)=="sysML"){o="mxgraph.sysml"}}}return o};var a=mxMarker.createMarker;mxMarker.createMarker=function(q,s,u,t,w,v,z,o,x,y){if(u!=null){var r=mxMarker.markers[u];if(r==null){var p=this.getPackageForType(u);if(p!=null){mxStencilRegistry.getStencil(p)}}}return a.apply(this,arguments)}})();GraphViewer=function(a,b,c){this.init(a,b,c)};mxUtils.extend(GraphViewer,mxEventSource);GraphViewer.prototype.editBlankUrl="https://www.draw.io/?client=1";GraphViewer.prototype.editBlankFallbackUrl="https://www.draw.io/?create=drawdata&splash=0";GraphViewer.prototype.imageBaseUrl="https://www.draw.io/";GraphViewer.prototype.toolbarHeight=(document.compatMode=="BackCompat")?28:30;GraphViewer.prototype.lightboxChrome=true;GraphViewer.prototype.lightboxZIndex=999;GraphViewer.prototype.toolbarZIndex=999;GraphViewer.prototype.imageBaseUrl="https://www.draw.io/";GraphViewer.prototype.autoFit=true;GraphViewer.prototype.allowZoomIn=false;GraphViewer.prototype.showTitleAsTooltip=false;GraphViewer.prototype.checkVisibleState=true;GraphViewer.prototype.init=function(a,i,e){this.graphConfig=(e!=null)?e:{};this.autoFit=(e["auto-fit"]!=null)?e["auto-fit"]:this.autoFit;this.allowZoomIn=(e["allow-zoom-in"]!=null)?e["allow-zoom-in"]:this.allowZoomIn;this.checkVisibleState=(e["check-visible-state"]!=null)?e["check-visible-state"]:this.checkVisibleState;this.toolbarItems=(this.graphConfig.toolbar!=null)?this.graphConfig.toolbar.split(" "):[];this.zoomEnabled=mxUtils.indexOf(this.toolbarItems,"zoom")>=0;this.layersEnabled=mxUtils.indexOf(this.toolbarItems,"layers")>=0;this.lightboxEnabled=mxUtils.indexOf(this.toolbarItems,"lightbox")>=0;this.lightboxClickEnabled=this.graphConfig.lightbox!=false;this.initialWidth=(a!=null)?a.style.width:null;this.widthIsEmpty=(this.initialWidth!=null)?this.initialWidth=="":true;this.editor=null;if(i!=null){this.xmlDocument=i.ownerDocument;this.xmlNode=i;this.xml=mxUtils.getXml(i);if(a!=null){this.graph=new Graph(a);this.graph.transparentBackground=false;if(this.graphConfig.move){this.graph.isMoveCellsEvent=function(k){return true}}if(this.lightboxClickEnabled){a.style.cursor="pointer"}this.editor=new Editor(true,null,null,this.graph);this.editor.editBlankUrl=this.editBlankUrl;this.editor.editBlankFallbackUrl=this.editBlankFallbackUrl;this.graph.lightbox=true;this.graph.centerZoom=false;this.graph.autoExtend=false;this.graph.autoScroll=false;this.graph.setEnabled(false);var j=this;this.graph.getImageFromBundles=function(k){return j.getImageUrl(k)};if(mxClient.IS_SVG){this.editor.graph.addSvgShadow(this.graph.view.canvas.ownerSVGElement,null,true)}this.currentPage=parseInt(this.graphConfig.page)||0;if(i.nodeName=="mxfile"){var b=i.getElementsByTagName("diagram");if(b.length>0){var h=this.graph.getGlobalVariable;var j=this;this.graph.getGlobalVariable=function(l){var k=b[j.currentPage];if(l=="page"){return k.getAttribute("name")||"Page-"+(j.currentPage+1)}else{if(l=="pagenumber"){return j.currentPage+1}}return h.apply(this,arguments)}}}urlParams.page=j.currentPage;var c=mxUtils.bind(this,function(){this.graph.getModel().beginUpdate();try{urlParams.nav=(this.graphConfig.nav!=false)?"1":"0";this.editor.setGraphXml(this.xmlNode);this.graph.border=(this.graphConfig.border!=null)?this.graphConfig.border:8;this.graph.view.scale=this.graphConfig.zoom||1}finally{this.graph.getModel().endUpdate()}this.graph.panningHandler.useLeftButtonForPanning=true;this.graph.panningHandler.isForcePanningEvent=function(k){return !mxEvent.isPopupTrigger(k.getEvent())&&this.graph.container.style.overflow=="auto"};this.graph.panningHandler.usePopupTrigger=false;this.graph.panningHandler.pinchEnabled=false;this.graph.panningHandler.ignoreCell=true;this.graph.setPanning(false);this.addSizeHandler();this.showLayers(this.graph);this.addClickHandler(this.graph);this.graph.setTooltips(this.graphConfig.tooltips!=false);this.graph.initialViewState={translate:this.graph.view.translate.clone(),scale:this.graph.view.scale};if(this.graphConfig.toolbar!=null){this.addToolbar()}else{if(this.graphConfig.title!=null&&this.showTitleAsTooltip){a.setAttribute("title",this.graphConfig.title)}}});var d=window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver;if(this.checkVisibleState&&a.offsetWidth==0&&typeof d!=="undefined"){var g=this.getObservableParent(a);var f=new d(mxUtils.bind(this,function(k){if(a.offsetWidth>0){f.disconnect();c()}}));f.observe(g,{attributes:true})}else{c()}}}};GraphViewer.prototype.getObservableParent=function(a){var b=a.parentNode;while(b!=document.body&&b.parentNode!=null&&mxUtils.getCurrentStyle(b).display!=="none"){b=b.parentNode}return b};GraphViewer.prototype.getImageUrl=function(a){if(a!=null&&a.substring(0,7)!="http://"&&a.substring(0,8)!="https://"&&a.substring(0,10)!="data:image"){if(a.charAt(0)=="/"){a=a.substring(1,a.length)}a=this.imageBaseUrl+a}return a};GraphViewer.prototype.setXmlNode=function(a){this.xmlDocument=a.ownerDocument;this.xml=mxUtils.getXml(a);this.xmlNode=a;this.updateGraphXml(a);this.fireEvent(new mxEventObject("xmlNodeChanged"))};GraphViewer.prototype.setFileNode=function(a){if(this.xmlNode==null){this.xmlDocument=a.ownerDocument;this.xml=mxUtils.getXml(a);this.xmlNode=a}this.setGraphXml(a)};GraphViewer.prototype.updateGraphXml=function(a){this.setGraphXml(a);this.fireEvent(new mxEventObject("graphChanged"))};GraphViewer.prototype.setGraphXml=function(a){if(this.graph!=null){this.graph.view.translate=new mxPoint();this.graph.view.scale=1;this.graph.getModel().clear();this.editor.setGraphXml(a);if(this.widthIsEmpty){this.graph.container.style.width="";this.graph.container.style.height=""}else{this.graph.container.style.width=this.initialWidth}this.positionGraph();this.graph.initialViewState={translate:this.graph.view.translate.clone(),scale:this.graph.view.scale}}};GraphViewer.prototype.addSizeHandler=function(){var c=this.graph.container;var a=this.graph.getGraphBounds();var i=false;c.style.overflow="hidden";var f=mxUtils.bind(this,function(){if(!i){i=true;var m=this.graph.getGraphBounds();if(c.offsetWidth<m.width+this.graph.border){c.style.overflow="auto"}else{c.style.overflow="hidden"}if(this.toolbar!=null){var n=c.getBoundingClientRect();var l=mxUtils.getScrollOrigin(document.body);var k=(document.body.style.position==="relative")?document.body.getBoundingClientRect():{left:-l.x,top:-l.y};n={left:n.left-k.left,top:n.top-k.top,bottom:n.bottom-k.top,right:n.right-k.left};this.toolbar.style.left=n.left+"px";if(this.graphConfig["toolbar-position"]=="bottom"){this.toolbar.style.top=n.bottom-1+"px"}else{if(this.graphConfig["toolbar-position"]!="inline"){this.toolbar.style.width=Math.max(this.minToolbarWidth,c.offsetWidth)+"px";this.toolbar.style.top=n.top+1+"px"}else{this.toolbar.style.top=n.top+"px"}}}i=false}});var d=null;var b=null;var e=false;this.fitGraph=function(m){var l=c.offsetWidth;if(l!=d){if(!e){e=true;this.graph.maxFitScale=(m!=null)?m:(this.graphConfig.zoom||((this.allowZoomIn)?null:1));this.graph.fit(null,null,null,null,false,true);this.graph.maxFitScale=null;var k=this.graph.getGraphBounds();this.updateContainerHeight(c,k.height+2*this.graph.border+1);this.graph.initialViewState={translate:this.graph.view.translate.clone(),scale:this.graph.view.scale};d=l;window.setTimeout(function(){e=false},0)}}};if(mxClient.IS_QUIRKS||document.documentMode<=9){mxEvent.addListener(window,"resize",f);this.graph.addListener("size",f)}else{new ResizeSensor(this.graph.container,f)}if(this.graphConfig.resize||((this.zoomEnabled||!this.autoFit)&&this.graphConfig.resize!=false)){this.graph.minimumContainerSize=new mxRectangle(0,0,100,this.toolbarHeight);this.graph.resizeContainer=true}else{if(this.widthIsEmpty){this.updateContainerWidth(c,a.width+2*this.graph.border)}this.updateContainerHeight(c,a.height+2*this.graph.border+1);if(!this.zoomEnabled&&this.autoFit){var d=null;var j=null;var b=null;var g=mxUtils.bind(this,function(){window.clearTimeout(j);if(!e){j=window.setTimeout(mxUtils.bind(this,this.fitGraph),100)}});if(mxClient.IS_QUIRKS||document.documentMode<=9){mxEvent.addListener(window,"resize",g)}else{new ResizeSensor(this.graph.container,g)}}else{if(!(mxClient.IS_QUIRKS||document.documentMode<=9)){this.graph.addListener("size",f)}}}var h=mxUtils.bind(this,function(){var k=c.style.minWidth;if(this.widthIsEmpty){c.style.minWidth="100%"}if(c.offsetWidth>0&&(this.allowZoomIn||(a.width+2*this.graph.border>c.offsetWidth||a.height+2*this.graph.border>this.graphConfig["max-height"]))){var l=null;if(this.graphConfig["max-height"]!=null){l=this.graphConfig["max-height"]/(a.height+2*this.graph.border)}this.fitGraph(l)}else{this.graph.view.setTranslate(Math.floor((this.graph.border-a.x)/this.graph.view.scale),Math.floor((this.graph.border-a.y)/this.graph.view.scale));d=c.offsetWidth}c.style.minWidth=k});if(mxClient.IS_QUIRKS||document.documentMode==8){window.setTimeout(h,0)}else{h()}this.positionGraph=function(){a=this.graph.getGraphBounds();d=null;h()}};GraphViewer.prototype.updateContainerWidth=function(a,b){a.style.width=b+"px"};GraphViewer.prototype.updateContainerHeight=function(b,a){if(this.zoomEnabled||!this.autoFit||document.compatMode=="BackCompat"||mxClient.IS_QUIRKS||document.documentMode==8){b.style.height=a+"px"}};GraphViewer.prototype.showLayers=function(g,e){var h=this.graphConfig.layers;if(h!=null||e!=null){var a=(h!=null)?h.split(" "):null;if(e!=null||a.length>0){var f=(e!=null)?e.getModel():null;var c=g.getModel();c.beginUpdate();try{var b=c.getChildCount(c.root);for(var d=0;d<b;d++){c.setVisible(c.getChildAt(c.root,d),(e!=null)?f.isVisible(f.getChildAt(f.root,d)):false)}if(f==null){for(var d=0;d<a.length;d++){c.setVisible(c.getChildAt(c.root,parseInt(a[d])),true)}}}finally{c.endUpdate()}}}};GraphViewer.prototype.addToolbar=function(){var n=this.graph.container;var e=this.graph.container.style.cursor;if(this.graphConfig["toolbar-position"]=="bottom"){n.style.marginBottom=this.toolbarHeight+"px"}else{if(this.graphConfig["toolbar-position"]!="inline"){n.style.marginTop=this.toolbarHeight+"px"}}var m=n.ownerDocument.createElement("div");m.style.position="absolute";m.style.overflow="hidden";m.style.boxSizing="border-box";m.style.whiteSpace="nowrap";m.style.zIndex=this.toolbarZIndex;m.style.backgroundColor="#eee";m.style.height=this.toolbarHeight+"px";this.toolbar=m;if(this.graphConfig["toolbar-position"]=="inline"){mxUtils.setPrefixedStyle(m.style,"transition","opacity 100ms ease-in-out");mxUtils.setOpacity(m,30);var h=null;var v=null;var a=mxUtils.bind(this,function(i){if(h!=null){window.clearTimeout(h);fadeThead=null}if(v!=null){window.clearTimeout(v);fadeThead2=null}h=window.setTimeout(mxUtils.bind(this,function(){mxUtils.setOpacity(m,0);h=null;v=window.setTimeout(mxUtils.bind(this,function(){m.style.display="none";v=null}),100)}),i||200)});var r=mxUtils.bind(this,function(i){if(h!=null){window.clearTimeout(h);fadeThead=null}if(v!=null){window.clearTimeout(v);fadeThead2=null}m.style.display="";mxUtils.setOpacity(m,i||30)});mxEvent.addListener(this.graph.container,(mxClient.IS_POINTER)?"pointermove":"mousemove",mxUtils.bind(this,function(i){if(!mxEvent.isTouchEvent(i)){r(30);a()}}));mxEvent.addListener(m,(mxClient.IS_POINTER)?"pointermove":"mousemove",function(i){mxEvent.consume(i)});mxEvent.addListener(m,"mouseenter",mxUtils.bind(this,function(i){r(100)}));mxEvent.addListener(m,"mousemove",mxUtils.bind(this,function(i){r(100);mxEvent.consume(i)}));mxEvent.addListener(m,"mouseleave",mxUtils.bind(this,function(i){if(!mxEvent.isTouchEvent(i)){r(30)}}));var b=this.graph;var u=b.getTolerance();b.addMouseListener({startX:0,startY:0,scrollLeft:0,scrollTop:0,mouseDown:function(i,D){this.startX=D.getGraphX();this.startY=D.getGraphY();this.scrollLeft=b.container.scrollLeft;this.scrollTop=b.container.scrollTop},mouseMove:function(i,D){},mouseUp:function(i,D){if(mxEvent.isTouchEvent(D.getEvent())){if((Math.abs(this.scrollLeft-b.container.scrollLeft)<u&&Math.abs(this.scrollTop-b.container.scrollTop)<u)&&(Math.abs(this.startX-D.getGraphX())<u&&Math.abs(this.startY-D.getGraphY())<u)){if(parseFloat(m.style.opacity||0)>0){a()}else{r(30)}}}}})}var p=this.toolbarItems;var j=0;function t(G,F,H,E){var i=document.createElement("div");i.style.borderRight="1px solid #d0d0d0";i.style.padding="3px 6px 3px 6px";mxEvent.addListener(i,"click",G);if(H!=null){i.setAttribute("title",H)}if(mxClient.IS_QUIRKS){i.style.display="inline"}else{i.style.display="inline-block"}var D=document.createElement("img");D.setAttribute("border","0");D.setAttribute("src",F);if(E==null||E){mxEvent.addListener(i,"mouseenter",function(){i.style.backgroundColor="#ddd"});mxEvent.addListener(i,"mouseleave",function(){i.style.backgroundColor="#eee"});mxUtils.setOpacity(D,60);i.style.cursor="pointer"}else{mxUtils.setOpacity(i,30)}i.appendChild(D);m.appendChild(i);j++;return i}var q=null;var y=false;var c=null;for(var x=0;x<p.length;x++){var f=p[x];if(f=="pages"){var B=[];c=n.ownerDocument.createElement("div");c.style.cssText="display:inline-block;position:relative;padding:3px 4px 0 4px;vertical-align:top;font-family:Helvetica,Arial;font-size:12px;top:4px;cursor:default;";mxUtils.setOpacity(c,70);var C=t(mxUtils.bind(this,function(){this.currentPage=mxUtils.mod(this.currentPage-1,B.length);c.innerHTML="";mxUtils.write(c,(this.currentPage+1)+" / "+B.length);this.updateGraphXml(mxUtils.parseXml(this.graph.decompress(mxUtils.getTextContent(B[this.currentPage]))).documentElement)}),Editor.previousImage,mxResources.get("previousPage")||"Previous Page");C.style.borderRightStyle="none";C.style.paddingLeft="0px";C.style.paddingRight="0px";m.appendChild(c);var l=t(mxUtils.bind(this,function(){this.currentPage=mxUtils.mod(this.currentPage+1,B.length);c.innerHTML="";mxUtils.write(c,(this.currentPage+1)+" / "+B.length);this.updateGraphXml(mxUtils.parseXml(this.graph.decompress(mxUtils.getTextContent(B[this.currentPage]))).documentElement)}),Editor.nextImage,mxResources.get("nextPage")||"Next Page");l.style.paddingLeft="0px";l.style.paddingRight="0px";var k=null;var g=mxUtils.bind(this,function(){if(this.xmlNode==null||this.xmlNode.nodeName!="mxfile"){B=[]}if(this.xmlNode!=k){B=this.xmlNode.getElementsByTagName("diagram");c.innerHTML="";mxUtils.write(c,(this.currentPage+1)+" / "+B.length);k=this.xmlNode}c.style.display=(B.length>1)?"inline-block":"none";C.style.display=c.style.display;l.style.display=c.style.display});this.addListener("xmlNodeChanged",g);g()}else{if(f=="zoom"){if(this.zoomEnabled){t(mxUtils.bind(this,function(){this.graph.zoomOut()}),Editor.zoomOutImage,mxResources.get("zoomOut")||"Zoom Out");t(mxUtils.bind(this,function(){this.graph.zoomIn()}),Editor.zoomInImage,mxResources.get("zoomIn")||"Zoom In");t(mxUtils.bind(this,function(){this.graph.view.scaleAndTranslate(this.graph.initialViewState.scale,this.graph.initialViewState.translate.x,this.graph.initialViewState.translate.y)}),Editor.zoomFitImage,mxResources.get("fit")||"Fit")}}else{if(f=="layers"){if(this.layersEnabled){var d=this.graph.getModel();var A=t(mxUtils.bind(this,function(i){if(q!=null){q.parentNode.removeChild(q);q=null}else{q=this.graph.createLayersDialog();mxEvent.addListener(q,"mouseleave",function(){q.parentNode.removeChild(q);q=null});var E=A.getBoundingClientRect();q.style.width="140px";q.style.padding="2px 0px 2px 0px";q.style.border="1px solid #d0d0d0";q.style.backgroundColor="#eee";q.style.fontFamily="Helvetica Neue,Helvetica,Arial Unicode MS,Arial";q.style.fontSize="11px";q.style.zIndex=this.toolbarZIndex+1;mxUtils.setOpacity(q,80);var D=mxUtils.getDocumentScrollOrigin(document);q.style.left=D.x+E.left+"px";q.style.top=D.y+E.bottom+"px";document.body.appendChild(q)}}),Editor.layersImage,mxResources.get("layers")||"Layers");d.addListener(mxEvent.CHANGE,function(){A.style.display=(d.getChildCount(d.root)>1)?"inline-block":"none"});A.style.display=(d.getChildCount(d.root)>1)?"inline-block":"none"}}else{if(f=="lightbox"){if(this.lightboxEnabled){t(mxUtils.bind(this,function(){this.showLightbox()}),Editor.maximizeImage,(mxResources.get("show")||"Show"))}}else{if(this.graphConfig["toolbar-buttons"]!=null){var o=this.graphConfig["toolbar-buttons"][f];if(o!=null){t((o.enabled==null||o.enabled)?o.handler:function(){},o.image,o.title,o.enabled)}}}}}}}if(this.graph.minimumContainerSize!=null){this.graph.minimumContainerSize.width=j*34}if(this.graphConfig.title!=null){var w=n.ownerDocument.createElement("div");w.style.cssText="display:inline-block;position:relative;padding:3px 6px 0 6px;vertical-align:top;font-family:Helvetica,Arial;font-size:12px;top:4px;cursor:default;";w.setAttribute("title",this.graphConfig.title);mxUtils.write(w,this.graphConfig.title);mxUtils.setOpacity(w,70);m.appendChild(w)}this.minToolbarWidth=j*34;var s=n.style.border;var z=mxUtils.bind(this,function(){var E=n.getBoundingClientRect();var D=mxUtils.getScrollOrigin(document.body);var i=(document.body.style.position==="relative")?document.body.getBoundingClientRect():{left:-D.x,top:-D.y};E={left:E.left-i.left,top:E.top-i.top,bottom:E.bottom-i.top,right:E.right-i.left};m.style.left=E.left+"px";m.style.width=(this.graphConfig["toolbar-position"]=="inline")?"auto":Math.max(this.minToolbarWidth,n.offsetWidth)+"px";m.style.border="1px solid #d0d0d0";if(this.graphConfig["toolbar-position"]=="bottom"){m.style.top=E.bottom-1+"px"}else{if(this.graphConfig["toolbar-position"]!="inline"){m.style.marginTop=-this.toolbarHeight+"px";m.style.top=E.top+1+"px"}else{m.style.top=E.top+"px"}}if(s=="1px solid transparent"){n.style.border="1px solid #d0d0d0"}document.body.appendChild(m);var F=mxUtils.bind(this,function(){if(this.graphConfig["toolbar-nohide"]!=true){if(m.parentNode!=null){m.parentNode.removeChild(m)}if(q!=null){q.parentNode.removeChild(q);q=null}n.style.border=s}});mxEvent.addListener(document,"mousemove",function(G){var H=mxEvent.getSource(G);while(H!=null){if(H==n||H==m||H==q){return}H=H.parentNode}F()});mxEvent.addListener(document,"mouseleave",function(G){F()})});mxEvent.addListener(n,"mouseenter",z)};GraphViewer.prototype.addClickHandler=function(b,a){b.linkPolicy=this.graphConfig.target||b.linkPolicy;b.addClickHandler(this.graphConfig.highlight,function(c){if(a!=null){var e=mxEvent.getSource(c);var d=e.getAttribute("href");if(d!=null&&!(b.isExternalProtocol(d)||b.isBlankLink(d))){a.destroy()}}},mxUtils.bind(this,function(c){if(a==null&&this.lightboxClickEnabled&&(!mxEvent.isTouchEvent(c)||this.toolbarItems.length==0)){this.showLightbox()}}))};GraphViewer.prototype.showLightbox=function(){if(this.graphConfig.lightbox=="open"||window.self!==window.top){var c=(this.layersEnabled)?"&layers=1":"";if(typeof window.postMessage!=="undefined"&&(document.documentMode==null||document.documentMode>=10)){var a=null;var b=mxUtils.bind(this,function(d){if(d.data=="ready"&&d.source==a){a.postMessage(this.xml,"*");mxEvent.removeListener(window,"message",b)}});mxEvent.addListener(window,"message",b);a=window.open("https://www.draw.io/?client=1&lightbox=1&close=1&edit=_blank"+c)}else{window.drawdata=this.xml;window.open("https://www.draw.io/?client=1&lightbox=1&edit=_blank"+c)}}else{this.showLocalLightbox()}};GraphViewer.prototype.showLocalLightbox=function(){var f=mxUtils.getDocumentScrollOrigin(document);var a=document.createElement("div");if(mxClient.IS_QUIRKS){a.style.position="absolute";a.style.left=f.x+"px";a.style.top=f.y+"px";a.style.width=document.body.offsetWidth+"px";a.style.height=document.body.offsetHeight+"px"}else{a.style.cssText="position:fixed;top:0;left:0;bottom:0;right:0;"}a.style.zIndex=this.lightboxZIndex;a.style.backgroundColor="#000000";mxUtils.setOpacity(a,70);document.body.appendChild(a);var i=document.createElement("img");i.setAttribute("border","0");i.setAttribute("src",Editor.closeImage);if(mxClient.IS_QUIRKS){i.style.position="absolute";i.style.right=32+"px";i.style.top=f.y+32+"px"}else{i.style.cssText="position:fixed;top:32px;right:32px;"}i.style.cursor="pointer";mxEvent.addListener(i,"click",function(){d.destroy()});urlParams.pages="1";urlParams.page=this.currentPage;urlParams.nav=(this.graphConfig.nav!=false)?"1":"0";urlParams.layers=(this.layersEnabled)?"1":"0";if(document.documentMode==null||document.documentMode>=10){Editor.prototype.editButtonLink=this.graphConfig.edit}EditorUi.prototype.updateActionStates=function(){};EditorUi.prototype.addBeforeUnloadListener=function(){};EditorUi.prototype.addChromelessClickHandler=function(){};Graph.prototype.shadowId="lightboxDropShadow";var d=new EditorUi(new Editor(true),document.createElement("div"),true);Graph.prototype.shadowId="dropShadow";d.refresh=function(){};mxEvent.addListener(a,"click",function(){d.destroy()});d.editor.editBlankUrl=this.editBlankUrl;d.editor.editBlankFallbackUrl=this.editBlankFallbackUrl;var j=d.editor.getEditBlankUrl;d.editor.getEditBlankUrl=function(m,n){var l="";if(d.pages!=null&&d.currentPage!=null){var k=mxUtils.indexOf(d.pages,d.currentPage);if(k>0){l="&page="+k}}return j.apply(this,arguments)+l};var c=mxUtils.bind(this,function(k){if(k.keyCode==27){d.destroy()}});var e=d.destroy;d.destroy=function(){mxEvent.removeListener(document.documentElement,"keydown",c);document.body.removeChild(a);document.body.removeChild(i);document.body.style.overflow="auto";GraphViewer.resizeSensorEnabled=true;e.apply(this,arguments)};var g=d.editor.graph;var b=g.container;b.style.overflow="hidden";if(this.lightboxChrome){b.style.border="1px solid #c0c0c0";b.style.margin="40px";mxEvent.addListener(document.documentElement,"keydown",c)}else{a.style.display="none";i.style.display="none"}var h=this;g.getImageFromBundles=function(k){return h.getImageUrl(k)};if(this.graphConfig.move){g.isMoveCellsEvent=function(k){return true}}if(!mxClient.IS_QUIRKS){mxUtils.setPrefixedStyle(b.style,"border-radius","4px");b.style.position="fixed"}GraphViewer.resizeSensorEnabled=false;document.body.style.overflow="hidden";if(!mxClient.IS_SF){mxUtils.setPrefixedStyle(b.style,"transform","rotateY(90deg)");mxUtils.setPrefixedStyle(b.style,"transition","all .25s ease-in-out")}this.addClickHandler(g,d);window.setTimeout(mxUtils.bind(this,function(){b.style.outline="none";b.style.zIndex=this.lightboxZIndex;i.style.zIndex=this.lightboxZIndex;document.body.appendChild(b);document.body.appendChild(i);d.setFileData(this.xml);mxUtils.setPrefixedStyle(b.style,"transform","rotateY(0deg)");d.chromelessToolbar.style.bottom=60+"px";d.chromelessToolbar.style.zIndex=this.lightboxZIndex;document.body.appendChild(d.chromelessToolbar);d.getEditBlankXml=mxUtils.bind(this,function(){return this.xml});if(mxClient.IS_QUIRKS){b.style.position="absolute";b.style.display="block";b.style.left=f.x+"px";b.style.top=f.y+"px";b.style.width=document.body.clientWidth-80+"px";b.style.height=document.body.clientHeight-80+"px";b.style.backgroundColor="white";d.chromelessToolbar.style.display="block";d.chromelessToolbar.style.position="absolute";d.chromelessToolbar.style.bottom="";d.chromelessToolbar.style.top=f.y+document.body.clientHeight-100+"px"}d.lightboxFit();d.chromelessResize();this.showLayers(g,this.graph)}),0);return d};GraphViewer.processElements=function(a){mxUtils.forEach(GraphViewer.getElementsByClassName(a||"mxgraph"),function(c){try{c.innerHTML="";GraphViewer.createViewerForElement(c)}catch(b){c.innerHTML=b.message;throw b}})};GraphViewer.getElementsByClassName=function(g){if(document.getElementsByClassName){var e=document.getElementsByClassName(g);var a=[];for(var d=0;d<e.length;d++){a.push(e[d])}return a}else{var c=document.getElementsByTagName("*");var e=[];for(var d=0;d<c.length;d++){var b=c[d].className;if(b!=null&&b.length>0){var f=b.split(" ");if(mxUtils.indexOf(f,g)>=0){e.push(c[d])}}}return e}};GraphViewer.createViewerForElement=function(b,e){var d=b.getAttribute("data-mxgraph");if(d!=null){var a=JSON.parse(d);var c=function(f){var g=mxUtils.parseXml(f);var h=new GraphViewer(b,g.documentElement,a);if(e!=null){e(h)}};if(a.url!=null){GraphViewer.getUrl(a.url,function(f){c(f)})}else{c(a.xml)}}};GraphViewer.initCss=function(){try{var a=document.createElement("style");a.type="text/css";a.innerHTML=["div.mxTooltip {","-webkit-box-shadow: 3px 3px 12px #C0C0C0;","-moz-box-shadow: 3px 3px 12px #C0C0C0;","box-shadow: 3px 3px 12px #C0C0C0;","background: #FFFFCC;","border-style: solid;","border-width: 1px;","border-color: black;","font-family: Arial;","font-size: 8pt;","position: absolute;","cursor: default;","padding: 4px;","color: black;}","td.mxPopupMenuIcon div {","width:16px;","height:16px;}","html div.mxPopupMenu {","-webkit-box-shadow:2px 2px 3px #d5d5d5;","-moz-box-shadow:2px 2px 3px #d5d5d5;","box-shadow:2px 2px 3px #d5d5d5;","_filter:progid:DXImageTransform.Microsoft.DropShadow(OffX=2, OffY=2, Color='#d0d0d0',Positive='true');","background:white;","position:absolute;","border:3px solid #e7e7e7;","padding:3px;}","html table.mxPopupMenu {","border-collapse:collapse;","margin:0px;}","html td.mxPopupMenuItem {","padding:7px 30px 7px 30px;","font-family:Helvetica Neue,Helvetica,Arial Unicode MS,Arial;","font-size:10pt;}","html td.mxPopupMenuIcon {","background-color:white;","padding:0px;}","td.mxPopupMenuIcon .geIcon {","padding:2px;","padding-bottom:4px;","margin:2px;","border:1px solid transparent;","opacity:0.5;","_width:26px;","_height:26px;}","td.mxPopupMenuIcon .geIcon:hover {","border:1px solid gray;","border-radius:2px;","opacity:1;}","html tr.mxPopupMenuItemHover {","background-color: #eeeeee;","color: black;}","table.mxPopupMenu hr {","color:#cccccc;","background-color:#cccccc;","border:none;","height:1px;}","table.mxPopupMenu tr {	font-size:4pt;}"].join("\n");document.getElementsByTagName("head")[0].appendChild(a)}catch(b){}};GraphViewer.cachedUrls={};GraphViewer.getUrl=function(b,c,a){if(GraphViewer.cachedUrls[b]!=null){c(GraphViewer.cachedUrls[b])}else{var d=(navigator.userAgent.indexOf("MSIE 9")>0)?new XDomainRequest():new XMLHttpRequest();d.open("GET",b);d.onload=function(){c((d.getText!=null)?d.getText():d.responseText)};d.onerror=a;d.send()}};GraphViewer.resizeSensorEnabled=true;(function(){var b=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||function(c){return window.setTimeout(c,20)};var a=function(g,k){var m=function(){if(GraphViewer.resizeSensorEnabled){k()}};function l(){this.q=[];this.add=function(i){this.q.push(i)};var p,o;this.call=function(){for(p=0,o=this.q.length;p<o;p++){this.q[p].call()}}}function c(i,j){if(i.currentStyle){return i.currentStyle[j]}else{if(window.getComputedStyle){return window.getComputedStyle(i,null).getPropertyValue(j)}else{return i.style[j]}}}function n(v,x){if(!v.resizedAttached){v.resizedAttached=new l();v.resizedAttached.add(x)}else{if(v.resizedAttached){v.resizedAttached.add(x);return}}v.resizeSensor=document.createElement("div");v.resizeSensor.className="resize-sensor";var p="position: absolute; left: 0; top: 0; right: 0; bottom: 0; overflow: hidden; z-index: -1; visibility: hidden;";var s="position: absolute; left: 0; top: 0; transition: 0s;";v.resizeSensor.style.cssText=p;v.resizeSensor.innerHTML='<div class="resize-sensor-expand" style="'+p+'"><div style="'+s+'"></div></div><div class="resize-sensor-shrink" style="'+p+'"><div style="'+s+' width: 200%; height: 200%"></div></div>';v.appendChild(v.resizeSensor);if(c(v,"position")=="static"){v.style.position="relative"}var B=v.resizeSensor.childNodes[0];var q=B.childNodes[0];var u=v.resizeSensor.childNodes[1];var y=function(){q.style.width=100000+"px";q.style.height=100000+"px";B.scrollLeft=100000;B.scrollTop=100000;u.scrollLeft=100000;u.scrollTop=100000};y();var o=false;var r=function(){if(!v.resizedAttached){return}if(o){v.resizedAttached.call();o=false}b(r)};b(r);var j,z;var w,i;var A=function(){if((w=v.offsetWidth)!=j||(i=v.offsetHeight)!=z){o=true;j=w;z=i}y()};var t=function(E,D,C){if(E.attachEvent){E.attachEvent("on"+D,C)}else{E.addEventListener(D,C)}};t(B,"scroll",A);t(u,"scroll",A)}var h=Object.prototype.toString.call(g);var e=("[object Array]"===h||("[object NodeList]"===h)||("[object HTMLCollection]"===h)||("undefined"!==typeof jQuery&&g instanceof jQuery)||("undefined"!==typeof Elements&&g instanceof Elements));if(e){var f=0,d=g.length;for(;f<d;f++){n(g[f],m)}}else{n(g,m)}this.detach=function(){if(e){var p=0,o=g.length;for(;p<o;p++){a.detach(g[p])}}else{a.detach(g)}}};a.detach=function(c){if(c.resizeSensor){c.removeChild(c.resizeSensor);delete c.resizeSensor;delete c.resizedAttached}};window.ResizeSensor=a})();