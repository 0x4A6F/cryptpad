Draw.loadPlugin(function(i){var a=document.createElement("div");a.style.userSelect="none";a.style.overflow="hidden";a.style.padding="10px";a.style.height="100%";var j=i.editor.graph;var f=document.createElement("textarea");f.style.height="200px";f.style.width="100%";f.value="CREATE TABLE Persons\n(\nPersonID int,\nLastName varchar(255),\nFirstName varchar(255),\nAddress varchar(255),\nCity varchar(255)\n);";mxUtils.br(a);a.appendChild(f);var j=i.editor.graph;mxResources.parse("fromSql=From SQL");var e=new mxWindow(mxResources.get("fromSql"),a,document.body.offsetWidth-480,140,320,300,true,true);e.destroyOnClose=false;e.setMaximizable(false);e.setResizable(false);e.setClosable(true);function b(v){var C=v.split("\n");var p=null;var A=null;var w=[];var B=0;for(var m=0;m<C.length;m++){var n=mxUtils.trim(C[m]);if(n.substring(0,12).toLowerCase()=="create table"){var k=mxUtils.trim(n.substring(12));if(k.charAt(k.length-1)=="("){k=k.substring(0,k.lastIndexOf(" "))}p=new mxCell(k,new mxGeometry(B,0,160,26),"swimlane;fontStyle=0;childLayout=stackLayout;horizontal=1;startSize=26;fillColor=#e0e0e0;horizontalStack=0;resizeParent=1;resizeLast=0;collapsible=1;marginBottom=0;swimlaneFillColor=#ffffff;align=center;");p.vertex=true;w.push(p);var z=i.editor.graph.getPreferredSizeForCell(s);if(z!=null){p.geometry.width=z.width+10}A={}}else{if(p!=null&&n.charAt(0)==")"){B+=p.geometry.width+40;p=null}else{if(n!="("&&p!=null){var k=n.substring(0,(n.charAt(n.length-1)==",")?n.length-1:n.length);if(k.substring(0,11).toLowerCase()!="primary key"){var s=new mxCell(k,new mxGeometry(0,0,90,26),"shape=partialRectangle;top=0;left=0;right=0;bottom=0;align=left;verticalAlign=top;spacingTop=-2;fillColor=none;spacingLeft=34;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;dropTarget=0;");s.vertex=true;var l=sb.cloneCell(s,"");l.connectable=false;l.style="shape=partialRectangle;top=0;left=0;bottom=0;fillColor=none;align=left;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[];portConstraint=eastwest;part=1;";l.geometry.width=30;l.geometry.height=26;s.insert(l);var z=i.editor.graph.getPreferredSizeForCell(s);if(z!=null&&p.geometry.width<z.width+10){p.geometry.width=z.width+10}p.insert(s);p.geometry.height+=26;A[s.value]=s}}}}}if(w.length>0){var u=i.editor.graph;var r=u.view;var o=u.getGraphBounds();var t=Math.ceil(Math.max(0,o.x/r.scale-r.translate.x)+4*u.gridSize);var q=Math.ceil(Math.max(0,(o.y+o.height)/r.scale-r.translate.y)+4*u.gridSize);u.setSelectionCells(u.importCells(w,t,q));u.scrollCellToVisible(u.getSelectionCell())}e.setVisible(false)}mxUtils.br(a);var h=mxUtils.button(mxResources.get("reset"),function(){f.value=""});h.style.marginTop="8px";h.style.marginRight="4px";h.style.padding="4px";a.appendChild(h);var c=mxUtils.button(mxResources.get("cancel"),function(){e.setVisible(false)});c.style.marginTop="8px";c.style.marginRight="4px";c.style.padding="4px";a.appendChild(c);var c=mxUtils.button(mxResources.get("insert"),function(){b(f.value)});c.style.marginTop="8px";c.style.padding="4px";a.appendChild(c);i.actions.addAction("fromSql",function(){e.setVisible(!e.isVisible());if(e.isVisible()){f.focus()}});var g=i.menus.get("insert");var d=g.funct;g.funct=function(l,k){d.apply(this,arguments);i.menus.addMenuItems(l,["fromSql"],k)}});