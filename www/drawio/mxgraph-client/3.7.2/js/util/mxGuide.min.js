function mxGuide(b,a){this.graph=b;this.setStates(a)}mxGuide.prototype.graph=null;mxGuide.prototype.states=null;mxGuide.prototype.horizontal=true;mxGuide.prototype.vertical=true;mxGuide.prototype.guideX=null;mxGuide.prototype.guideY=null;mxGuide.prototype.setStates=function(a){this.states=a};mxGuide.prototype.isEnabledForEvent=function(a){return true};mxGuide.prototype.getGuideTolerance=function(){return this.graph.gridSize/2};mxGuide.prototype.createGuideShape=function(b){var a=new mxPolyline([],mxConstants.GUIDE_COLOR,mxConstants.GUIDE_STROKEWIDTH);a.isDashed=true;return a};mxGuide.prototype.move=function(k,C,x){if(this.states!=null&&(this.horizontal||this.vertical)&&k!=null&&C!=null){var m=this.graph.getView().translate;var G=this.graph.getView().scale;var o=C.x;var n=C.y;var e=false;var w=null;var r=null;var d=false;var v=null;var q=null;var a=this.getGuideTolerance();var u=a;var t=a;var D=k.clone();D.x+=C.x;D.y+=C.y;var f=D.x;var z=D.x+D.width;var B=D.getCenterX();var p=D.y;var l=D.y+D.height;var F=D.getCenterY();function j(b,i){b+=this.graph.panDx;var c=false;if(Math.abs(b-B)<u){o=b-k.getCenterX();u=Math.abs(b-B);c=true}else{if(Math.abs(b-f)<u){o=b-k.x;u=Math.abs(b-f);c=true}else{if(Math.abs(b-z)<u){o=b-k.x-k.width;u=Math.abs(b-z);c=true}}}if(c){w=i;r=Math.round(b-this.graph.panDx);if(this.guideX==null){this.guideX=this.createGuideShape(true);this.guideX.dialect=(this.graph.dialect!=mxConstants.DIALECT_SVG)?mxConstants.DIALECT_VML:mxConstants.DIALECT_SVG;this.guideX.pointerEvents=false;this.guideX.init(this.graph.getView().getOverlayPane())}}e=e||c}function h(c){c+=this.graph.panDy;var b=false;if(Math.abs(c-F)<t){n=c-k.getCenterY();t=Math.abs(c-F);b=true}else{if(Math.abs(c-p)<t){n=c-k.y;t=Math.abs(c-p);b=true}else{if(Math.abs(c-l)<t){n=c-k.y-k.height;t=Math.abs(c-l);b=true}}}if(b){v=g;q=Math.round(c-this.graph.panDy);if(this.guideY==null){this.guideY=this.createGuideShape(false);this.guideY.dialect=(this.graph.dialect!=mxConstants.DIALECT_SVG)?mxConstants.DIALECT_VML:mxConstants.DIALECT_SVG;this.guideY.pointerEvents=false;this.guideY.init(this.graph.getView().getOverlayPane())}}d=d||b}for(var s=0;s<this.states.length;s++){var g=this.states[s];if(g!=null){if(this.horizontal){j.call(this,g.getCenterX(),g);j.call(this,g.x,g);j.call(this,g.x+g.width,g)}if(this.vertical){h.call(this,g.getCenterY(),g);h.call(this,g.y,g);h.call(this,g.y+g.height,g)}}}if(x){if(!e){var E=k.x-(this.graph.snap(k.x/G-m.x)+m.x)*G;o=this.graph.snap(o/G)*G-E}if(!d){var A=k.y-(this.graph.snap(k.y/G-m.y)+m.y)*G;n=this.graph.snap(n/G)*G-A}}var y=this.graph.container;if(!e&&this.guideX!=null){this.guideX.node.style.visibility="hidden"}else{if(this.guideX!=null){if(w!=null&&k!=null){minY=Math.min(k.y+n-this.graph.panDy,w.y);maxY=Math.max(k.y+k.height+n-this.graph.panDy,w.y+w.height)}if(minY!=null&&maxY!=null){this.guideX.points=[new mxPoint(r,minY),new mxPoint(r,maxY)]}else{this.guideX.points=[new mxPoint(r,-this.graph.panDy),new mxPoint(r,y.scrollHeight-3-this.graph.panDy)]}this.guideX.stroke=this.getGuideColor(w,true);this.guideX.node.style.visibility="visible";this.guideX.redraw()}}if(!d&&this.guideY!=null){this.guideY.node.style.visibility="hidden"}else{if(this.guideY!=null){if(v!=null&&k!=null){minX=Math.min(k.x+o-this.graph.panDx,v.x);maxX=Math.max(k.x+k.width+o-this.graph.panDx,v.x+v.width)}if(minX!=null&&maxX!=null){this.guideY.points=[new mxPoint(minX,q),new mxPoint(maxX,q)]}else{this.guideY.points=[new mxPoint(-this.graph.panDx,q),new mxPoint(y.scrollWidth-3-this.graph.panDx,q)]}this.guideY.stroke=this.getGuideColor(v,false);this.guideY.node.style.visibility="visible";this.guideY.redraw()}}C=new mxPoint(o,n)}return C};mxGuide.prototype.getGuideColor=function(b,a){return mxConstants.GUIDE_COLOR};mxGuide.prototype.hide=function(){this.setVisible(false)};mxGuide.prototype.setVisible=function(a){if(this.guideX!=null){this.guideX.node.style.visibility=(a)?"visible":"hidden"}if(this.guideY!=null){this.guideY.node.style.visibility=(a)?"visible":"hidden"}};mxGuide.prototype.destroy=function(){if(this.guideX!=null){this.guideX.destroy();this.guideX=null}if(this.guideY!=null){this.guideY.destroy();this.guideY=null}};