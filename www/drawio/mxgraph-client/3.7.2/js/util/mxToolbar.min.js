function mxToolbar(a){this.container=a}mxToolbar.prototype=new mxEventSource();mxToolbar.prototype.constructor=mxToolbar;mxToolbar.prototype.container=null;mxToolbar.prototype.enabled=true;mxToolbar.prototype.noReset=false;mxToolbar.prototype.updateDefaultMode=true;mxToolbar.prototype.addItem=function(i,h,a,e,b,c){var f=document.createElement((h!=null)?"img":"button");var d=b||((c!=null)?"mxToolbarMode":"mxToolbarItem");f.className=d;f.setAttribute("src",h);if(i!=null){if(h!=null){f.setAttribute("title",i)}else{mxUtils.write(f,i)}}this.container.appendChild(f);if(a!=null){mxEvent.addListener(f,"click",a);if(mxClient.IS_TOUCH){mxEvent.addListener(f,"touchend",a)}}var g=mxUtils.bind(this,function(j){if(e!=null){f.setAttribute("src",h)}else{f.style.backgroundColor=""}});mxEvent.addGestureListeners(f,mxUtils.bind(this,function(k){if(e!=null){f.setAttribute("src",e)}else{f.style.backgroundColor="gray"}if(c!=null){if(this.menu==null){this.menu=new mxPopupMenu();this.menu.init()}var l=this.currentImg;if(this.menu.isMenuShowing()){this.menu.hideMenu()}if(l!=f){this.currentImg=f;this.menu.factoryMethod=c;var j=new mxPoint(f.offsetLeft,f.offsetTop+f.offsetHeight);this.menu.popup(j.x,j.y,null,k);if(this.menu.isMenuShowing()){f.className=d+"Selected";this.menu.hideMenu=function(){mxPopupMenu.prototype.hideMenu.apply(this);f.className=d;this.currentImg=null}}}}}),null,g);mxEvent.addListener(f,"mouseout",g);return f};mxToolbar.prototype.addCombo=function(b){var c=document.createElement("div");c.style.display="inline";c.className="mxToolbarComboContainer";var a=document.createElement("select");a.className=b||"mxToolbarCombo";c.appendChild(a);this.container.appendChild(c);return a};mxToolbar.prototype.addActionCombo=function(c,b){var a=document.createElement("select");a.className=b||"mxToolbarCombo";this.addOption(a,c,null);mxEvent.addListener(a,"change",function(d){var e=a.options[a.selectedIndex];a.selectedIndex=0;if(e.funct!=null){e.funct(d)}});this.container.appendChild(a);return a};mxToolbar.prototype.addOption=function(c,d,b){var a=document.createElement("option");mxUtils.writeln(a,d);if(typeof(b)=="function"){a.funct=b}else{a.setAttribute("value",b)}c.appendChild(a);return a};mxToolbar.prototype.addSwitchMode=function(f,e,a,d,c){var b=document.createElement("img");b.initialClassName=c||"mxToolbarMode";b.className=b.initialClassName;b.setAttribute("src",e);b.altIcon=d;if(f!=null){b.setAttribute("title",f)}mxEvent.addListener(b,"click",mxUtils.bind(this,function(g){var h=this.selectedMode.altIcon;if(h!=null){this.selectedMode.altIcon=this.selectedMode.getAttribute("src");this.selectedMode.setAttribute("src",h)}else{this.selectedMode.className=this.selectedMode.initialClassName}if(this.updateDefaultMode){this.defaultMode=b}this.selectedMode=b;var h=b.altIcon;if(h!=null){b.altIcon=b.getAttribute("src");b.setAttribute("src",h)}else{b.className=b.initialClassName+"Selected"}this.fireEvent(new mxEventObject(mxEvent.SELECT));a()}));this.container.appendChild(b);if(this.defaultMode==null){this.defaultMode=b;this.selectMode(b);a()}return b};mxToolbar.prototype.addMode=function(g,f,b,e,d,a){a=(a!=null)?a:true;var c=document.createElement((f!=null)?"img":"button");c.initialClassName=d||"mxToolbarMode";c.className=c.initialClassName;c.setAttribute("src",f);c.altIcon=e;if(g!=null){c.setAttribute("title",g)}if(this.enabled&&a){mxEvent.addListener(c,"click",mxUtils.bind(this,function(h){this.selectMode(c,b);this.noReset=false}));mxEvent.addListener(c,"dblclick",mxUtils.bind(this,function(h){this.selectMode(c,b);this.noReset=true}));if(this.defaultMode==null){this.defaultMode=c;this.defaultFunction=b;this.selectMode(c,b)}}this.container.appendChild(c);return c};mxToolbar.prototype.selectMode=function(c,a){if(this.selectedMode!=c){if(this.selectedMode!=null){var b=this.selectedMode.altIcon;if(b!=null){this.selectedMode.altIcon=this.selectedMode.getAttribute("src");this.selectedMode.setAttribute("src",b)}else{this.selectedMode.className=this.selectedMode.initialClassName}}this.selectedMode=c;var b=this.selectedMode.altIcon;if(b!=null){this.selectedMode.altIcon=this.selectedMode.getAttribute("src");this.selectedMode.setAttribute("src",b)}else{this.selectedMode.className=this.selectedMode.initialClassName+"Selected"}this.fireEvent(new mxEventObject(mxEvent.SELECT,"function",a))}};mxToolbar.prototype.resetMode=function(a){if((a||!this.noReset)&&this.selectedMode!=this.defaultMode){this.selectMode(this.defaultMode,this.defaultFunction)}};mxToolbar.prototype.addSeparator=function(a){return this.addItem(null,a,null)};mxToolbar.prototype.addBreak=function(){mxUtils.br(this.container)};mxToolbar.prototype.addLine=function(){var a=document.createElement("hr");a.style.marginRight="6px";a.setAttribute("size","1");this.container.appendChild(a)};mxToolbar.prototype.destroy=function(){mxEvent.release(this.container);this.container=null;this.defaultMode=null;this.defaultFunction=null;this.selectedMode=null;if(this.menu!=null){this.menu.destroy()}};