function mxWindow(g,e,h,f,b,i,c,j,d,a){if(e!=null){c=(c!=null)?c:true;this.content=e;this.init(h,f,b,i,a);this.installMaximizeHandler();this.installMinimizeHandler();this.installCloseHandler();this.setMinimizable(c);this.setTitle(g);if(j==null||j){this.installMoveHandler()}if(d!=null&&d.parentNode!=null){d.parentNode.replaceChild(this.div,d)}else{document.body.appendChild(this.div)}}}mxWindow.prototype=new mxEventSource();mxWindow.prototype.constructor=mxWindow;mxWindow.prototype.closeImage=mxClient.imageBasePath+"/close.gif";mxWindow.prototype.minimizeImage=mxClient.imageBasePath+"/minimize.gif";mxWindow.prototype.normalizeImage=mxClient.imageBasePath+"/normalize.gif";mxWindow.prototype.maximizeImage=mxClient.imageBasePath+"/maximize.gif";mxWindow.prototype.resizeImage=mxClient.imageBasePath+"/resize.gif";mxWindow.prototype.visible=false;mxWindow.prototype.minimumSize=new mxRectangle(0,0,50,40);mxWindow.prototype.destroyOnClose=true;mxWindow.prototype.contentHeightCorrection=(document.documentMode==8||document.documentMode==7)?6:2;mxWindow.prototype.title=null;mxWindow.prototype.content=null;mxWindow.prototype.init=function(b,h,e,a,d){d=(d!=null)?d:"mxWindow";this.div=document.createElement("div");this.div.className=d;this.div.style.left=b+"px";this.div.style.top=h+"px";this.table=document.createElement("table");this.table.className=d;if(mxClient.IS_POINTER){this.div.style.touchAction="none"}if(e!=null){if(!mxClient.IS_QUIRKS){this.div.style.width=e+"px"}this.table.style.width=e+"px"}if(a!=null){if(!mxClient.IS_QUIRKS){this.div.style.height=a+"px"}this.table.style.height=a+"px"}var c=document.createElement("tbody");var g=document.createElement("tr");this.title=document.createElement("td");this.title.className=d+"Title";this.buttons=document.createElement("div");this.buttons.style.position="absolute";this.buttons.style.display="inline-block";this.buttons.style.right="4px";this.buttons.style.top="5px";this.title.appendChild(this.buttons);g.appendChild(this.title);c.appendChild(g);g=document.createElement("tr");this.td=document.createElement("td");this.td.className=d+"Pane";if(document.documentMode==7){this.td.style.height="100%"}this.contentWrapper=document.createElement("div");this.contentWrapper.className=d+"Pane";this.contentWrapper.style.width="100%";this.contentWrapper.appendChild(this.content);if(mxClient.IS_QUIRKS||this.content.nodeName.toUpperCase()!="DIV"){this.contentWrapper.style.height="100%"}this.td.appendChild(this.contentWrapper);g.appendChild(this.td);c.appendChild(g);this.table.appendChild(c);this.div.appendChild(this.table);var f=mxUtils.bind(this,function(i){this.activate()});mxEvent.addGestureListeners(this.title,f);mxEvent.addGestureListeners(this.table,f);this.hide()};mxWindow.prototype.setTitle=function(b){var c=this.title.firstChild;while(c!=null){var a=c.nextSibling;if(c.nodeType==mxConstants.NODETYPE_TEXT){c.parentNode.removeChild(c)}c=a}mxUtils.write(this.title,b||"");this.title.appendChild(this.buttons)};mxWindow.prototype.setScrollable=function(a){if(navigator.userAgent.indexOf("Presto/2.5")<0){if(a){this.contentWrapper.style.overflow="auto"}else{this.contentWrapper.style.overflow="hidden"}}};mxWindow.prototype.activate=function(){if(mxWindow.activeWindow!=this){var d=mxUtils.getCurrentStyle(this.getElement());var b=(d!=null)?d.zIndex:3;if(mxWindow.activeWindow){var a=mxWindow.activeWindow.getElement();if(a!=null&&a.style!=null){a.style.zIndex=b}}var c=mxWindow.activeWindow;this.getElement().style.zIndex=parseInt(b)+1;mxWindow.activeWindow=this;this.fireEvent(new mxEventObject(mxEvent.ACTIVATE,"previousWindow",c))}};mxWindow.prototype.getElement=function(){return this.div};mxWindow.prototype.fit=function(){mxUtils.fit(this.div)};mxWindow.prototype.isResizable=function(){if(this.resize!=null){return this.resize.style.display!="none"}return false};mxWindow.prototype.setResizable=function(f){if(f){if(this.resize==null){this.resize=document.createElement("img");this.resize.style.position="absolute";this.resize.style.bottom="2px";this.resize.style.right="2px";this.resize.setAttribute("src",mxClient.imageBasePath+"/resize.gif");this.resize.style.cursor="nw-resize";var c=null;var b=null;var g=null;var a=null;var h=mxUtils.bind(this,function(i){this.activate();c=mxEvent.getClientX(i);b=mxEvent.getClientY(i);g=this.div.offsetWidth;a=this.div.offsetHeight;mxEvent.addGestureListeners(document,null,e,d);this.fireEvent(new mxEventObject(mxEvent.RESIZE_START,"event",i));mxEvent.consume(i)});var e=mxUtils.bind(this,function(j){if(c!=null&&b!=null){var k=mxEvent.getClientX(j)-c;var i=mxEvent.getClientY(j)-b;this.setSize(g+k,a+i);this.fireEvent(new mxEventObject(mxEvent.RESIZE,"event",j));mxEvent.consume(j)}});var d=mxUtils.bind(this,function(i){if(c!=null&&b!=null){c=null;b=null;mxEvent.removeGestureListeners(document,null,e,d);this.fireEvent(new mxEventObject(mxEvent.RESIZE_END,"event",i));mxEvent.consume(i)}});mxEvent.addGestureListeners(this.resize,h,e,d);this.div.appendChild(this.resize)}else{this.resize.style.display="inline"}}else{if(this.resize!=null){this.resize.style.display="none"}}};mxWindow.prototype.setSize=function(b,a){b=Math.max(this.minimumSize.width,b);a=Math.max(this.minimumSize.height,a);if(!mxClient.IS_QUIRKS){this.div.style.width=b+"px";this.div.style.height=a+"px"}this.table.style.width=b+"px";this.table.style.height=a+"px";if(!mxClient.IS_QUIRKS){this.contentWrapper.style.height=(this.div.offsetHeight-this.title.offsetHeight-this.contentHeightCorrection)+"px"}};mxWindow.prototype.setMinimizable=function(a){this.minimize.style.display=(a)?"":"none"};mxWindow.prototype.getMinimumSize=function(){return new mxRectangle(0,0,0,this.title.offsetHeight)};mxWindow.prototype.installMinimizeHandler=function(){this.minimize=document.createElement("img");this.minimize.setAttribute("src",this.minimizeImage);this.minimize.setAttribute("title","Minimize");this.minimize.style.cursor="pointer";this.minimize.style.marginLeft="2px";this.minimize.style.display="none";this.buttons.appendChild(this.minimize);var c=false;var d=null;var a=null;var b=mxUtils.bind(this,function(e){this.activate();if(!c){c=true;this.minimize.setAttribute("src",this.normalizeImage);this.minimize.setAttribute("title","Normalize");this.contentWrapper.style.display="none";d=this.maximize.style.display;this.maximize.style.display="none";a=this.table.style.height;var f=this.getMinimumSize();if(f.height>0){if(!mxClient.IS_QUIRKS){this.div.style.height=f.height+"px"}this.table.style.height=f.height+"px"}if(f.width>0){if(!mxClient.IS_QUIRKS){this.div.style.width=f.width+"px"}this.table.style.width=f.width+"px"}if(this.resize!=null){this.resize.style.visibility="hidden"}this.fireEvent(new mxEventObject(mxEvent.MINIMIZE,"event",e))}else{c=false;this.minimize.setAttribute("src",this.minimizeImage);this.minimize.setAttribute("title","Minimize");this.contentWrapper.style.display="";this.maximize.style.display=d;if(!mxClient.IS_QUIRKS){this.div.style.height=a}this.table.style.height=a;if(this.resize!=null){this.resize.style.visibility=""}this.fireEvent(new mxEventObject(mxEvent.NORMALIZE,"event",e))}mxEvent.consume(e)});mxEvent.addGestureListeners(this.minimize,b)};mxWindow.prototype.setMaximizable=function(a){this.maximize.style.display=(a)?"":"none"};mxWindow.prototype.installMaximizeHandler=function(){this.maximize=document.createElement("img");this.maximize.setAttribute("src",this.maximizeImage);this.maximize.setAttribute("title","Maximize");this.maximize.style.cursor="default";this.maximize.style.marginLeft="2px";this.maximize.style.cursor="pointer";this.maximize.style.display="none";this.buttons.appendChild(this.maximize);var d=false;var b=null;var g=null;var a=null;var f=null;var e=null;var c=mxUtils.bind(this,function(h){this.activate();if(this.maximize.style.display!="none"){if(!d){d=true;this.maximize.setAttribute("src",this.normalizeImage);this.maximize.setAttribute("title","Normalize");this.contentWrapper.style.display="";e=this.minimize.style.display;this.minimize.style.display="none";b=parseInt(this.div.style.left);g=parseInt(this.div.style.top);a=this.table.style.height;f=this.table.style.width;this.div.style.left="0px";this.div.style.top="0px";var i=Math.max(document.body.clientHeight||0,document.documentElement.clientHeight||0);if(!mxClient.IS_QUIRKS){this.div.style.width=(document.body.clientWidth-2)+"px";this.div.style.height=(i-2)+"px"}this.table.style.width=(document.body.clientWidth-2)+"px";this.table.style.height=(i-2)+"px";if(this.resize!=null){this.resize.style.visibility="hidden"}if(!mxClient.IS_QUIRKS){var j=mxUtils.getCurrentStyle(this.contentWrapper);if(j.overflow=="auto"||this.resize!=null){this.contentWrapper.style.height=(this.div.offsetHeight-this.title.offsetHeight-this.contentHeightCorrection)+"px"}}this.fireEvent(new mxEventObject(mxEvent.MAXIMIZE,"event",h))}else{d=false;this.maximize.setAttribute("src",this.maximizeImage);this.maximize.setAttribute("title","Maximize");this.contentWrapper.style.display="";this.minimize.style.display=e;this.div.style.left=b+"px";this.div.style.top=g+"px";if(!mxClient.IS_QUIRKS){this.div.style.height=a;this.div.style.width=f;var j=mxUtils.getCurrentStyle(this.contentWrapper);if(j.overflow=="auto"||this.resize!=null){this.contentWrapper.style.height=(this.div.offsetHeight-this.title.offsetHeight-this.contentHeightCorrection)+"px"}}this.table.style.height=a;this.table.style.width=f;if(this.resize!=null){this.resize.style.visibility=""}this.fireEvent(new mxEventObject(mxEvent.NORMALIZE,"event",h))}mxEvent.consume(h)}});mxEvent.addGestureListeners(this.maximize,c);mxEvent.addListener(this.title,"dblclick",c)};mxWindow.prototype.installMoveHandler=function(){this.title.style.cursor="move";mxEvent.addGestureListeners(this.title,mxUtils.bind(this,function(d){var c=mxEvent.getClientX(d);var b=mxEvent.getClientY(d);var a=this.getX();var g=this.getY();var f=mxUtils.bind(this,function(i){var j=mxEvent.getClientX(i)-c;var h=mxEvent.getClientY(i)-b;this.setLocation(a+j,g+h);this.fireEvent(new mxEventObject(mxEvent.MOVE,"event",i));mxEvent.consume(i)});var e=mxUtils.bind(this,function(h){mxEvent.removeGestureListeners(document,null,f,e);this.fireEvent(new mxEventObject(mxEvent.MOVE_END,"event",h));mxEvent.consume(h)});mxEvent.addGestureListeners(document,null,f,e);this.fireEvent(new mxEventObject(mxEvent.MOVE_START,"event",d));mxEvent.consume(d)}));if(mxClient.IS_POINTER){this.title.style.touchAction="none"}};mxWindow.prototype.setLocation=function(a,b){this.div.style.left=a+"px";this.div.style.top=b+"px"};mxWindow.prototype.getX=function(){return parseInt(this.div.style.left)};mxWindow.prototype.getY=function(){return parseInt(this.div.style.top)};mxWindow.prototype.installCloseHandler=function(){this.closeImg=document.createElement("img");this.closeImg.setAttribute("src",this.closeImage);this.closeImg.setAttribute("title","Close");this.closeImg.style.marginLeft="2px";this.closeImg.style.cursor="pointer";this.closeImg.style.display="none";this.buttons.appendChild(this.closeImg);mxEvent.addGestureListeners(this.closeImg,mxUtils.bind(this,function(a){this.fireEvent(new mxEventObject(mxEvent.CLOSE,"event",a));if(this.destroyOnClose){this.destroy()}else{this.setVisible(false)}mxEvent.consume(a)}))};mxWindow.prototype.setImage=function(a){this.image=document.createElement("img");this.image.setAttribute("src",a);this.image.setAttribute("align","left");this.image.style.marginRight="4px";this.image.style.marginLeft="0px";this.image.style.marginTop="-2px";this.title.insertBefore(this.image,this.title.firstChild)};mxWindow.prototype.setClosable=function(a){this.closeImg.style.display=(a)?"":"none"};mxWindow.prototype.isVisible=function(){if(this.div!=null){return this.div.style.display!="none"}return false};mxWindow.prototype.setVisible=function(a){if(this.div!=null&&this.isVisible()!=a){if(a){this.show()}else{this.hide()}}};mxWindow.prototype.show=function(){this.div.style.display="";this.activate();var a=mxUtils.getCurrentStyle(this.contentWrapper);if(!mxClient.IS_QUIRKS&&(a.overflow=="auto"||this.resize!=null)){this.contentWrapper.style.height=(this.div.offsetHeight-this.title.offsetHeight-this.contentHeightCorrection)+"px"}this.fireEvent(new mxEventObject(mxEvent.SHOW))};mxWindow.prototype.hide=function(){this.div.style.display="none";this.fireEvent(new mxEventObject(mxEvent.HIDE))};mxWindow.prototype.destroy=function(){this.fireEvent(new mxEventObject(mxEvent.DESTROY));if(this.div!=null){mxEvent.release(this.div);this.div.parentNode.removeChild(this.div);this.div=null}this.title=null;this.content=null;this.contentWrapper=null};