function mxAbstractCanvas2D(){this.converter=this.createUrlConverter();this.reset()}mxAbstractCanvas2D.prototype.state=null;mxAbstractCanvas2D.prototype.states=null;mxAbstractCanvas2D.prototype.path=null;mxAbstractCanvas2D.prototype.rotateHtml=true;mxAbstractCanvas2D.prototype.lastX=0;mxAbstractCanvas2D.prototype.lastY=0;mxAbstractCanvas2D.prototype.moveOp="M";mxAbstractCanvas2D.prototype.lineOp="L";mxAbstractCanvas2D.prototype.quadOp="Q";mxAbstractCanvas2D.prototype.curveOp="C";mxAbstractCanvas2D.prototype.closeOp="Z";mxAbstractCanvas2D.prototype.pointerEvents=false;mxAbstractCanvas2D.prototype.createUrlConverter=function(){return new mxUrlConverter()};mxAbstractCanvas2D.prototype.reset=function(){this.state=this.createState();this.states=[]};mxAbstractCanvas2D.prototype.createState=function(){return{dx:0,dy:0,scale:1,alpha:1,fillAlpha:1,strokeAlpha:1,fillColor:null,gradientFillAlpha:1,gradientColor:null,gradientAlpha:1,gradientDirection:null,strokeColor:null,strokeWidth:1,dashed:false,dashPattern:"3 3",lineCap:"flat",lineJoin:"miter",miterLimit:10,fontColor:"#000000",fontBackgroundColor:null,fontBorderColor:null,fontSize:mxConstants.DEFAULT_FONTSIZE,fontFamily:mxConstants.DEFAULT_FONTFAMILY,fontStyle:0,shadow:false,shadowColor:mxConstants.SHADOWCOLOR,shadowAlpha:mxConstants.SHADOW_OPACITY,shadowDx:mxConstants.SHADOW_OFFSET_X,shadowDy:mxConstants.SHADOW_OFFSET_Y,rotation:0,rotationCx:0,rotationCy:0}};mxAbstractCanvas2D.prototype.format=function(a){return Math.round(parseFloat(a))};mxAbstractCanvas2D.prototype.addOp=function(){if(this.path!=null){this.path.push(arguments[0]);if(arguments.length>2){var b=this.state;for(var a=2;a<arguments.length;a+=2){this.lastX=arguments[a-1];this.lastY=arguments[a];this.path.push(this.format((this.lastX+b.dx)*b.scale));this.path.push(this.format((this.lastY+b.dy)*b.scale))}}}};mxAbstractCanvas2D.prototype.rotatePoint=function(c,f,d,b,e){var a=d*(Math.PI/180);return mxUtils.getRotatedPoint(new mxPoint(c,f),Math.cos(a),Math.sin(a),new mxPoint(b,e))};mxAbstractCanvas2D.prototype.save=function(){this.states.push(this.state);this.state=mxUtils.clone(this.state)};mxAbstractCanvas2D.prototype.restore=function(){if(this.states.length>0){this.state=this.states.pop()}};mxAbstractCanvas2D.prototype.setLink=function(a){};mxAbstractCanvas2D.prototype.scale=function(a){this.state.scale*=a;this.state.strokeWidth*=a};mxAbstractCanvas2D.prototype.translate=function(b,a){this.state.dx+=b;this.state.dy+=a};mxAbstractCanvas2D.prototype.rotate=function(b,d,c,a,e){};mxAbstractCanvas2D.prototype.setAlpha=function(a){this.state.alpha=a};mxAbstractCanvas2D.prototype.setFillAlpha=function(a){this.state.fillAlpha=a};mxAbstractCanvas2D.prototype.setStrokeAlpha=function(a){this.state.strokeAlpha=a};mxAbstractCanvas2D.prototype.setFillColor=function(a){if(a==mxConstants.NONE){a=null}this.state.fillColor=a;this.state.gradientColor=null};mxAbstractCanvas2D.prototype.setGradient=function(i,g,d,b,e,a,c,j,f){var k=this.state;k.fillColor=i;k.gradientFillAlpha=(j!=null)?j:1;k.gradientColor=g;k.gradientAlpha=(f!=null)?f:1;k.gradientDirection=c};mxAbstractCanvas2D.prototype.setStrokeColor=function(a){if(a==mxConstants.NONE){a=null}this.state.strokeColor=a};mxAbstractCanvas2D.prototype.setStrokeWidth=function(a){this.state.strokeWidth=a};mxAbstractCanvas2D.prototype.setDashed=function(a){this.state.dashed=a};mxAbstractCanvas2D.prototype.setDashPattern=function(a){this.state.dashPattern=a};mxAbstractCanvas2D.prototype.setLineCap=function(a){this.state.lineCap=a};mxAbstractCanvas2D.prototype.setLineJoin=function(a){this.state.lineJoin=a};mxAbstractCanvas2D.prototype.setMiterLimit=function(a){this.state.miterLimit=a};mxAbstractCanvas2D.prototype.setFontColor=function(a){if(a==mxConstants.NONE){a=null}this.state.fontColor=a};mxAbstractCanvas2D.prototype.setFontBackgroundColor=function(a){if(a==mxConstants.NONE){a=null}this.state.fontBackgroundColor=a};mxAbstractCanvas2D.prototype.setFontBorderColor=function(a){if(a==mxConstants.NONE){a=null}this.state.fontBorderColor=a};mxAbstractCanvas2D.prototype.setFontSize=function(a){this.state.fontSize=parseFloat(a)};mxAbstractCanvas2D.prototype.setFontFamily=function(a){this.state.fontFamily=a};mxAbstractCanvas2D.prototype.setFontStyle=function(a){if(a==null){a=0}this.state.fontStyle=a};mxAbstractCanvas2D.prototype.setShadow=function(a){this.state.shadow=a};mxAbstractCanvas2D.prototype.setShadowColor=function(a){if(a==mxConstants.NONE){a=null}this.state.shadowColor=a};mxAbstractCanvas2D.prototype.setShadowAlpha=function(a){this.state.shadowAlpha=a};mxAbstractCanvas2D.prototype.setShadowOffset=function(b,a){this.state.shadowDx=b;this.state.shadowDy=a};mxAbstractCanvas2D.prototype.begin=function(){this.lastX=0;this.lastY=0;this.path=[]};mxAbstractCanvas2D.prototype.moveTo=function(a,b){this.addOp(this.moveOp,a,b)};mxAbstractCanvas2D.prototype.lineTo=function(a,b){this.addOp(this.lineOp,a,b)};mxAbstractCanvas2D.prototype.quadTo=function(b,d,a,c){this.addOp(this.quadOp,b,d,a,c)};mxAbstractCanvas2D.prototype.curveTo=function(d,f,b,e,a,c){this.addOp(this.curveOp,d,f,b,e,a,c)};mxAbstractCanvas2D.prototype.arcTo=function(c,b,d,a,e,h,g){var j=mxUtils.arcToCurves(this.lastX,this.lastY,c,b,d,a,e,h,g);if(j!=null){for(var f=0;f<j.length;f+=6){this.curveTo(j[f],j[f+1],j[f+2],j[f+3],j[f+4],j[f+5])}}};mxAbstractCanvas2D.prototype.close=function(d,f,b,e,a,c){this.addOp(this.closeOp)};mxAbstractCanvas2D.prototype.end=function(){};