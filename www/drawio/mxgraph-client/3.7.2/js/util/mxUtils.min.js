var mxUtils={errorResource:(mxClient.language!="none")?"error":"",closeResource:(mxClient.language!="none")?"close":"",errorImage:mxClient.imageBasePath+"/error.gif",removeCursors:function(d){if(d.style!=null){d.style.cursor=""}var c=d.childNodes;if(c!=null){var a=c.length;for(var b=0;b<a;b+=1){mxUtils.removeCursors(c[b])}}},getCurrentStyle:function(){if(mxClient.IS_IE){return function(a){return(a!=null)?a.currentStyle:null}}else{return function(a){return(a!=null)?window.getComputedStyle(a,""):null}}}(),parseCssNumber:function(a){if(a=="thin"){a="2"}else{if(a=="medium"){a="4"}else{if(a=="thick"){a="6"}}}a=parseFloat(a);if(isNaN(a)){a=0}return a},setPrefixedStyle:function(){var a=null;if(mxClient.IS_OT){a="O"}else{if(mxClient.IS_SF||mxClient.IS_GC){a="Webkit"}else{if(mxClient.IS_MT){a="Moz"}else{if(mxClient.IS_IE&&document.documentMode>=9&&document.documentMode<10){a="ms"}}}}return function(c,b,d){c[b]=d;if(a!=null&&b.length>0){b=a+b.substring(0,1).toUpperCase()+b.substring(1);c[b]=d}}}(),hasScrollbars:function(b){var a=mxUtils.getCurrentStyle(b);return a!=null&&(a.overflow=="scroll"||a.overflow=="auto")},bind:function(b,a){return function(){return a.apply(b,arguments)}},eval:function(expr){var result=null;if(expr.indexOf("function")>=0){try{eval("var _mxJavaScriptExpression="+expr);result=_mxJavaScriptExpression;_mxJavaScriptExpression=null}catch(e){mxLog.warn(e.message+" while evaluating "+expr)}}else{try{result=eval(expr)}catch(e){mxLog.warn(e.message+" while evaluating "+expr)}}return result},findNode:function(d,b,e){if(d.nodeType==mxConstants.NODETYPE_ELEMENT){var c=d.getAttribute(b);if(c!=null&&c==e){return d}}d=d.firstChild;while(d!=null){var a=mxUtils.findNode(d,b,e);if(a!=null){return a}d=d.nextSibling}return null},getFunctionName:function(b){var c=null;if(b!=null){if(b.name!=null){c=b.name}else{c=mxUtils.trim(b.toString());if(/^function\s/.test(c)){c=mxUtils.ltrim(c.substring(9));var a=c.indexOf("(");if(a>0){c=c.substring(0,a)}}}}return c},indexOf:function(c,b){if(c!=null&&b!=null){for(var a=0;a<c.length;a++){if(c[a]==b){return a}}}return -1},forEach:function(c,b){if(c!=null&&b!=null){for(var a=0;a<c.length;a++){b(c[a])}}return c},remove:function(d,e){var a=null;if(typeof(e)=="object"){var b=mxUtils.indexOf(e,d);while(b>=0){e.splice(b,1);a=d;b=mxUtils.indexOf(e,d)}}for(var c in e){if(e[c]==d){delete e[c];a=d}}return a},isNode:function(c,d,a,b){if(c!=null&&!isNaN(c.nodeType)&&(d==null||c.nodeName.toLowerCase()==d.toLowerCase())){return a==null||c.getAttribute(a)==b}return false},isAncestorNode:function(a,c){var b=c;while(b!=null){if(b==a){return true}b=b.parentNode}return false},getChildNodes:function(d,a){a=a||mxConstants.NODETYPE_ELEMENT;var c=[];var b=d.firstChild;while(b!=null){if(b.nodeType==a){c.push(b)}b=b.nextSibling}return c},importNode:function(e,d,a){if(mxClient.IS_IE&&(document.documentMode==null||document.documentMode<10)){switch(d.nodeType){case 1:var c=e.createElement(d.nodeName);if(d.attributes&&d.attributes.length>0){for(var b=0;b<d.attributes.length;b++){c.setAttribute(d.attributes[b].nodeName,d.getAttribute(d.attributes[b].nodeName))}if(a&&d.childNodes&&d.childNodes.length>0){for(var b=0;b<d.childNodes.length;b++){c.appendChild(mxUtils.importNode(e,d.childNodes[b],a))}}}return c;break;case 3:case 4:case 8:return e.createTextNode(d.value);break}}else{return e.importNode(d,a)}},createXmlDocument:function(){var a=null;if(document.implementation&&document.implementation.createDocument){a=document.implementation.createDocument("","",null)}else{if(window.ActiveXObject){a=new ActiveXObject("Microsoft.XMLDOM")}}return a},parseXml:function(){if(window.DOMParser){return function(a){var b=new DOMParser();return b.parseFromString(a,"text/xml")}}else{return function(b){var a=mxUtils.createXmlDocument();a.async=false;a.validateOnParse=false;a.resolveExternals=false;a.loadXML(b);return a}}}(),clearSelection:function(){if(document.selection){return function(){document.selection.empty()}}else{if(window.getSelection){return function(){window.getSelection().removeAllRanges()}}else{return function(){}}}}(),getPrettyXml:function(g,f,b){var a=[];if(g!=null){f=f||"  ";b=b||"";if(g.nodeType==mxConstants.NODETYPE_TEXT){a.push(g.value)}else{a.push(b+"<"+g.nodeName);var c=g.attributes;if(c!=null){for(var e=0;e<c.length;e++){var h=mxUtils.htmlEntities(c[e].value);a.push(" "+c[e].nodeName+'="'+h+'"')}}var d=g.firstChild;if(d!=null){a.push(">\n");while(d!=null){a.push(mxUtils.getPrettyXml(d,f,b+f));d=d.nextSibling}a.push(b+"</"+g.nodeName+">\n")}else{a.push("/>\n")}}}return a.join("")},removeWhitespace:function(c,d){var a=(d)?c.previousSibling:c.nextSibling;while(a!=null&&a.nodeType==mxConstants.NODETYPE_TEXT){var b=(d)?a.previousSibling:a.nextSibling;var e=mxUtils.getTextContent(a);if(mxUtils.trim(e).length==0){a.parentNode.removeChild(a)}a=b}},htmlEntities:function(b,a){b=String(b||"");b=b.replace(/&/g,"&amp;");b=b.replace(/"/g,"&quot;");b=b.replace(/\'/g,"&#39;");b=b.replace(/</g,"&lt;");b=b.replace(/>/g,"&gt;");if(a==null||a){b=b.replace(/\n/g,"&#xa;")}return b},isVml:function(a){return a!=null&&a.tagUrn=="urn:schemas-microsoft-com:vml"},getXml:function(d,b){var c="";if(window.XMLSerializer!=null){var a=new XMLSerializer();c=a.serializeToString(d)}else{if(d.xml!=null){c=d.xml.replace(/\r\n\t[\t]*/g,"").replace(/>\r\n/g,">").replace(/\r\n/g,"\n")}}b=b||"&#xa;";c=c.replace(/\n/g,b);return c},extractTextWithWhitespace:function(a){var d=["BLOCKQUOTE","DIV","H1","H2","H3","H4","H5","H6","OL","P","PRE","TABLE","UL"];var b=[];function c(g){if(g.length==1&&(g[0].nodeName=="BR"||g[0].innerHTML=="\n")){return}for(var e=0;e<g.length;e++){var f=g[e];if(f.nodeName=="BR"||f.innerHTML=="\n"||((g.length==1||e==0)&&(f.nodeName=="DIV"&&f.innerHTML.toLowerCase()=="<br>"))){b.push("\n")}else{if(f.nodeType===3||f.nodeType===4){if(f.nodeValue.length>0){b.push(f.nodeValue)}}else{if(f.nodeType!==8&&f.childNodes.length>0){c(f.childNodes)}}if(e<g.length-1&&mxUtils.indexOf(d,g[e+1].nodeName)>=0){b.push("\n")}}}}c(a);return b.join("")},replaceTrailingNewlines:function(b,a){var c="";while(b.length>0&&b.charAt(b.length-1)=="\n"){b=b.substring(0,b.length-1);c+=a}return b+c},getTextContent:function(a){if(a.innerText!==undefined){return a.innerText}else{return(a!=null)?a[(a.textContent===undefined)?"text":"textContent"]:""}},setTextContent:function(a,b){if(a.innerText!==undefined){a.innerText=b}else{a[(a.textContent===undefined)?"text":"textContent"]=b}},getInnerHtml:function(){if(mxClient.IS_IE){return function(a){if(a!=null){return a.innerHTML}return""}}else{return function(b){if(b!=null){var a=new XMLSerializer();return a.serializeToString(b)}return""}}}(),getOuterHtml:function(){if(mxClient.IS_IE){return function(d){if(d!=null){if(d.outerHTML!=null){return d.outerHTML}else{var c=[];c.push("<"+d.nodeName);var a=d.attributes;if(a!=null){for(var b=0;b<a.length;b++){var e=a[b].value;if(e!=null&&e.length>0){c.push(" ");c.push(a[b].nodeName);c.push('="');c.push(e);c.push('"')}}}if(d.innerHTML.length==0){c.push("/>")}else{c.push(">");c.push(d.innerHTML);c.push("</"+d.nodeName+">")}return c.join("")}}return""}}else{return function(b){if(b!=null){var a=new XMLSerializer();return a.serializeToString(b)}return""}}}(),write:function(a,d){var c=a.ownerDocument;var b=c.createTextNode(d);if(a!=null){a.appendChild(b)}return b},writeln:function(a,d){var c=a.ownerDocument;var b=c.createTextNode(d);if(a!=null){a.appendChild(b);a.appendChild(document.createElement("br"))}return b},br:function(c,d){d=d||1;var b=null;for(var a=0;a<d;a++){if(c!=null){b=c.ownerDocument.createElement("br");c.appendChild(b)}}return b},button:function(b,a,d){d=(d!=null)?d:document;var c=d.createElement("button");mxUtils.write(c,b);mxEvent.addListener(c,"click",function(e){a(e)});return c},para:function(a,c){var b=document.createElement("p");mxUtils.write(b,c);if(a!=null){a.appendChild(b)}return b},addTransparentBackgroundFilter:function(a){a.style.filter+="progid:DXImageTransform.Microsoft.AlphaImageLoader(src='"+mxClient.imageBasePath+"/transparent.gif', sizingMethod='scale')"},linkAction:function(b,e,a,c,d){return mxUtils.link(b,e,function(){a.execute(c)},d)},linkInvoke:function(d,f,c,b,a,e){return mxUtils.link(d,f,function(){c[b](a)},e)},link:function(d,f,c,e){var b=document.createElement("span");b.style.color="blue";b.style.textDecoration="underline";b.style.cursor="pointer";if(e!=null){b.style.paddingLeft=e+"px"}mxEvent.addListener(b,"click",c);mxUtils.write(b,f);if(d!=null){d.appendChild(b)}return b},fit:function(f){var e=parseInt(f.offsetLeft);var c=parseInt(f.offsetWidth);var h=mxUtils.getDocumentScrollOrigin(f.ownerDocument);var g=h.x;var n=h.y;var k=document.body;var i=document.documentElement;var l=(g)+(k.clientWidth||i.clientWidth);if(e+c>l){f.style.left=Math.max(g,l-c)+"px"}var j=parseInt(f.offsetTop);var m=parseInt(f.offsetHeight);var a=n+Math.max(k.clientHeight||0,i.clientHeight);if(j+m>a){f.style.top=Math.max(n,a-m)+"px"}},load:function(a){var b=new mxXmlRequest(a,null,"GET",false);b.send();return b},get:function(c,f,b,g,e,a){var d=new mxXmlRequest(c,null,"GET");if(g!=null){d.setBinary(g)}d.send(f,b,e,a);return d},getAll:function(f,e,b){var h=f.length;var a=[];var g=0;var d=function(){if(g==0&&b!=null){b()}g++};for(var c=0;c<f.length;c++){(function(j,i){mxUtils.get(j,function(l){var k=l.getStatus();if(k<200||k>299){d()}else{a[i]=l;h--;if(h==0){e(a)}}},d)})(f[c],c)}if(h==0){e(a)}},post:function(b,d,c,a){return new mxXmlRequest(b,d).send(c,a)},submit:function(a,d,c,b){return new mxXmlRequest(a,d).simulate(c,b)},loadInto:function(a,c,b){if(mxClient.IS_IE){c.onreadystatechange=function(){if(c.readyState==4){b()}}}else{c.addEventListener("load",b,false)}c.load(a)},getValue:function(d,b,a){var c=(d!=null)?d[b]:null;if(c==null){c=a}return c},getNumber:function(d,b,a){var c=(d!=null)?d[b]:null;if(c==null){c=a||0}return Number(c)},getColor:function(d,b,a){var c=(d!=null)?d[b]:null;if(c==null){c=a}else{if(c==mxConstants.NONE){c=null}}return c},clone:function(d,b,c){c=(c!=null)?c:false;var e=null;if(d!=null&&typeof(d.constructor)=="function"){e=new d.constructor();for(var a in d){if(a!=mxObjectIdentity.FIELD_NAME&&(b==null||mxUtils.indexOf(b,a)<0)){if(!c&&typeof(d[a])=="object"){e[a]=mxUtils.clone(d[a])}else{e[a]=d[a]}}}}return e},equalPoints:function(d,c){if((d==null&&c!=null)||(d!=null&&c==null)||(d!=null&&c!=null&&d.length!=c.length)){return false}else{if(d!=null&&c!=null){for(var e=0;e<d.length;e++){if(d[e]==c[e]||(d[e]!=null&&!d[e].equals(c[e]))){return false}}}}return true},equalEntries:function(d,c){if((d==null&&c!=null)||(d!=null&&c==null)||(d!=null&&c!=null&&d.length!=c.length)){return false}else{if(d!=null&&c!=null){var f=0;for(var e in c){f++}for(var e in d){f--;if((!mxUtils.isNaN(d[e])||!mxUtils.isNaN(c[e]))&&d[e]!=c[e]){return false}}}}return f==0},removeDuplicates:function(b){var d=new mxDictionary();var a=[];for(var c=0;c<b.length;c++){if(!d.get(b[c])){a.push(b[c]);d.put(b[c],true)}}return a},isNaN:function(a){return typeof(a)=="number"&&isNaN(a)},extend:function(b,a){var c=function(){};c.prototype=a.prototype;b.prototype=new c();b.prototype.constructor=b},toString:function(f){var a="";for(var b in f){try{if(f[b]==null){a+=b+" = [null]\n"}else{if(typeof(f[b])=="function"){a+=b+" => [Function]\n"}else{if(typeof(f[b])=="object"){var c=mxUtils.getFunctionName(f[b].constructor);a+=b+" => ["+c+"]\n"}else{a+=b+" = "+f[b]+"\n"}}}}catch(d){a+=b+"="+d.message}}return a},toRadians:function(a){return Math.PI*a/180},toDegree:function(a){return a*180/Math.PI},arcToCurves:function(w,a,s,r,A,D,G,O,N){O-=w;N-=a;if(s===0||r===0){return B}var T=G;var X=A;s=Math.abs(s);r=Math.abs(r);var F=-O/2;var E=-N/2;var e=Math.cos(X*Math.PI/180);var J=Math.sin(X*Math.PI/180);var I=e*F+J*E;var q=-1*J*F+e*E;var p=I*I;var j=q*q;var H=s*s;var m=r*r;var ab=p/H+j/m;var U;if(ab>1){s=Math.sqrt(ab)*s;r=Math.sqrt(ab)*r;U=0}else{var l=1;if(D===T){l=-1}U=l*Math.sqrt((H*m-H*j-m*p)/(H*j+m*p))}var z=U*s*q/r;var d=-1*U*r*I/s;var W=e*z-J*d+O/2;var V=J*z+e*d+N/2;var g=Math.atan2((q-d)/r,(I-z)/s)-Math.atan2(0,1);var Y=(g>=0)?g:2*Math.PI+g;g=Math.atan2((-q-d)/r,(-I-z)/s)-Math.atan2((q-d)/r,(I-z)/s);var k=(g>=0)?g:2*Math.PI+g;if(T==0&&k>0){k-=2*Math.PI}else{if(T!=0&&k<0){k+=2*Math.PI}}var h=k*2/Math.PI;var L=Math.ceil(h<0?-1*h:h);var M=k/L;var R=8/3*Math.sin(M/4)*Math.sin(M/4)/Math.sin(M/2);var Q=e*s;var P=e*r;var c=J*s;var b=J*r;var C=Math.cos(Y);var o=Math.sin(Y);var v=-R*(Q*o+b*C);var aa=-R*(c*o-P*C);var u=0;var Z=0;var B=[];for(var S=0;S<L;++S){Y+=M;C=Math.cos(Y);o=Math.sin(Y);u=Q*C-b*o+W;Z=c*C+P*o+V;var i=-R*(Q*o+b*C);var f=-R*(c*o-P*C);var K=S*6;B[K]=Number(v+w);B[K+1]=Number(aa+a);B[K+2]=Number(u-i+w);B[K+3]=Number(Z-f+a);B[K+4]=Number(u+w);B[K+5]=Number(Z+a);v=u+i;aa=Z+f}return B},getBoundingBox:function(d,j,a){var k=null;if(d!=null&&j!=null&&j!=0){var c=mxUtils.toRadians(j);var i=Math.cos(c);var b=Math.sin(c);a=(a!=null)?a:new mxPoint(d.x+d.width/2,d.y+d.height/2);var h=new mxPoint(d.x,d.y);var g=new mxPoint(d.x+d.width,d.y);var f=new mxPoint(g.x,d.y+d.height);var e=new mxPoint(d.x,f.y);h=mxUtils.getRotatedPoint(h,i,b,a);g=mxUtils.getRotatedPoint(g,i,b,a);f=mxUtils.getRotatedPoint(f,i,b,a);e=mxUtils.getRotatedPoint(e,i,b,a);k=new mxRectangle(h.x,h.y,0,0);k.add(new mxRectangle(g.x,g.y,0,0));k.add(new mxRectangle(f.x,f.y,0,0));k.add(new mxRectangle(e.x,e.y,0,0))}return k},getRotatedPoint:function(g,f,b,i){i=(i!=null)?i:new mxPoint();var a=g.x-i.x;var h=g.y-i.y;var d=a*f-h*b;var e=h*f+a*b;return new mxPoint(d+i.x,e+i.y)},getPortConstraints:function(d,c,a,f){var g=mxUtils.getValue(d.style,mxConstants.STYLE_PORT_CONSTRAINT,null);if(g==null){return f}else{var e=g.toString();var b=mxConstants.DIRECTION_MASK_NONE;var j=mxUtils.getValue(d.style,mxConstants.STYLE_PORT_CONSTRAINT_ROTATION,0);var i=0;if(j==1){i=mxUtils.getValue(d.style,mxConstants.STYLE_ROTATION,0)}var h=0;if(i>45){h=1;if(i>=135){h=2}}else{if(i<-45){h=3;if(i<=-135){h=2}}}if(e.indexOf(mxConstants.DIRECTION_NORTH)>=0){switch(h){case 0:b|=mxConstants.DIRECTION_MASK_NORTH;break;case 1:b|=mxConstants.DIRECTION_MASK_EAST;break;case 2:b|=mxConstants.DIRECTION_MASK_SOUTH;break;case 3:b|=mxConstants.DIRECTION_MASK_WEST;break}}if(e.indexOf(mxConstants.DIRECTION_WEST)>=0){switch(h){case 0:b|=mxConstants.DIRECTION_MASK_WEST;break;case 1:b|=mxConstants.DIRECTION_MASK_NORTH;break;case 2:b|=mxConstants.DIRECTION_MASK_EAST;break;case 3:b|=mxConstants.DIRECTION_MASK_SOUTH;break}}if(e.indexOf(mxConstants.DIRECTION_SOUTH)>=0){switch(h){case 0:b|=mxConstants.DIRECTION_MASK_SOUTH;break;case 1:b|=mxConstants.DIRECTION_MASK_WEST;break;case 2:b|=mxConstants.DIRECTION_MASK_NORTH;break;case 3:b|=mxConstants.DIRECTION_MASK_EAST;break}}if(e.indexOf(mxConstants.DIRECTION_EAST)>=0){switch(h){case 0:b|=mxConstants.DIRECTION_MASK_EAST;break;case 1:b|=mxConstants.DIRECTION_MASK_SOUTH;break;case 2:b|=mxConstants.DIRECTION_MASK_WEST;break;case 3:b|=mxConstants.DIRECTION_MASK_NORTH;break}}return b}},reversePortConstraints:function(b){var a=0;a=(b&mxConstants.DIRECTION_MASK_WEST)<<3;a|=(b&mxConstants.DIRECTION_MASK_NORTH)<<1;a|=(b&mxConstants.DIRECTION_MASK_SOUTH)>>1;a|=(b&mxConstants.DIRECTION_MASK_EAST)>>3;return a},findNearestSegment:function(a,h,g){var d=-1;if(a.absolutePoints.length>0){var j=a.absolutePoints[0];var b=null;for(var c=1;c<a.absolutePoints.length;c++){var e=a.absolutePoints[c];var f=mxUtils.ptSegDistSq(j.x,j.y,e.x,e.y,h,g);if(b==null||f<b){b=f;d=c-1}j=e}}return d},rectangleIntersectsSegment:function(d,p,n){var l=d.y;var h=d.x;var e=l+d.height;var o=h+d.width;var i=p.x;var f=n.x;if(p.x>n.x){i=n.x;f=p.x}if(f>o){f=o}if(i<h){i=h}if(i>f){return false}var g=p.y;var c=n.y;var q=n.x-p.x;if(Math.abs(q)>1e-7){var m=(n.y-p.y)/q;var k=p.y-m*p.x;g=m*i+k;c=m*f+k}if(g>c){var j=c;c=g;g=j}if(c>e){c=e}if(g<l){g=l}if(g>c){return false}return true},contains:function(b,a,c){return(b.x<=a&&b.x+b.width>=a&&b.y<=c&&b.y+b.height>=c)},intersects:function(k,j){var i=k.width;var e=k.height;var f=j.width;var l=j.height;if(f<=0||l<=0||i<=0||e<=0){return false}var h=k.x;var g=k.y;var d=j.x;var c=j.y;f+=d;l+=c;i+=h;e+=g;return((f<d||f>h)&&(l<c||l>g)&&(i<h||i>d)&&(e<g||e>c))},intersectsHotspot:function(a,n,l,b,g,m){b=(b!=null)?b:1;g=(g!=null)?g:0;m=(m!=null)?m:0;if(b>0){var f=a.getCenterX();var d=a.getCenterY();var o=a.width;var i=a.height;var c=mxUtils.getValue(a.style,mxConstants.STYLE_STARTSIZE)*a.view.scale;if(c>0){if(mxUtils.getValue(a.style,mxConstants.STYLE_HORIZONTAL,true)){d=a.y+c/2;i=c}else{f=a.x+c/2;o=c}}o=Math.max(g,o*b);i=Math.max(g,i*b);if(m>0){o=Math.min(o,m);i=Math.min(i,m)}var k=new mxRectangle(f-o/2,d-i/2,o,i);var e=mxUtils.toRadians(mxUtils.getValue(a.style,mxConstants.STYLE_ROTATION)||0);if(e!=0){var p=Math.cos(-e);var j=Math.sin(-e);var f=new mxPoint(a.getCenterX(),a.getCenterY());var q=mxUtils.getRotatedPoint(new mxPoint(n,l),p,j,f);n=q.x;l=q.y}return mxUtils.contains(k,n,l)}return true},getOffset:function(e,k){var g=0;var f=0;var i=false;var h=e;var m=document.body;var l=document.documentElement;while(h!=null&&h!=m&&h!=l&&!i){var c=mxUtils.getCurrentStyle(h);if(c!=null){i=i||c.position=="fixed"}h=h.parentNode}if(!k&&!i){var j=mxUtils.getDocumentScrollOrigin(e.ownerDocument);g+=j.x;f+=j.y}var a=e.getBoundingClientRect();if(a!=null){g+=a.left;f+=a.top}return new mxPoint(g,f)},getDocumentScrollOrigin:function(c){if(mxClient.IS_QUIRKS){return new mxPoint(c.body.scrollLeft,c.body.scrollTop)}else{var b=c.defaultView||c.parentWindow;var a=(b!=null&&window.pageXOffset!==undefined)?window.pageXOffset:(document.documentElement||document.body.parentNode||document.body).scrollLeft;var d=(b!=null&&window.pageYOffset!==undefined)?window.pageYOffset:(document.documentElement||document.body.parentNode||document.body).scrollTop;return new mxPoint(a,d)}},getScrollOrigin:function(h){var i=(h!=null)?h.ownerDocument:document;var c=i.body;var j=i.documentElement;var a=new mxPoint();var g=false;while(h!=null&&h!=c&&h!=j){if(!isNaN(h.scrollLeft)&&!isNaN(h.scrollTop)){a.x+=h.scrollLeft;a.y+=h.scrollTop}var f=mxUtils.getCurrentStyle(h);if(f!=null){g=g||f.position=="fixed"}h=h.parentNode}if(!g){var e=mxUtils.getDocumentScrollOrigin(i);a.x+=e.x;a.y+=e.y}return a},convertPoint:function(b,a,e){var c=mxUtils.getScrollOrigin(b);var d=mxUtils.getOffset(b);d.x-=c.x;d.y-=c.y;return new mxPoint(a-d.x,e-d.y)},ltrim:function(b,a){a=a||"\\s";return b.replace(new RegExp("^["+a+"]+","g"),"")},rtrim:function(b,a){a=a||"\\s";return b.replace(new RegExp("["+a+"]+$","g"),"")},trim:function(b,a){return mxUtils.ltrim(mxUtils.rtrim(b,a),a)},isNumeric:function(a){return !isNaN(parseFloat(a))&&isFinite(a)&&(typeof(a)!="string"||a.toLowerCase().indexOf("0x")<0)},isInteger:function(a){return String(parseInt(a))===String(a)},mod:function(b,a){return((b%a)+a)%a},intersection:function(f,o,e,m,d,k,b,j){var i=((j-k)*(e-f))-((b-d)*(m-o));var n=((b-d)*(o-k))-((j-k)*(f-d));var l=((e-f)*(o-k))-((m-o)*(f-d));var c=n/i;var a=l/i;if(c>=0&&c<=1&&a>=0&&a<=1){var h=f+c*(e-f);var g=o+c*(m-o);return new mxPoint(h,g)}return null},ptSegDistSq:function(c,g,b,e,i,h){b-=c;e-=g;i-=c;h-=g;var f=i*b+h*e;var a;if(f<=0){a=0}else{i=b-i;h=e-h;f=i*b+h*e;if(f<=0){a=0}else{a=f*f/(b*b+e*e)}}var d=i*i+h*h-a;if(d<0){d=0}return d},ptLineDist:function(c,f,a,e,d,b){return Math.abs((e-f)*d-(a-c)*b+a*f-e*c)/Math.sqrt((e-f)*(e-f)+(a-c)*(a-c))},relativeCcw:function(d,g,b,f,e,c){b-=d;f-=g;e-=d;c-=g;var a=e*f-c*b;if(a==0){a=e*b+c*f;if(a>0){e-=b;c-=f;a=e*b+c*f;if(a<0){a=0}}}return(a<0)?-1:((a>0)?1:0)},animateChanges:function(b,a){mxEffects.animateChanges.apply(this,arguments)},cascadeOpacity:function(c,a,b){mxEffects.cascadeOpacity.apply(this,arguments)},fadeOut:function(e,f,a,d,b,c){mxEffects.fadeOut.apply(this,arguments)},setOpacity:function(a,b){if(mxUtils.isVml(a)){if(b>=100){a.style.filter=""}else{a.style.filter="alpha(opacity="+(b/5)+")"}}else{if(mxClient.IS_IE&&(typeof(document.documentMode)==="undefined"||document.documentMode<9)){if(b>=100){a.style.filter=""}else{a.style.filter="alpha(opacity="+b+")"}}else{a.style.opacity=(b/100)}}},createImage:function(b){var a=null;if(mxClient.IS_IE6&&document.compatMode!="CSS1Compat"){a=document.createElement(mxClient.VML_PREFIX+":image");a.setAttribute("src",b);a.style.borderStyle="none"}else{a=document.createElement("img");a.setAttribute("src",b);a.setAttribute("border","0")}return a},sortCells:function(a,b){b=(b!=null)?b:true;var c=new mxDictionary();a.sort(function(f,e){var h=c.get(f);if(h==null){h=mxCellPath.create(f).split(mxCellPath.PATH_SEPARATOR);c.put(f,h)}var g=c.get(e);if(g==null){g=mxCellPath.create(e).split(mxCellPath.PATH_SEPARATOR);c.put(e,g)}var d=mxCellPath.compare(h,g);return(d==0)?0:(((d>0)==b)?1:-1)});return a},getStylename:function(a){if(a!=null){var c=a.split(";");var b=c[0];if(b.indexOf("=")<0){return b}}return""},getStylenames:function(c){var a=[];if(c!=null){var d=c.split(";");for(var b=0;b<d.length;b++){if(d[b].indexOf("=")<0){a.push(d[b])}}}return a},indexOfStylename:function(b,c){if(b!=null&&c!=null){var d=b.split(";");var e=0;for(var a=0;a<d.length;a++){if(d[a]==c){return e}e+=d[a].length+1}}return -1},addStylename:function(a,b){if(mxUtils.indexOfStylename(a,b)<0){if(a==null){a=""}else{if(a.length>0&&a.charAt(a.length-1)!=";"){a+=";"}}a+=b}return a},removeStylename:function(c,d){var a=[];if(c!=null){var e=c.split(";");for(var b=0;b<e.length;b++){if(e[b]!=d){a.push(e[b])}}}return a.join(";")},removeAllStylenames:function(c){var a=[];if(c!=null){var d=c.split(";");for(var b=0;b<d.length;b++){if(d[b].indexOf("=")>=0){a.push(d[b])}}}return a.join(";")},setCellStyles:function(b,a,d,f){if(a!=null&&a.length>0){b.beginUpdate();try{for(var c=0;c<a.length;c++){if(a[c]!=null){var e=mxUtils.setStyle(b.getStyle(a[c]),d,f);b.setStyle(a[c],e)}}}finally{b.endUpdate()}}},setStyle:function(e,c,f){var g=f!=null&&(typeof(f.length)=="undefined"||f.length>0);if(e==null||e.length==0){if(g){e=c+"="+f+";"}}else{if(e.substring(0,c.length+1)==c+"="){var d=e.indexOf(";");if(g){e=c+"="+f+((d<0)?";":e.substring(d))}else{e=(d<0||d==e.length-1)?"":e.substring(d+1)}}else{var b=e.indexOf(";"+c+"=");if(b<0){if(g){var a=(e.charAt(e.length-1)==";")?"":";";e=e+a+c+"="+f+";"}}else{var d=e.indexOf(";",b+1);if(g){e=e.substring(0,b+1)+c+"="+f+((d<0)?";":e.substring(d))}else{e=e.substring(0,b)+((d<0)?";":e.substring(d))}}}}return e},setCellStyleFlags:function(c,b,e,a,g){if(b!=null&&b.length>0){c.beginUpdate();try{for(var d=0;d<b.length;d++){if(b[d]!=null){var f=mxUtils.setStyleFlag(c.getStyle(b[d]),e,a,g);c.setStyle(b[d],f)}}}finally{c.endUpdate()}}},setStyleFlag:function(g,f,b,h){if(g==null||g.length==0){if(h||h==null){g=f+"="+b}else{g=f+"=0"}}else{var d=g.indexOf(f+"=");if(d<0){var c=(g.charAt(g.length-1)==";")?"":";";if(h||h==null){g=g+c+f+"="+b}else{g=g+c+f+"=0"}}else{var a=g.indexOf(";",d);var e="";if(a<0){e=g.substring(d+f.length+1)}else{e=g.substring(d+f.length+1,a)}if(h==null){e=parseInt(e)^b}else{if(h){e=parseInt(e)|b}else{e=parseInt(e)&~b}}g=g.substring(0,d)+f+"="+e+((a>=0)?g.substring(a):"")}}return g},getAlignmentAsPoint:function(d,c){var b=0;var a=0;if(d==mxConstants.ALIGN_CENTER){b=-0.5}else{if(d==mxConstants.ALIGN_RIGHT){b=-1}}if(c==mxConstants.ALIGN_MIDDLE){a=-0.5}else{if(c==mxConstants.ALIGN_BOTTOM){a=-1}}return new mxPoint(b,a)},getSizeForString:function(e,c,a,d){c=(c!=null)?c:mxConstants.DEFAULT_FONTSIZE;a=(a!=null)?a:mxConstants.DEFAULT_FONTFAMILY;var f=document.createElement("div");f.style.fontFamily=a;f.style.fontSize=Math.round(c)+"px";f.style.lineHeight=Math.round(c*mxConstants.LINE_HEIGHT)+"px";f.style.position="absolute";f.style.visibility="hidden";f.style.display=(mxClient.IS_QUIRKS)?"inline":"inline-block";f.style.zoom="1";if(d!=null){f.style.width=d+"px";f.style.whiteSpace="normal"}else{f.style.whiteSpace="nowrap"}f.innerHTML=e;document.body.appendChild(f);var b=new mxRectangle(0,0,f.offsetWidth,f.offsetHeight);document.body.removeChild(f);return b},getViewXml:function(k,c,m,a,i){a=(a!=null)?a:0;i=(i!=null)?i:0;c=(c!=null)?c:1;if(m==null){var e=k.getModel();m=[e.getRoot()]}var g=k.getView();var n=null;var f=g.isEventsEnabled();g.setEventsEnabled(false);var h=g.drawPane;var l=g.overlayPane;if(k.dialect==mxConstants.DIALECT_SVG){g.drawPane=document.createElementNS(mxConstants.NS_SVG,"g");g.canvas.appendChild(g.drawPane);g.overlayPane=document.createElementNS(mxConstants.NS_SVG,"g");g.canvas.appendChild(g.overlayPane)}else{g.drawPane=g.drawPane.cloneNode(false);g.canvas.appendChild(g.drawPane);g.overlayPane=g.overlayPane.cloneNode(false);g.canvas.appendChild(g.overlayPane)}var b=g.getTranslate();g.translate=new mxPoint(a,i);var j=new mxTemporaryCellStates(k.getView(),c,m);try{var d=new mxCodec();n=d.encode(k.getView())}finally{j.destroy();g.translate=b;g.canvas.removeChild(g.drawPane);g.canvas.removeChild(g.overlayPane);g.drawPane=h;g.overlayPane=l;g.setEventsEnabled(f)}return n},getScaleForPageCount:function(r,g,s,t){if(r<1){return 1}s=(s!=null)?s:mxConstants.PAGE_FORMAT_A4_PORTRAIT;t=(t!=null)?t:0;var q=s.width-(t*2);var c=s.height-(t*2);var h=g.getGraphBounds().clone();var e=g.getView().getScale();h.width/=e;h.height/=e;var l=h.width;var n=h.height;var w=1;var j=q/c;var u=l/n;var o=u/j;var b=Math.sqrt(r);var a=Math.sqrt(o);var f=b*a;var m=b/a;if(f<1&&m>r){var x=m/r;m=r;f/=x}if(m<1&&f>r){var x=f/r;f=r;m/=x}var d=Math.ceil(f)*Math.ceil(m);var k=0;while(d>r){var v=Math.floor(f)/f;var i=Math.floor(m)/m;if(v==1){v=Math.floor(f-1)/f}if(i==1){i=Math.floor(m-1)/m}var x=1;if(v>i){x=v}else{x=i}f=f*x;m=m*x;d=Math.ceil(f)*Math.ceil(m);k++;if(k>10){break}}var p=q*f;w=p/l;return w*0.99999},show:function(b,y,u,f,m,t){u=(u!=null)?u:0;f=(f!=null)?f:0;if(y==null){var d=window.open();y=d.document}else{y.open()}if(document.documentMode==9){y.writeln('<!--[if IE]><meta http-equiv="X-UA-Compatible" content="IE=9"><![endif]-->')}var j=b.getGraphBounds();var o=Math.ceil(u-j.x);var l=Math.ceil(f-j.y);if(m==null){m=Math.ceil(j.width+u)+Math.ceil(Math.ceil(j.x)-j.x)}if(t==null){t=Math.ceil(j.height+f)+Math.ceil(Math.ceil(j.y)-j.y)}if(mxClient.IS_IE||document.documentMode==11){var n="<html><head>";var g=document.getElementsByTagName("base");for(var s=0;s<g.length;s++){n+=g[s].outerHTML}n+="<style>";for(var s=0;s<document.styleSheets.length;s++){try{n+=document.styleSheets[s].cssText}catch(v){}}n+='</style></head><body style="margin:0px;">';n+='<div style="position:absolute;overflow:hidden;width:'+m+"px;height:"+t+'px;"><div style="position:relative;left:'+o+"px;top:"+l+'px;">';n+=b.container.innerHTML;n+="</div></div></body><html>";y.writeln(n);y.close()}else{y.writeln("<html><head>");var g=document.getElementsByTagName("base");for(var s=0;s<g.length;s++){y.writeln(mxUtils.getOuterHtml(g[s]))}var c=document.getElementsByTagName("link");for(var s=0;s<c.length;s++){y.writeln(mxUtils.getOuterHtml(c[s]))}var k=document.getElementsByTagName("style");for(var s=0;s<k.length;s++){y.writeln(mxUtils.getOuterHtml(k[s]))}y.writeln('</head><body style="margin:0px;"></body></html>');y.close();var a=y.createElement("div");a.position="absolute";a.overflow="hidden";a.style.width=m+"px";a.style.height=t+"px";var p=y.createElement("div");p.style.position="absolute";p.style.left=o+"px";p.style.top=l+"px";var r=b.container.firstChild;var q=null;while(r!=null){var x=r.cloneNode(true);if(r==b.view.drawPane.ownerSVGElement){a.appendChild(x);q=x}else{p.appendChild(x)}r=r.nextSibling}y.body.appendChild(a);if(p.firstChild!=null){y.body.appendChild(p)}if(q!=null){q.style.minWidth="";q.style.minHeight="";q.firstChild.setAttribute("transform","translate("+o+","+l+")")}}mxUtils.removeCursors(y.body);return y},printScreen:function(d){var c=window.open();var b=d.getGraphBounds();mxUtils.show(d,c.document);var a=function(){c.focus();c.print();c.close()};if(mxClient.IS_GC){c.setTimeout(a,500)}else{a()}},popup:function(d,g){if(g){var f=document.createElement("div");f.style.overflow="scroll";f.style.width="636px";f.style.height="460px";var e=document.createElement("pre");e.innerHTML=mxUtils.htmlEntities(d,false).replace(/\n/g,"<br>").replace(/ /g,"&nbsp;");f.appendChild(e);var a=document.body.clientWidth;var b=Math.max(document.body.clientHeight||0,document.documentElement.clientHeight);var c=new mxWindow("Popup Window",f,a/2-320,b/2-240,640,480,false,true);c.setClosable(true);c.setVisible(true)}else{if(mxClient.IS_NS){var c=window.open();c.document.writeln("<pre>"+mxUtils.htmlEntities(d)+"</pre");c.document.close()}else{var c=window.open();var e=c.document.createElement("pre");e.innerHTML=mxUtils.htmlEntities(d,false).replace(/\n/g,"<br>").replace(/ /g,"&nbsp;");c.document.body.appendChild(e)}}},alert:function(a){alert(a)},prompt:function(b,a){return prompt(b,(a!=null)?a:"")},confirm:function(a){return confirm(a)},error:function(l,b,k,i){var a=document.createElement("div");a.style.padding="20px";var d=document.createElement("img");d.setAttribute("src",i||mxUtils.errorImage);d.setAttribute("valign","bottom");d.style.verticalAlign="middle";a.appendChild(d);a.appendChild(document.createTextNode("\u00a0"));a.appendChild(document.createTextNode("\u00a0"));a.appendChild(document.createTextNode("\u00a0"));mxUtils.write(a,l);var j=document.body.clientWidth;var f=(document.body.clientHeight||document.documentElement.clientHeight);var g=new mxWindow(mxResources.get(mxUtils.errorResource)||mxUtils.errorResource,a,(j-b)/2,f/4,b,null,false,true);if(k){mxUtils.br(a);var c=document.createElement("p");var e=document.createElement("button");if(mxClient.IS_IE){e.style.cssText="float:right"}else{e.setAttribute("style","float:right")}mxEvent.addListener(e,"click",function(h){g.destroy()});mxUtils.write(e,mxResources.get(mxUtils.closeResource)||mxUtils.closeResource);c.appendChild(e);a.appendChild(c);mxUtils.br(a);g.setClosable(true)}g.setVisible(true);return g},makeDraggable:function(e,f,b,a,k,j,i,h,d,g){var c=new mxDragSource(e,b);c.dragOffset=new mxPoint((k!=null)?k:0,(j!=null)?j:mxConstants.TOOLTIP_VERTICAL_OFFSET);c.autoscroll=i;c.setGuidesEnabled(false);if(d!=null){c.highlightDropTargets=d}if(g!=null){c.getDropTarget=g}c.getGraphForEvent=function(l){return(typeof(f)=="function")?f(l):f};if(a!=null){c.createDragElement=function(){return a.cloneNode(true)};if(h){c.createPreviewElement=function(o){var m=a.cloneNode(true);var l=parseInt(m.style.width);var n=parseInt(m.style.height);m.style.width=Math.round(l*o.view.scale)+"px";m.style.height=Math.round(n*o.view.scale)+"px";return m}}}return c}};