function mxMorphing(c,a,d,b){mxAnimation.call(this,b);this.graph=c;this.steps=(a!=null)?a:6;this.ease=(d!=null)?d:1.5}mxMorphing.prototype=new mxAnimation();mxMorphing.prototype.constructor=mxMorphing;mxMorphing.prototype.graph=null;mxMorphing.prototype.steps=null;mxMorphing.prototype.step=0;mxMorphing.prototype.ease=null;mxMorphing.prototype.cells=null;mxMorphing.prototype.updateAnimation=function(){var a=new mxCellStatePreview(this.graph);if(this.cells!=null){for(var b=0;b<this.cells.length;b++){this.animateCell(this.cells[b],a,false)}}else{this.animateCell(this.graph.getModel().getRoot(),a,true)}this.show(a);if(a.isEmpty()||this.step++>=this.steps){this.stopAnimation()}};mxMorphing.prototype.show=function(a){a.show()};mxMorphing.prototype.animateCell=function(j,d,b){var a=this.graph.getView().getState(j);var h=null;if(a!=null){h=this.getDelta(a);if(this.graph.getModel().isVertex(j)&&(h.x!=0||h.y!=0)){var c=this.graph.view.getTranslate();var e=this.graph.view.getScale();h.x+=c.x*e;h.y+=c.y*e;d.moveState(a,-h.x/this.ease,-h.y/this.ease)}}if(b&&!this.stopRecursion(a,h)){var f=this.graph.getModel().getChildCount(j);for(var g=0;g<f;g++){this.animateCell(this.graph.getModel().getChildAt(j,g),d,b)}}};mxMorphing.prototype.stopRecursion=function(a,b){return b!=null&&(b.x!=0||b.y!=0)};mxMorphing.prototype.getDelta=function(c){var b=this.getOriginForCell(c.cell);var e=this.graph.getView().getTranslate();var d=this.graph.getView().getScale();var a=c.x/d-e.x;var f=c.y/d-e.y;return new mxPoint((b.x-a)*d,(b.y-f)*d)};mxMorphing.prototype.getOriginForCell=function(b){var a=null;if(b!=null){var e=this.graph.getModel().getParent(b);var f=this.graph.getCellGeometry(b);a=this.getOriginForCell(e);if(f!=null){if(f.relative){var c=this.graph.getCellGeometry(e);if(c!=null){a.x+=f.x*c.width;a.y+=f.y*c.height}}else{a.x+=f.x;a.y+=f.y}}}if(a==null){var d=this.graph.view.getTranslate();a=new mxPoint(-d.x,-d.y)}return a};