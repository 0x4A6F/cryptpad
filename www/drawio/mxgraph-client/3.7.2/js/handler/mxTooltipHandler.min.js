function mxTooltipHandler(b,a){if(b!=null){this.graph=b;this.delay=a||500;this.graph.addMouseListener(this)}}mxTooltipHandler.prototype.zIndex=10005;mxTooltipHandler.prototype.graph=null;mxTooltipHandler.prototype.delay=null;mxTooltipHandler.prototype.ignoreTouchEvents=true;mxTooltipHandler.prototype.hideOnHover=false;mxTooltipHandler.prototype.destroyed=false;mxTooltipHandler.prototype.enabled=true;mxTooltipHandler.prototype.isEnabled=function(){return this.enabled};mxTooltipHandler.prototype.setEnabled=function(a){this.enabled=a};mxTooltipHandler.prototype.isHideOnHover=function(){return this.hideOnHover};mxTooltipHandler.prototype.setHideOnHover=function(a){this.hideOnHover=a};mxTooltipHandler.prototype.init=function(){if(document.body!=null){this.div=document.createElement("div");this.div.className="mxTooltip";this.div.style.visibility="hidden";document.body.appendChild(this.div);mxEvent.addGestureListeners(this.div,mxUtils.bind(this,function(a){this.hideTooltip()}))}};mxTooltipHandler.prototype.mouseDown=function(a,b){this.reset(b,false);this.hideTooltip()};mxTooltipHandler.prototype.mouseMove=function(a,b){if(b.getX()!=this.lastX||b.getY()!=this.lastY){this.reset(b,true);if(this.isHideOnHover()||b.getState()!=this.state||(b.getSource()!=this.node&&(!this.stateSource||(b.getState()!=null&&this.stateSource==(b.isSource(b.getState().shape)||!b.isSource(b.getState().text)))))){this.hideTooltip()}}this.lastX=b.getX();this.lastY=b.getY()};mxTooltipHandler.prototype.mouseUp=function(a,b){this.reset(b,true);this.hideTooltip()};mxTooltipHandler.prototype.resetTimer=function(){if(this.thread!=null){window.clearTimeout(this.thread);this.thread=null}};mxTooltipHandler.prototype.reset=function(d,b){if(!this.ignoreTouchEvents||mxEvent.isMouseEvent(d.getEvent())){this.resetTimer();if(b&&this.isEnabled()&&d.getState()!=null&&(this.div==null||this.div.style.visibility=="hidden")){var e=d.getState();var c=d.getSource();var a=d.getX();var g=d.getY();var f=d.isSource(e.shape)||d.isSource(e.text);this.thread=window.setTimeout(mxUtils.bind(this,function(){if(!this.graph.isEditing()&&!this.graph.popupMenuHandler.isMenuShowing()&&!this.graph.isMouseDown){var h=this.graph.getTooltip(e,c,a,g);this.show(h,a,g);this.state=e;this.node=c;this.stateSource=f}}),this.delay)}}};mxTooltipHandler.prototype.hide=function(){this.resetTimer();this.hideTooltip()};mxTooltipHandler.prototype.hideTooltip=function(){if(this.div!=null){this.div.style.visibility="hidden"}};mxTooltipHandler.prototype.show=function(c,a,d){if(!this.destroyed&&c!=null&&c.length>0){if(this.div==null){this.init()}var b=mxUtils.getScrollOrigin();this.div.style.zIndex=this.zIndex;this.div.style.left=(a+b.x)+"px";this.div.style.top=(d+mxConstants.TOOLTIP_VERTICAL_OFFSET+b.y)+"px";if(!mxUtils.isNode(c)){this.div.innerHTML=c.replace(/\n/g,"<br>")}else{this.div.innerHTML="";this.div.appendChild(c)}this.div.style.visibility="";mxUtils.fit(this.div)}};mxTooltipHandler.prototype.destroy=function(){if(!this.destroyed){this.graph.removeMouseListener(this);mxEvent.release(this.div);if(this.div!=null&&this.div.parentNode!=null){this.div.parentNode.removeChild(this.div)}this.destroyed=true;this.div=null}};