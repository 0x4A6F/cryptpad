function mxCellMarker(c,d,a,b){mxEventSource.call(this);if(c!=null){this.graph=c;this.validColor=(d!=null)?d:mxConstants.DEFAULT_VALID_COLOR;this.invalidColor=(d!=null)?a:mxConstants.DEFAULT_INVALID_COLOR;this.hotspot=(b!=null)?b:mxConstants.DEFAULT_HOTSPOT;this.highlight=new mxCellHighlight(c)}}mxUtils.extend(mxCellMarker,mxEventSource);mxCellMarker.prototype.graph=null;mxCellMarker.prototype.enabled=true;mxCellMarker.prototype.hotspot=mxConstants.DEFAULT_HOTSPOT;mxCellMarker.prototype.hotspotEnabled=false;mxCellMarker.prototype.validColor=null;mxCellMarker.prototype.invalidColor=null;mxCellMarker.prototype.currentColor=null;mxCellMarker.prototype.validState=null;mxCellMarker.prototype.markedState=null;mxCellMarker.prototype.setEnabled=function(a){this.enabled=a};mxCellMarker.prototype.isEnabled=function(){return this.enabled};mxCellMarker.prototype.setHotspot=function(a){this.hotspot=a};mxCellMarker.prototype.getHotspot=function(){return this.hotspot};mxCellMarker.prototype.setHotspotEnabled=function(a){this.hotspotEnabled=a};mxCellMarker.prototype.isHotspotEnabled=function(){return this.hotspotEnabled};mxCellMarker.prototype.hasValidState=function(){return this.validState!=null};mxCellMarker.prototype.getValidState=function(){return this.validState};mxCellMarker.prototype.getMarkedState=function(){return this.markedState};mxCellMarker.prototype.reset=function(){this.validState=null;if(this.markedState!=null){this.markedState=null;this.unmark()}};mxCellMarker.prototype.process=function(a){var b=null;if(this.isEnabled()){b=this.getState(a);this.setCurrentState(b,a)}return b};mxCellMarker.prototype.setCurrentState=function(c,b,a){var d=(c!=null)?this.isValidState(c):false;a=(a!=null)?a:this.getMarkerColor(b.getEvent(),c,d);if(d){this.validState=c}else{this.validState=null}if(c!=this.markedState||a!=this.currentColor){this.currentColor=a;if(c!=null&&this.currentColor!=null){this.markedState=c;this.mark()}else{if(this.markedState!=null){this.markedState=null;this.unmark()}}}};mxCellMarker.prototype.markCell=function(a,b){var c=this.graph.getView().getState(a);if(c!=null){this.currentColor=(b!=null)?b:this.validColor;this.markedState=c;this.mark()}};mxCellMarker.prototype.mark=function(){this.highlight.setHighlightColor(this.currentColor);this.highlight.highlight(this.markedState);this.fireEvent(new mxEventObject(mxEvent.MARK,"state",this.markedState))};mxCellMarker.prototype.unmark=function(){this.mark()};mxCellMarker.prototype.isValidState=function(a){return true};mxCellMarker.prototype.getMarkerColor=function(a,b,c){return(c)?this.validColor:this.invalidColor};mxCellMarker.prototype.getState=function(b){var a=this.graph.getView();cell=this.getCell(b);var c=this.getStateToMark(a.getState(cell));return(c!=null&&this.intersects(c,b))?c:null};mxCellMarker.prototype.getCell=function(a){return a.getCell()};mxCellMarker.prototype.getStateToMark=function(a){return a};mxCellMarker.prototype.intersects=function(b,a){if(this.hotspotEnabled){return mxUtils.intersectsHotspot(b,a.getGraphX(),a.getGraphY(),this.hotspot,mxConstants.MIN_HOTSPOT_SIZE,mxConstants.MAX_HOTSPOT_SIZE)}return true};mxCellMarker.prototype.destroy=function(){this.graph.getView().removeListener(this.resetHandler);this.graph.getModel().removeListener(this.resetHandler);this.highlight.destroy()};