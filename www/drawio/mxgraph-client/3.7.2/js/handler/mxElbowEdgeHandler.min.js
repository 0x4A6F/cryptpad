function mxElbowEdgeHandler(a){mxEdgeHandler.call(this,a)}mxUtils.extend(mxElbowEdgeHandler,mxEdgeHandler);mxElbowEdgeHandler.prototype.flipEnabled=true;mxElbowEdgeHandler.prototype.doubleClickOrientationResource=(mxClient.language!="none")?"doubleClickOrientation":"";mxElbowEdgeHandler.prototype.createBends=function(){var b=[];var a=this.createHandleShape(0);this.initBend(a);a.setCursor(mxConstants.CURSOR_TERMINAL_HANDLE);b.push(a);b.push(this.createVirtualBend(mxUtils.bind(this,function(c){if(!mxEvent.isConsumed(c)&&this.flipEnabled){this.graph.flipEdge(this.state.cell,c);mxEvent.consume(c)}})));this.points.push(new mxPoint(0,0));a=this.createHandleShape(2);this.initBend(a);a.setCursor(mxConstants.CURSOR_TERMINAL_HANDLE);b.push(a);return b};mxElbowEdgeHandler.prototype.createVirtualBend=function(a){var b=this.createHandleShape();this.initBend(b,a);b.setCursor(this.getCursorForBend());if(!this.graph.isCellBendable(this.state.cell)){b.node.style.display="none"}return b};mxElbowEdgeHandler.prototype.getCursorForBend=function(){return(this.state.style[mxConstants.STYLE_EDGE]==mxEdgeStyle.TopToBottom||this.state.style[mxConstants.STYLE_EDGE]==mxConstants.EDGESTYLE_TOPTOBOTTOM||((this.state.style[mxConstants.STYLE_EDGE]==mxEdgeStyle.ElbowConnector||this.state.style[mxConstants.STYLE_EDGE]==mxConstants.EDGESTYLE_ELBOW)&&this.state.style[mxConstants.STYLE_ELBOW]==mxConstants.ELBOW_VERTICAL))?"row-resize":"col-resize"};mxElbowEdgeHandler.prototype.getTooltipForNode=function(a){var b=null;if(this.bends!=null&&this.bends[1]!=null&&(a==this.bends[1].node||a.parentNode==this.bends[1].node)){b=this.doubleClickOrientationResource;b=mxResources.get(b)||b}return b};mxElbowEdgeHandler.prototype.convertPoint=function(a,d){var e=this.graph.getView().getScale();var c=this.graph.getView().getTranslate();var b=this.state.origin;if(d){a.x=this.graph.snap(a.x);a.y=this.graph.snap(a.y)}a.x=Math.round(a.x/e-c.x-b.x);a.y=Math.round(a.y/e-c.y-b.y);return a};mxElbowEdgeHandler.prototype.redrawInnerBends=function(j,e){var d=this.graph.getModel().getGeometry(this.state.cell);var k=this.state.absolutePoints;var l=null;if(k.length>1){j=k[1];e=k[k.length-2]}else{if(d.points!=null&&d.points.length>0){l=k[0]}}if(l==null){l=new mxPoint(j.x+(e.x-j.x)/2,j.y+(e.y-j.y)/2)}else{l=new mxPoint(this.graph.getView().scale*(l.x+this.graph.getView().translate.x+this.state.origin.x),this.graph.getView().scale*(l.y+this.graph.getView().translate.y+this.state.origin.y))}var f=this.bends[1].bounds;var i=f.width;var c=f.height;var a=new mxRectangle(Math.round(l.x-i/2),Math.round(l.y-c/2),i,c);if(this.manageLabelHandle){this.checkLabelHandle(a)}else{if(this.handleImage==null&&this.labelShape.visible&&mxUtils.intersects(a,this.labelShape.bounds)){i=mxConstants.HANDLE_SIZE+3;c=mxConstants.HANDLE_SIZE+3;a=new mxRectangle(Math.floor(l.x-i/2),Math.floor(l.y-c/2),i,c)}}this.bends[1].bounds=a;this.bends[1].redraw();if(this.manageLabelHandle){this.checkLabelHandle(this.bends[1].bounds)}};