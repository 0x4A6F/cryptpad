function mxCellHighlight(b,d,c,a){if(b!=null){this.graph=b;this.highlightColor=(d!=null)?d:mxConstants.DEFAULT_VALID_COLOR;this.strokeWidth=(c!=null)?c:mxConstants.HIGHLIGHT_STROKEWIDTH;this.dashed=(a!=null)?a:false;this.opacity=mxConstants.HIGHLIGHT_OPACITY;this.repaintHandler=mxUtils.bind(this,function(){if(this.state!=null){var e=this.graph.view.getState(this.state.cell);if(e==null){this.hide()}else{this.state=e;this.repaint()}}});this.graph.getView().addListener(mxEvent.SCALE,this.repaintHandler);this.graph.getView().addListener(mxEvent.TRANSLATE,this.repaintHandler);this.graph.getView().addListener(mxEvent.SCALE_AND_TRANSLATE,this.repaintHandler);this.graph.getModel().addListener(mxEvent.CHANGE,this.repaintHandler);this.resetHandler=mxUtils.bind(this,function(){this.hide()});this.graph.getView().addListener(mxEvent.DOWN,this.resetHandler);this.graph.getView().addListener(mxEvent.UP,this.resetHandler)}}mxCellHighlight.prototype.keepOnTop=false;mxCellHighlight.prototype.graph=true;mxCellHighlight.prototype.state=null;mxCellHighlight.prototype.spacing=2;mxCellHighlight.prototype.resetHandler=null;mxCellHighlight.prototype.setHighlightColor=function(a){this.highlightColor=a;if(this.shape!=null){this.shape.stroke=a}};mxCellHighlight.prototype.drawHighlight=function(){this.shape=this.createShape();this.repaint();if(!this.keepOnTop&&this.shape.node.parentNode.firstChild!=this.shape.node){this.shape.node.parentNode.insertBefore(this.shape.node,this.shape.node.parentNode.firstChild)}};mxCellHighlight.prototype.createShape=function(){var a=this.graph.cellRenderer.createShape(this.state);a.svgStrokeTolerance=this.graph.tolerance;a.scale=this.state.view.scale;a.outline=true;a.points=this.state.absolutePoints;a.apply(this.state);a.strokewidth=this.strokeWidth/this.state.view.scale/this.state.view.scale;a.stroke=this.highlightColor;a.opacity=this.opacity;a.isDashed=this.dashed;a.isShadow=false;a.dialect=(this.graph.dialect!=mxConstants.DIALECT_SVG)?mxConstants.DIALECT_VML:mxConstants.DIALECT_SVG;a.init(this.graph.getView().getOverlayPane());mxEvent.redirectMouseEvents(a.node,this.graph,this.state);if(this.graph.dialect!=mxConstants.DIALECT_SVG){a.pointerEvents=false}else{a.svgPointerEvents="stroke"}return a};mxCellHighlight.prototype.repaint=function(){if(this.state!=null&&this.shape!=null){if(this.graph.model.isEdge(this.state.cell)){this.shape.points=this.state.absolutePoints}else{this.shape.bounds=new mxRectangle(this.state.x-this.spacing,this.state.y-this.spacing,this.state.width+2*this.spacing,this.state.height+2*this.spacing);this.shape.rotation=Number(this.state.style[mxConstants.STYLE_ROTATION]||"0")}if(this.state.shape!=null){this.shape.setCursor(this.state.shape.getCursor())}if(mxClient.IS_QUIRKS||document.documentMode==8){if(this.shape.stroke=="transparent"){this.shape.stroke="white";this.shape.opacity=1}else{this.shape.opacity=this.opacity}}this.shape.redraw()}};mxCellHighlight.prototype.hide=function(){this.highlight(null)};mxCellHighlight.prototype.highlight=function(a){if(this.state!=a){if(this.shape!=null){this.shape.destroy();this.shape=null}this.state=a;if(this.state!=null){this.drawHighlight()}}};mxCellHighlight.prototype.isHighlightAt=function(a,d){var c=false;if(this.shape!=null&&document.elementFromPoint!=null&&!mxClient.IS_QUIRKS){var b=document.elementFromPoint(a,d);while(b!=null){if(b==this.shape.node){c=true;break}b=b.parentNode}}return c};mxCellHighlight.prototype.destroy=function(){this.graph.getView().removeListener(this.resetHandler);this.graph.getView().removeListener(this.repaintHandler);this.graph.getModel().removeListener(this.repaintHandler);if(this.shape!=null){this.shape.destroy();this.shape=null}};