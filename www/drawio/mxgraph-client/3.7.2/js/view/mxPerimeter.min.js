var mxPerimeter={RectanglePerimeter:function(a,i,h,c){var f=a.getCenterX();var d=a.getCenterY();var n=h.x-f;var m=h.y-d;var e=Math.atan2(m,n);var b=new mxPoint(0,0);var g=Math.PI;var j=Math.PI/2;var k=j-e;var l=Math.atan2(a.height,a.width);if(e<-g+l||e>g-l){b.x=a.x;b.y=d-a.width*Math.tan(e)/2}else{if(e<-l){b.y=a.y;b.x=f-a.height*Math.tan(k)/2}else{if(e<l){b.x=a.x+a.width;b.y=d+a.width*Math.tan(e)/2}else{b.y=a.y+a.height;b.x=f+a.height*Math.tan(k)/2}}}if(c){if(h.x>=a.x&&h.x<=a.x+a.width){b.x=h.x}else{if(h.y>=a.y&&h.y<=a.y+a.height){b.y=h.y}}if(h.x<a.x){b.x=a.x}else{if(h.x>a.x+a.width){b.x=a.x+a.width}}if(h.y<a.y){b.y=a.y}else{if(h.y>a.y+a.height){b.y=a.y+a.height}}}return b},EllipsePerimeter:function(l,F,z,k){var r=l.x;var q=l.y;var L=l.width/2;var J=l.height/2;var i=r+L;var c=q+J;var v=z.x;var u=z.y;var t=parseInt(v-i);var s=parseInt(u-c);if(t==0&&s!=0){return new mxPoint(i,c+J*s/Math.abs(s))}else{if(t==0&&s==0){return new mxPoint(v,u)}}if(k){if(u>=q&&u<=q+l.height){var K=u-c;var M=Math.sqrt(L*L*(1-(K*K)/(J*J)))||0;if(v<=r){M=-M}return new mxPoint(i+M,u)}if(v>=r&&v<=r+l.width){var M=v-i;var K=Math.sqrt(J*J*(1-(M*M)/(L*L)))||0;if(u<=q){K=-K}return new mxPoint(v,c+K)}}var I=s/t;var D=c-I*i;var H=L*L*I*I+J*J;var G=-2*i*H;var E=L*L*I*I*i*i+J*J*i*i-L*L*J*J;var j=Math.sqrt(G*G-4*H*E);var B=(-G+j)/(2*H);var A=(-G-j)/(2*H);var n=I*B+D;var m=I*A+D;var p=Math.sqrt(Math.pow((B-v),2)+Math.pow((n-u),2));var o=Math.sqrt(Math.pow((A-v),2)+Math.pow((m-u),2));var w=0;var C=0;if(p<o){w=B;C=n}else{w=A;C=m}return new mxPoint(w,C)},RhombusPerimeter:function(a,j,g,b){var m=a.x;var k=a.y;var o=a.width;var i=a.height;var d=m+o/2;var c=k+i/2;var n=g.x;var l=g.y;if(d==n){if(c>l){return new mxPoint(d,k)}else{return new mxPoint(d,k+i)}}else{if(c==l){if(d>n){return new mxPoint(m,c)}else{return new mxPoint(m+o,c)}}}var f=d;var e=c;if(b){if(n>=m&&n<=m+o){f=n}else{if(l>=k&&l<=k+i){e=l}}}if(n<d){if(l<c){return mxUtils.intersection(n,l,f,e,d,k,m,c)}else{return mxUtils.intersection(n,l,f,e,d,k+i,m,c)}}else{if(l<c){return mxUtils.intersection(n,l,f,e,d,k,m+o,c)}else{return mxUtils.intersection(n,l,f,e,d,k+i,m+o,c)}}},TrianglePerimeter:function(j,z,s,f){var A=(z!=null)?z.style[mxConstants.STYLE_DIRECTION]:null;var a=A==mxConstants.DIRECTION_NORTH||A==mxConstants.DIRECTION_SOUTH;var m=j.x;var l=j.y;var p=j.width;var v=j.height;var c=m+p/2;var b=l+v/2;var g=new mxPoint(m,l);var k=new mxPoint(m+p,b);var d=new mxPoint(m,l+v);if(A==mxConstants.DIRECTION_NORTH){g=d;k=new mxPoint(c,l);d=new mxPoint(m+p,l+v)}else{if(A==mxConstants.DIRECTION_SOUTH){k=new mxPoint(c,l+v);d=new mxPoint(m+p,l)}else{if(A==mxConstants.DIRECTION_WEST){g=new mxPoint(m+p,l);k=new mxPoint(m,b);d=new mxPoint(m+p,l+v)}}}var q=s.x-c;var o=s.y-b;var e=(a)?Math.atan2(q,o):Math.atan2(o,q);var r=(a)?Math.atan2(p,v):Math.atan2(v,p);var i=false;if(A==mxConstants.DIRECTION_NORTH||A==mxConstants.DIRECTION_WEST){i=e>-r&&e<r}else{i=e<-Math.PI+r||e>Math.PI-r}var n=null;if(i){if(f&&((a&&s.x>=g.x&&s.x<=d.x)||(!a&&s.y>=g.y&&s.y<=d.y))){if(a){n=new mxPoint(s.x,g.y)}else{n=new mxPoint(g.x,s.y)}}else{if(A==mxConstants.DIRECTION_NORTH){n=new mxPoint(m+p/2+v*Math.tan(e)/2,l+v)}else{if(A==mxConstants.DIRECTION_SOUTH){n=new mxPoint(m+p/2-v*Math.tan(e)/2,l)}else{if(A==mxConstants.DIRECTION_WEST){n=new mxPoint(m+p,l+v/2+p*Math.tan(e)/2)}else{n=new mxPoint(m,l+v/2-p*Math.tan(e)/2)}}}}}else{if(f){var u=new mxPoint(c,b);if(s.y>=l&&s.y<=l+v){u.x=(a)?c:((A==mxConstants.DIRECTION_WEST)?m+p:m);u.y=s.y}else{if(s.x>=m&&s.x<=m+p){u.x=s.x;u.y=(!a)?b:((A==mxConstants.DIRECTION_NORTH)?l+v:l)}}q=s.x-u.x;o=s.y-u.y;c=u.x;b=u.y}if((a&&s.x<=m+p/2)||(!a&&s.y<=l+v/2)){n=mxUtils.intersection(s.x,s.y,c,b,g.x,g.y,k.x,k.y)}else{n=mxUtils.intersection(s.x,s.y,c,b,k.x,k.y,d.x,d.y)}}if(n==null){n=new mxPoint(c,b)}return n},HexagonPerimeter:function(i,u,s,g){var k=i.x;var j=i.y;var n=i.width;var t=i.height;var e=i.getCenterX();var d=i.getCenterY();var q=s.x;var p=s.y;var o=q-e;var m=p-d;var f=-Math.atan2(m,o);var z=Math.PI;var r=Math.PI/2;var l=new mxPoint(e,d);var C=(u!=null)?mxUtils.getValue(u.style,mxConstants.STYLE_DIRECTION,mxConstants.DIRECTION_EAST):mxConstants.DIRECTION_EAST;var c=C==mxConstants.DIRECTION_NORTH||C==mxConstants.DIRECTION_SOUTH;var E=new mxPoint();var B=new mxPoint();if((q<k)&&(p<j)||(q<k)&&(p>j+t)||(q>k+n)&&(p<j)||(q>k+n)&&(p>j+t)){g=false}if(g){if(c){if(q==e){if(p<=j){return new mxPoint(e,j)}else{if(p>=j+t){return new mxPoint(e,j+t)}}}else{if(q<k){if(p==j+t/4){return new mxPoint(k,j+t/4)}else{if(p==j+3*t/4){return new mxPoint(k,j+3*t/4)}}}else{if(q>k+n){if(p==j+t/4){return new mxPoint(k+n,j+t/4)}else{if(p==j+3*t/4){return new mxPoint(k+n,j+3*t/4)}}}else{if(q==k){if(p<d){return new mxPoint(k,j+t/4)}else{if(p>d){return new mxPoint(k,j+3*t/4)}}}else{if(q==k+n){if(p<d){return new mxPoint(k+n,j+t/4)}else{if(p>d){return new mxPoint(k+n,j+3*t/4)}}}}}}}if(p==j){return new mxPoint(e,j)}else{if(p==j+t){return new mxPoint(e,j+t)}}if(q<e){if((p>j+t/4)&&(p<j+3*t/4)){E=new mxPoint(k,j);B=new mxPoint(k,j+t)}else{if(p<j+t/4){E=new mxPoint(k-Math.floor(0.5*n),j+Math.floor(0.5*t));B=new mxPoint(k+n,j-Math.floor(0.25*t))}else{if(p>j+3*t/4){E=new mxPoint(k-Math.floor(0.5*n),j+Math.floor(0.5*t));B=new mxPoint(k+n,j+Math.floor(1.25*t))}}}}else{if(q>e){if((p>j+t/4)&&(p<j+3*t/4)){E=new mxPoint(k+n,j);B=new mxPoint(k+n,j+t)}else{if(p<j+t/4){E=new mxPoint(k,j-Math.floor(0.25*t));B=new mxPoint(k+Math.floor(1.5*n),j+Math.floor(0.5*t))}else{if(p>j+3*t/4){E=new mxPoint(k+Math.floor(1.5*n),j+Math.floor(0.5*t));B=new mxPoint(k,j+Math.floor(1.25*t))}}}}}}else{if(p==d){if(q<=k){return new mxPoint(k,j+t/2)}else{if(q>=k+n){return new mxPoint(k+n,j+t/2)}}}else{if(p<j){if(q==k+n/4){return new mxPoint(k+n/4,j)}else{if(q==k+3*n/4){return new mxPoint(k+3*n/4,j)}}}else{if(p>j+t){if(q==k+n/4){return new mxPoint(k+n/4,j+t)}else{if(q==k+3*n/4){return new mxPoint(k+3*n/4,j+t)}}}else{if(p==j){if(q<e){return new mxPoint(k+n/4,j)}else{if(q>e){return new mxPoint(k+3*n/4,j)}}}else{if(p==j+t){if(q<e){return new mxPoint(k+n/4,j+t)}else{if(p>d){return new mxPoint(k+3*n/4,j+t)}}}}}}}if(q==k){return new mxPoint(k,d)}else{if(q==k+n){return new mxPoint(k+n,d)}}if(p<d){if((q>k+n/4)&&(q<k+3*n/4)){E=new mxPoint(k,j);B=new mxPoint(k+n,j)}else{if(q<k+n/4){E=new mxPoint(k-Math.floor(0.25*n),j+t);B=new mxPoint(k+Math.floor(0.5*n),j-Math.floor(0.5*t))}else{if(q>k+3*n/4){E=new mxPoint(k+Math.floor(0.5*n),j-Math.floor(0.5*t));B=new mxPoint(k+Math.floor(1.25*n),j+t)}}}}else{if(p>d){if((q>k+n/4)&&(q<k+3*n/4)){E=new mxPoint(k,j+t);B=new mxPoint(k+n,j+t)}else{if(q<k+n/4){E=new mxPoint(k-Math.floor(0.25*n),j);B=new mxPoint(k+Math.floor(0.5*n),j+Math.floor(1.5*t))}else{if(q>k+3*n/4){E=new mxPoint(k+Math.floor(0.5*n),j+Math.floor(1.5*t));B=new mxPoint(k+Math.floor(1.25*n),j)}}}}}}var D=e;var A=d;if(q>=k&&q<=k+n){D=q;if(p<d){A=j+t}else{A=j}}else{if(p>=j&&p<=j+t){A=p;if(q<e){D=k+n}else{D=k}}}l=mxUtils.intersection(D,A,s.x,s.y,E.x,E.y,B.x,B.y)}else{if(c){var v=Math.atan2(t/4,n/2);if(f==v){return new mxPoint(k+n,j+Math.floor(0.25*t))}else{if(f==r){return new mxPoint(k+Math.floor(0.5*n),j)}else{if(f==(z-v)){return new mxPoint(k,j+Math.floor(0.25*t))}else{if(f==-v){return new mxPoint(k+n,j+Math.floor(0.75*t))}else{if(f==(-r)){return new mxPoint(k+Math.floor(0.5*n),j+t)}else{if(f==(-z+v)){return new mxPoint(k,j+Math.floor(0.75*t))}}}}}}if((f<v)&&(f>-v)){E=new mxPoint(k+n,j);B=new mxPoint(k+n,j+t)}else{if((f>v)&&(f<r)){E=new mxPoint(k,j-Math.floor(0.25*t));B=new mxPoint(k+Math.floor(1.5*n),j+Math.floor(0.5*t))}else{if((f>r)&&(f<(z-v))){E=new mxPoint(k-Math.floor(0.5*n),j+Math.floor(0.5*t));B=new mxPoint(k+n,j-Math.floor(0.25*t))}else{if(((f>(z-v))&&(f<=z))||((f<(-z+v))&&(f>=-z))){E=new mxPoint(k,j);B=new mxPoint(k,j+t)}else{if((f<-v)&&(f>-r)){E=new mxPoint(k+Math.floor(1.5*n),j+Math.floor(0.5*t));B=new mxPoint(k,j+Math.floor(1.25*t))}else{if((f<-r)&&(f>(-z+v))){E=new mxPoint(k-Math.floor(0.5*n),j+Math.floor(0.5*t));B=new mxPoint(k+n,j+Math.floor(1.25*t))}}}}}}}else{var v=Math.atan2(t/2,n/4);if(f==v){return new mxPoint(k+Math.floor(0.75*n),j)}else{if(f==(z-v)){return new mxPoint(k+Math.floor(0.25*n),j)}else{if((f==z)||(f==-z)){return new mxPoint(k,j+Math.floor(0.5*t))}else{if(f==0){return new mxPoint(k+n,j+Math.floor(0.5*t))}else{if(f==-v){return new mxPoint(k+Math.floor(0.75*n),j+t)}else{if(f==(-z+v)){return new mxPoint(k+Math.floor(0.25*n),j+t)}}}}}}if((f>0)&&(f<v)){E=new mxPoint(k+Math.floor(0.5*n),j-Math.floor(0.5*t));B=new mxPoint(k+Math.floor(1.25*n),j+t)}else{if((f>v)&&(f<(z-v))){E=new mxPoint(k,j);B=new mxPoint(k+n,j)}else{if((f>(z-v))&&(f<z)){E=new mxPoint(k-Math.floor(0.25*n),j+t);B=new mxPoint(k+Math.floor(0.5*n),j-Math.floor(0.5*t))}else{if((f<0)&&(f>-v)){E=new mxPoint(k+Math.floor(0.5*n),j+Math.floor(1.5*t));B=new mxPoint(k+Math.floor(1.25*n),j)}else{if((f<-v)&&(f>(-z+v))){E=new mxPoint(k,j+t);B=new mxPoint(k+n,j+t)}else{if((f<(-z+v))&&(f>-z)){E=new mxPoint(k-Math.floor(0.25*n),j);B=new mxPoint(k+Math.floor(0.5*n),j+Math.floor(1.5*t))}}}}}}}l=mxUtils.intersection(e,d,s.x,s.y,E.x,E.y,B.x,B.y)}if(l==null){return new mxPoint(e,d)}return l}};