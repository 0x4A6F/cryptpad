function mxSwimlaneManager(d,b,c,a){this.horizontal=(b!=null)?b:true;this.addEnabled=(c!=null)?c:true;this.resizeEnabled=(a!=null)?a:true;this.addHandler=mxUtils.bind(this,function(f,e){if(this.isEnabled()&&this.isAddEnabled()){this.cellsAdded(e.getProperty("cells"))}});this.resizeHandler=mxUtils.bind(this,function(f,e){if(this.isEnabled()&&this.isResizeEnabled()){this.cellsResized(e.getProperty("cells"))}});this.setGraph(d)}mxSwimlaneManager.prototype=new mxEventSource();mxSwimlaneManager.prototype.constructor=mxSwimlaneManager;mxSwimlaneManager.prototype.graph=null;mxSwimlaneManager.prototype.enabled=true;mxSwimlaneManager.prototype.horizontal=true;mxSwimlaneManager.prototype.addEnabled=true;mxSwimlaneManager.prototype.resizeEnabled=true;mxSwimlaneManager.prototype.addHandler=null;mxSwimlaneManager.prototype.resizeHandler=null;mxSwimlaneManager.prototype.isEnabled=function(){return this.enabled};mxSwimlaneManager.prototype.setEnabled=function(a){this.enabled=a};mxSwimlaneManager.prototype.isHorizontal=function(){return this.horizontal};mxSwimlaneManager.prototype.setHorizontal=function(a){this.horizontal=a};mxSwimlaneManager.prototype.isAddEnabled=function(){return this.addEnabled};mxSwimlaneManager.prototype.setAddEnabled=function(a){this.addEnabled=a};mxSwimlaneManager.prototype.isResizeEnabled=function(){return this.resizeEnabled};mxSwimlaneManager.prototype.setResizeEnabled=function(a){this.resizeEnabled=a};mxSwimlaneManager.prototype.getGraph=function(){return this.graph};mxSwimlaneManager.prototype.setGraph=function(a){if(this.graph!=null){this.graph.removeListener(this.addHandler);this.graph.removeListener(this.resizeHandler)}this.graph=a;if(this.graph!=null){this.graph.addListener(mxEvent.ADD_CELLS,this.addHandler);this.graph.addListener(mxEvent.CELLS_RESIZED,this.resizeHandler)}};mxSwimlaneManager.prototype.isSwimlaneIgnored=function(a){return !this.getGraph().isSwimlane(a)};mxSwimlaneManager.prototype.isCellHorizontal=function(a){if(this.graph.isSwimlane(a)){var b=this.graph.getCellStyle(a);return mxUtils.getValue(b,mxConstants.STYLE_HORIZONTAL,1)==1}return !this.isHorizontal()};mxSwimlaneManager.prototype.cellsAdded=function(b){if(b!=null){var a=this.getGraph().getModel();a.beginUpdate();try{for(var c=0;c<b.length;c++){if(!this.isSwimlaneIgnored(b[c])){this.swimlaneAdded(b[c])}}}finally{a.endUpdate()}}};mxSwimlaneManager.prototype.swimlaneAdded=function(f){var c=this.getGraph().getModel();var e=c.getParent(f);var b=c.getChildCount(e);var g=null;for(var d=0;d<b;d++){var h=c.getChildAt(e,d);if(h!=f&&!this.isSwimlaneIgnored(h)){g=c.getGeometry(h);if(g!=null){break}}}if(g!=null){var a=(e!=null)?this.isCellHorizontal(e):this.horizontal;this.resizeSwimlane(f,g.width,g.height,a)}};mxSwimlaneManager.prototype.cellsResized=function(h){if(h!=null){var e=this.getGraph().getModel();e.beginUpdate();try{for(var c=0;c<h.length;c++){if(!this.isSwimlaneIgnored(h[c])){var b=e.getGeometry(h[c]);if(b!=null){var j=new mxRectangle(0,0,b.width,b.height);var g=h[c];var f=g;while(f!=null){g=f;f=e.getParent(f);var d=(this.graph.isSwimlane(f))?this.graph.getStartSize(f):new mxRectangle();j.width+=d.width;j.height+=d.height}var a=(f!=null)?this.isCellHorizontal(f):this.horizontal;this.resizeSwimlane(g,j.width,j.height,a)}}}}finally{e.endUpdate()}}};mxSwimlaneManager.prototype.resizeSwimlane=function(l,m,j,a){var k=this.getGraph().getModel();k.beginUpdate();try{var b=this.isCellHorizontal(l);if(!this.isSwimlaneIgnored(l)){var f=k.getGeometry(l);if(f!=null){if((a&&f.height!=j)||(!a&&f.width!=m)){f=f.clone();if(a){f.height=j}else{f.width=m}k.setGeometry(l,f)}}}var g=(this.graph.isSwimlane(l))?this.graph.getStartSize(l):new mxRectangle();m-=g.width;j-=g.height;var d=k.getChildCount(l);for(var e=0;e<d;e++){var c=k.getChildAt(l,e);this.resizeSwimlane(c,m,j,b)}}finally{k.endUpdate()}};mxSwimlaneManager.prototype.destroy=function(){this.setGraph(null)};