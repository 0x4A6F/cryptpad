function mxGraphSelectionModel(a){this.graph=a;this.cells=[]}mxGraphSelectionModel.prototype=new mxEventSource();mxGraphSelectionModel.prototype.constructor=mxGraphSelectionModel;mxGraphSelectionModel.prototype.doneResource=(mxClient.language!="none")?"done":"";mxGraphSelectionModel.prototype.updatingSelectionResource=(mxClient.language!="none")?"updatingSelection":"";mxGraphSelectionModel.prototype.graph=null;mxGraphSelectionModel.prototype.singleSelection=false;mxGraphSelectionModel.prototype.isSingleSelection=function(){return this.singleSelection};mxGraphSelectionModel.prototype.setSingleSelection=function(a){this.singleSelection=a};mxGraphSelectionModel.prototype.isSelected=function(a){if(a!=null){return mxUtils.indexOf(this.cells,a)>=0}return false};mxGraphSelectionModel.prototype.isEmpty=function(){return this.cells.length==0};mxGraphSelectionModel.prototype.clear=function(){this.changeSelection(null,this.cells)};mxGraphSelectionModel.prototype.setCell=function(a){if(a!=null){this.setCells([a])}};mxGraphSelectionModel.prototype.setCells=function(a){if(a!=null){if(this.singleSelection){a=[this.getFirstSelectableCell(a)]}var c=[];for(var b=0;b<a.length;b++){if(this.graph.isCellSelectable(a[b])){c.push(a[b])}}this.changeSelection(c,this.cells)}};mxGraphSelectionModel.prototype.getFirstSelectableCell=function(a){if(a!=null){for(var b=0;b<a.length;b++){if(this.graph.isCellSelectable(a[b])){return a[b]}}}return null};mxGraphSelectionModel.prototype.addCell=function(a){if(a!=null){this.addCells([a])}};mxGraphSelectionModel.prototype.addCells=function(b){if(b!=null){var a=null;if(this.singleSelection){a=this.cells;b=[this.getFirstSelectableCell(b)]}var d=[];for(var c=0;c<b.length;c++){if(!this.isSelected(b[c])&&this.graph.isCellSelectable(b[c])){d.push(b[c])}}this.changeSelection(d,a)}};mxGraphSelectionModel.prototype.removeCell=function(a){if(a!=null){this.removeCells([a])}};mxGraphSelectionModel.prototype.removeCells=function(a){if(a!=null){var c=[];for(var b=0;b<a.length;b++){if(this.isSelected(a[b])){c.push(a[b])}}this.changeSelection(null,c)}};mxGraphSelectionModel.prototype.changeSelection=function(a,c){if((a!=null&&a.length>0&&a[0]!=null)||(c!=null&&c.length>0&&c[0]!=null)){var d=new mxSelectionChange(this,a,c);d.execute();var b=new mxUndoableEdit(this,false);b.add(d);this.fireEvent(new mxEventObject(mxEvent.UNDO,"edit",b))}};mxGraphSelectionModel.prototype.cellAdded=function(a){if(a!=null&&!this.isSelected(a)){this.cells.push(a)}};mxGraphSelectionModel.prototype.cellRemoved=function(a){if(a!=null){var b=mxUtils.indexOf(this.cells,a);if(b>=0){this.cells.splice(b,1)}}};function mxSelectionChange(a,b,c){this.selectionModel=a;this.added=(b!=null)?b.slice():null;this.removed=(c!=null)?c.slice():null}mxSelectionChange.prototype.execute=function(){var c=mxLog.enter("mxSelectionChange.execute");window.status=mxResources.get(this.selectionModel.updatingSelectionResource)||this.selectionModel.updatingSelectionResource;if(this.removed!=null){for(var b=0;b<this.removed.length;b++){this.selectionModel.cellRemoved(this.removed[b])}}if(this.added!=null){for(var b=0;b<this.added.length;b++){this.selectionModel.cellAdded(this.added[b])}}var a=this.added;this.added=this.removed;this.removed=a;window.status=mxResources.get(this.selectionModel.doneResource)||this.selectionModel.doneResource;mxLog.leave("mxSelectionChange.execute",c);this.selectionModel.fireEvent(new mxEventObject(mxEvent.CHANGE,"added",this.added,"removed",this.removed))};