function mxCellRenderer(){}mxCellRenderer.prototype.defaultEdgeShape=mxConnector;mxCellRenderer.prototype.defaultVertexShape=mxRectangleShape;mxCellRenderer.prototype.defaultTextShape=mxText;mxCellRenderer.prototype.legacyControlPosition=true;mxCellRenderer.prototype.legacySpacing=true;mxCellRenderer.prototype.defaultShapes=new Object();mxCellRenderer.prototype.antiAlias=true;mxCellRenderer.prototype.forceControlClickHandler=false;mxCellRenderer.registerShape=function(b,a){mxCellRenderer.prototype.defaultShapes[b]=a};mxCellRenderer.registerShape(mxConstants.SHAPE_RECTANGLE,mxRectangleShape);mxCellRenderer.registerShape(mxConstants.SHAPE_ELLIPSE,mxEllipse);mxCellRenderer.registerShape(mxConstants.SHAPE_RHOMBUS,mxRhombus);mxCellRenderer.registerShape(mxConstants.SHAPE_CYLINDER,mxCylinder);mxCellRenderer.registerShape(mxConstants.SHAPE_CONNECTOR,mxConnector);mxCellRenderer.registerShape(mxConstants.SHAPE_ACTOR,mxActor);mxCellRenderer.registerShape(mxConstants.SHAPE_TRIANGLE,mxTriangle);mxCellRenderer.registerShape(mxConstants.SHAPE_HEXAGON,mxHexagon);mxCellRenderer.registerShape(mxConstants.SHAPE_CLOUD,mxCloud);mxCellRenderer.registerShape(mxConstants.SHAPE_LINE,mxLine);mxCellRenderer.registerShape(mxConstants.SHAPE_ARROW,mxArrow);mxCellRenderer.registerShape(mxConstants.SHAPE_ARROW_CONNECTOR,mxArrowConnector);mxCellRenderer.registerShape(mxConstants.SHAPE_DOUBLE_ELLIPSE,mxDoubleEllipse);mxCellRenderer.registerShape(mxConstants.SHAPE_SWIMLANE,mxSwimlane);mxCellRenderer.registerShape(mxConstants.SHAPE_IMAGE,mxImageShape);mxCellRenderer.registerShape(mxConstants.SHAPE_LABEL,mxLabel);mxCellRenderer.prototype.initializeShape=function(a){a.shape.dialect=a.view.graph.dialect;this.configureShape(a);a.shape.init(a.view.getDrawPane())};mxCellRenderer.prototype.createShape=function(d){var a=null;if(d.style!=null){var c=mxStencilRegistry.getStencil(d.style[mxConstants.STYLE_SHAPE]);if(c!=null){a=new mxShape(c)}else{var b=this.getShapeConstructor(d);a=new b()}}return a};mxCellRenderer.prototype.createIndicatorShape=function(a){a.shape.indicatorShape=this.getShape(a.view.graph.getIndicatorShape(a))};mxCellRenderer.prototype.getShape=function(a){return(a!=null)?mxCellRenderer.prototype.defaultShapes[a]:null};mxCellRenderer.prototype.getShapeConstructor=function(b){var a=this.getShape(b.style[mxConstants.STYLE_SHAPE]);if(a==null){a=(b.view.graph.getModel().isEdge(b.cell))?this.defaultEdgeShape:this.defaultVertexShape}return a};mxCellRenderer.prototype.configureShape=function(a){a.shape.apply(a);a.shape.image=a.view.graph.getImage(a);a.shape.indicatorColor=a.view.graph.getIndicatorColor(a);a.shape.indicatorStrokeColor=a.style[mxConstants.STYLE_INDICATOR_STROKECOLOR];a.shape.indicatorGradientColor=a.view.graph.getIndicatorGradientColor(a);a.shape.indicatorDirection=a.style[mxConstants.STYLE_INDICATOR_DIRECTION];a.shape.indicatorImage=a.view.graph.getIndicatorImage(a);this.postConfigureShape(a)};mxCellRenderer.prototype.postConfigureShape=function(a){if(a.shape!=null){this.resolveColor(a,"indicatorColor",mxConstants.STYLE_FILLCOLOR);this.resolveColor(a,"indicatorGradientColor",mxConstants.STYLE_GRADIENTCOLOR);this.resolveColor(a,"fill",mxConstants.STYLE_FILLCOLOR);this.resolveColor(a,"stroke",mxConstants.STYLE_STROKECOLOR);this.resolveColor(a,"gradient",mxConstants.STYLE_GRADIENTCOLOR)}};mxCellRenderer.prototype.resolveColor=function(e,g,a){var d=e.shape[g];var c=e.view.graph;var f=null;if(d=="inherit"){f=c.model.getParent(e.cell)}else{if(d=="swimlane"){if(c.model.getTerminal(e.cell,false)!=null){f=c.model.getTerminal(e.cell,false)}else{f=e.cell}f=c.getSwimlane(f);a=c.swimlaneIndicatorColorAttribute}else{if(d=="indicated"){e.shape[g]=e.shape.indicatorColor}}}if(f!=null){var b=c.getView().getState(f);e.shape[g]=null;if(b!=null){if(b.shape!=null&&g!="indicatorColor"){e.shape[g]=b.shape[g]}else{e.shape[g]=b.style[a]}}}};mxCellRenderer.prototype.getLabelValue=function(a){return a.view.graph.getLabel(a.cell)};mxCellRenderer.prototype.createLabel=function(e,d){var c=e.view.graph;var b=c.getModel().isEdge(e.cell);if(e.style[mxConstants.STYLE_FONTSIZE]>0||e.style[mxConstants.STYLE_FONTSIZE]==null){var f=(c.isHtmlLabel(e.cell)||(d!=null&&mxUtils.isNode(d)));e.text=new this.defaultTextShape(d,new mxRectangle(),(e.style[mxConstants.STYLE_ALIGN]||mxConstants.ALIGN_CENTER),c.getVerticalAlign(e),e.style[mxConstants.STYLE_FONTCOLOR],e.style[mxConstants.STYLE_FONTFAMILY],e.style[mxConstants.STYLE_FONTSIZE],e.style[mxConstants.STYLE_FONTSTYLE],e.style[mxConstants.STYLE_SPACING],e.style[mxConstants.STYLE_SPACING_TOP],e.style[mxConstants.STYLE_SPACING_RIGHT],e.style[mxConstants.STYLE_SPACING_BOTTOM],e.style[mxConstants.STYLE_SPACING_LEFT],e.style[mxConstants.STYLE_HORIZONTAL],e.style[mxConstants.STYLE_LABEL_BACKGROUNDCOLOR],e.style[mxConstants.STYLE_LABEL_BORDERCOLOR],c.isWrapping(e.cell)&&c.isHtmlLabel(e.cell),c.isLabelClipped(e.cell),e.style[mxConstants.STYLE_OVERFLOW],e.style[mxConstants.STYLE_LABEL_PADDING],mxUtils.getValue(e.style,mxConstants.STYLE_TEXT_DIRECTION,mxConstants.DEFAULT_TEXT_DIRECTION));e.text.opacity=mxUtils.getValue(e.style,mxConstants.STYLE_TEXT_OPACITY,100);e.text.dialect=(f)?mxConstants.DIALECT_STRICTHTML:e.view.graph.dialect;e.text.style=e.style;e.text.state=e;this.initializeLabel(e,e.text);var g=false;var a=function(j){var i=e;if(mxClient.IS_TOUCH||g){var h=mxEvent.getClientX(j);var l=mxEvent.getClientY(j);var k=mxUtils.convertPoint(c.container,h,l);i=c.view.getState(c.getCellAt(k.x,k.y))}return i};mxEvent.addGestureListeners(e.text.node,mxUtils.bind(this,function(h){if(this.isLabelEvent(e,h)){c.fireMouseEvent(mxEvent.MOUSE_DOWN,new mxMouseEvent(h,e));g=c.dialect!=mxConstants.DIALECT_SVG&&mxEvent.getSource(h).nodeName=="IMG"}}),mxUtils.bind(this,function(h){if(this.isLabelEvent(e,h)){c.fireMouseEvent(mxEvent.MOUSE_MOVE,new mxMouseEvent(h,a(h)))}}),mxUtils.bind(this,function(h){if(this.isLabelEvent(e,h)){c.fireMouseEvent(mxEvent.MOUSE_UP,new mxMouseEvent(h,a(h)));g=false}}));if(c.nativeDblClickEnabled){mxEvent.addListener(e.text.node,"dblclick",mxUtils.bind(this,function(h){if(this.isLabelEvent(e,h)){c.dblClick(h,e.cell);mxEvent.consume(h)}}))}}};mxCellRenderer.prototype.initializeLabel=function(b,a){if(mxClient.IS_SVG&&mxClient.NO_FO&&a.dialect!=mxConstants.DIALECT_SVG){a.init(b.view.graph.container)}else{a.init(b.view.getDrawPane())}};mxCellRenderer.prototype.createCellOverlays=function(f){var e=f.view.graph;var d=e.getCellOverlays(f.cell);var g=null;if(d!=null){g=new mxDictionary();for(var c=0;c<d.length;c++){var a=(f.overlays!=null)?f.overlays.remove(d[c]):null;if(a==null){var b=new mxImageShape(new mxRectangle(),d[c].image.src);b.dialect=f.view.graph.dialect;b.preserveImageAspect=false;b.overlay=d[c];this.initializeOverlay(f,b);this.installCellOverlayListeners(f,d[c],b);if(d[c].cursor!=null){b.node.style.cursor=d[c].cursor}g.put(d[c],b)}else{g.put(d[c],a)}}}if(f.overlays!=null){f.overlays.visit(function(i,h){h.destroy()})}f.overlays=g};mxCellRenderer.prototype.initializeOverlay=function(b,a){a.init(b.view.getOverlayPane())};mxCellRenderer.prototype.installCellOverlayListeners=function(d,b,a){var c=d.view.graph;mxEvent.addListener(a.node,"click",function(e){if(c.isEditing()){c.stopEditing(!c.isInvokesStopCellEditing())}b.fireEvent(new mxEventObject(mxEvent.CLICK,"event",e,"cell",d.cell))});mxEvent.addGestureListeners(a.node,function(e){mxEvent.consume(e)},function(e){c.fireMouseEvent(mxEvent.MOUSE_MOVE,new mxMouseEvent(e,d))});if(mxClient.IS_TOUCH){mxEvent.addListener(a.node,"touchend",function(e){b.fireEvent(new mxEventObject(mxEvent.CLICK,"event",e,"cell",d.cell))})}};mxCellRenderer.prototype.createControl=function(d){var c=d.view.graph;var e=c.getFoldingImage(d);if(c.foldingEnabled&&e!=null){if(d.control==null){var a=new mxRectangle(0,0,e.width,e.height);d.control=new mxImageShape(a,e.src);d.control.preserveImageAspect=false;d.control.dialect=c.dialect;this.initControl(d,d.control,true,this.createControlClickHandler(d))}}else{if(d.control!=null){d.control.destroy();d.control=null}}};mxCellRenderer.prototype.createControlClickHandler=function(b){var a=b.view.graph;return mxUtils.bind(this,function(c){if(this.forceControlClickHandler||a.isEnabled()){var d=!a.isCellCollapsed(b.cell);a.foldCells(d,false,[b.cell],null,c);mxEvent.consume(c)}})};mxCellRenderer.prototype.initControl=function(c,e,d,h){var b=c.view.graph;var g=b.isHtmlLabel(c.cell)&&mxClient.NO_FO&&b.dialect==mxConstants.DIALECT_SVG;if(g){e.dialect=mxConstants.DIALECT_PREFERHTML;e.init(b.container);e.node.style.zIndex=1}else{e.init(c.view.getOverlayPane())}var a=e.innerNode||e.node;if(h!=null&&!mxClient.IS_IOS){if(b.isEnabled()){a.style.cursor="pointer"}mxEvent.addListener(a,"click",h)}if(d){var f=null;mxEvent.addGestureListeners(a,function(i){f=new mxPoint(mxEvent.getClientX(i),mxEvent.getClientY(i));b.fireMouseEvent(mxEvent.MOUSE_DOWN,new mxMouseEvent(i,c));mxEvent.consume(i)},function(i){b.fireMouseEvent(mxEvent.MOUSE_MOVE,new mxMouseEvent(i,c))},function(i){b.fireMouseEvent(mxEvent.MOUSE_UP,new mxMouseEvent(i,c));mxEvent.consume(i)});if(h!=null&&mxClient.IS_IOS){a.addEventListener("touchend",function(j){if(f!=null){var i=b.tolerance;if(Math.abs(f.x-mxEvent.getClientX(j))<i&&Math.abs(f.y-mxEvent.getClientY(j))<i){h.call(h,j);mxEvent.consume(j)}}},true)}}return a};mxCellRenderer.prototype.isShapeEvent=function(b,a){return true};mxCellRenderer.prototype.isLabelEvent=function(b,a){return true};mxCellRenderer.prototype.installListeners=function(c){var b=c.view.graph;var a=function(f){var e=c;if((b.dialect!=mxConstants.DIALECT_SVG&&mxEvent.getSource(f).nodeName=="IMG")||mxClient.IS_TOUCH){var d=mxEvent.getClientX(f);var h=mxEvent.getClientY(f);var g=mxUtils.convertPoint(b.container,d,h);e=b.view.getState(b.getCellAt(g.x,g.y))}return e};mxEvent.addGestureListeners(c.shape.node,mxUtils.bind(this,function(d){if(this.isShapeEvent(c,d)){b.fireMouseEvent(mxEvent.MOUSE_DOWN,new mxMouseEvent(d,c))}}),mxUtils.bind(this,function(d){if(this.isShapeEvent(c,d)){b.fireMouseEvent(mxEvent.MOUSE_MOVE,new mxMouseEvent(d,a(d)))}}),mxUtils.bind(this,function(d){if(this.isShapeEvent(c,d)){b.fireMouseEvent(mxEvent.MOUSE_UP,new mxMouseEvent(d,a(d)))}}));if(b.nativeDblClickEnabled){mxEvent.addListener(c.shape.node,"dblclick",mxUtils.bind(this,function(d){if(this.isShapeEvent(c,d)){b.dblClick(d,c.cell);mxEvent.consume(d)}}))}};mxCellRenderer.prototype.redrawLabel=function(b,k){var i=this.getLabelValue(b);if(b.text==null&&i!=null&&(mxUtils.isNode(i)||i.length>0)){this.createLabel(b,i)}else{if(b.text!=null&&(i==null||i.length==0)){b.text.destroy();b.text=null}}if(b.text!=null){var j=b.view.graph;if(k){if(b.text.lastValue!=null&&this.isTextShapeInvalid(b,b.text)){b.text.lastValue=null}b.text.resetStyles();b.text.apply(b);b.text.valign=j.getVerticalAlign(b)}var a=this.getLabelBounds(b);var h=j.isWrapping(b.cell);var d=j.isLabelClipped(b.cell);var g=(b.view.graph.isHtmlLabel(b.cell)||(i!=null&&mxUtils.isNode(i)));var e=(g)?mxConstants.DIALECT_STRICTHTML:b.view.graph.dialect;var f=b.style[mxConstants.STYLE_OVERFLOW]||"visible";if(k||b.text.value!=i||b.text.isWrapping!=h||b.text.overflow!=f||b.text.isClipping!=d||b.text.scale!=this.getTextScale(b)||b.text.dialect!=e||!b.text.bounds.equals(a)){b.text.dialect=e;b.text.value=i;b.text.bounds=a;b.text.scale=this.getTextScale(b);b.text.wrap=h;b.text.clipped=d;b.text.overflow=f;var c=b.text.node.style.visibility;this.redrawLabelShape(b.text);b.text.node.style.visibility=c}}};mxCellRenderer.prototype.isTextShapeInvalid=function(c,b){function a(f,e,d){return b[f]!=(c.style[e]||d)}return a("fontStyle",mxConstants.STYLE_FONTSTYLE,mxConstants.DEFAULT_FONTSTYLE)||a("family",mxConstants.STYLE_FONTFAMILY,mxConstants.DEFAULT_FONTFAMILY)||a("size",mxConstants.STYLE_FONTSIZE,mxConstants.DEFAULT_FONTSIZE)||a("color",mxConstants.STYLE_FONTCOLOR,"black")||a("align",mxConstants.STYLE_ALIGN,"")||a("valign",mxConstants.STYLE_VERTICAL_ALIGN,"")||a("spacing",mxConstants.STYLE_SPACING,2)||a("spacingTop",mxConstants.STYLE_SPACING_TOP,2)||a("spacingRight",mxConstants.STYLE_SPACING_RIGHT,2)||a("spacingBottom",mxConstants.STYLE_SPACING_BOTTOM,2)||a("spacingLeft",mxConstants.STYLE_SPACING_LEFT,2)||a("horizontal",mxConstants.STYLE_HORIZONTAL,true)||a("background",mxConstants.STYLE_LABEL_BACKGROUNDCOLOR)||a("border",mxConstants.STYLE_LABEL_BORDERCOLOR)||a("opacity",mxConstants.STYLE_TEXT_OPACITY,100)||a("textDirection",mxConstants.STYLE_TEXT_DIRECTION,mxConstants.DEFAULT_TEXT_DIRECTION)};mxCellRenderer.prototype.redrawLabelShape=function(a){a.redraw()};mxCellRenderer.prototype.getTextScale=function(a){return a.view.scale};mxCellRenderer.prototype.getLabelBounds=function(b){var l=b.view.graph;var d=b.view.scale;var k=l.getModel().isEdge(b.cell);var a=new mxRectangle(b.absoluteOffset.x,b.absoluteOffset.y);if(k){var j=b.text.getSpacing();a.x+=j.x*d;a.y+=j.y*d;var e=l.getCellGeometry(b.cell);if(e!=null){a.width=Math.max(0,e.width*d);a.height=Math.max(0,e.height*d)}}else{if(b.text.isPaintBoundsInverted()){var f=a.x;a.x=a.y;a.y=f}a.x+=b.x;a.y+=b.y;a.width=Math.max(1,b.width);a.height=Math.max(1,b.height);var i=mxUtils.getValue(b.style,mxConstants.STYLE_STROKECOLOR,mxConstants.NONE);if(i!=mxConstants.NONE&&i!=""){var p=parseFloat(mxUtils.getValue(b.style,mxConstants.STYLE_STROKEWIDTH,1))*d;var o=1+Math.floor((p-1)/2);var h=Math.floor(p+1);a.x+=o;a.y+=o;a.width-=h;a.height-=h}}if(b.text.isPaintBoundsInverted()){var n=(b.width-b.height)/2;a.x+=n;a.y-=n;var f=a.width;a.width=a.height;a.height=f}if(b.shape!=null){var g=mxUtils.getValue(b.style,mxConstants.STYLE_LABEL_POSITION,mxConstants.ALIGN_CENTER);var m=mxUtils.getValue(b.style,mxConstants.STYLE_VERTICAL_LABEL_POSITION,mxConstants.ALIGN_MIDDLE);if(g==mxConstants.ALIGN_CENTER&&m==mxConstants.ALIGN_MIDDLE){a=b.shape.getLabelBounds(a)}}var c=mxUtils.getValue(b.style,mxConstants.STYLE_LABEL_WIDTH,null);if(c!=null){a.width=parseFloat(c)*d}if(!k){this.rotateLabelBounds(b,a)}return a};mxCellRenderer.prototype.rotateLabelBounds=function(b,a){a.y-=b.text.margin.y*a.height;a.x-=b.text.margin.x*a.width;if(!this.legacySpacing||(b.style[mxConstants.STYLE_OVERFLOW]!="fill"&&b.style[mxConstants.STYLE_OVERFLOW]!="width")){var k=b.view.scale;var i=b.text.getSpacing();a.x+=i.x*k;a.y+=i.y*k;var g=mxUtils.getValue(b.style,mxConstants.STYLE_LABEL_POSITION,mxConstants.ALIGN_CENTER);var j=mxUtils.getValue(b.style,mxConstants.STYLE_VERTICAL_LABEL_POSITION,mxConstants.ALIGN_MIDDLE);var d=mxUtils.getValue(b.style,mxConstants.STYLE_LABEL_WIDTH,null);a.width=Math.max(0,a.width-((g==mxConstants.ALIGN_CENTER&&d==null)?(b.text.spacingLeft*k+b.text.spacingRight*k):0));a.height=Math.max(0,a.height-((j==mxConstants.ALIGN_MIDDLE)?(b.text.spacingTop*k+b.text.spacingBottom*k):0))}var c=b.text.getTextRotation();if(c!=0&&b!=null&&b.view.graph.model.isVertex(b.cell)){var f=b.getCenterX();var e=b.getCenterY();if(a.x!=f||a.y!=e){var h=c*(Math.PI/180);pt=mxUtils.getRotatedPoint(new mxPoint(a.x,a.y),Math.cos(h),Math.sin(h),new mxPoint(f,e));a.x=pt.x;a.y=pt.y}}};mxCellRenderer.prototype.redrawCellOverlays=function(f,d){this.createCellOverlays(f);if(f.overlays!=null){var b=mxUtils.mod(mxUtils.getValue(f.style,mxConstants.STYLE_ROTATION,0),90);var a=mxUtils.toRadians(b);var e=Math.cos(a);var c=Math.sin(a);f.overlays.visit(function(l,i){var j=i.overlay.getBounds(f);if(!f.view.graph.getModel().isEdge(f.cell)){if(f.shape!=null&&b!=0){var h=j.getCenterX();var k=j.getCenterY();var g=mxUtils.getRotatedPoint(new mxPoint(h,k),e,c,new mxPoint(f.getCenterX(),f.getCenterY()));h=g.x;k=g.y;j.x=Math.round(h-j.width/2);j.y=Math.round(k-j.height/2)}}if(d||i.bounds==null||i.scale!=f.view.scale||!i.bounds.equals(j)){i.bounds=j;i.scale=f.view.scale;i.redraw()}})}};mxCellRenderer.prototype.redrawControl=function(e,d){var f=e.view.graph.getFoldingImage(e);if(e.control!=null&&f!=null){var c=this.getControlBounds(e,f.width,f.height);var b=(this.legacyControlPosition)?mxUtils.getValue(e.style,mxConstants.STYLE_ROTATION,0):e.shape.getTextRotation();var a=e.view.scale;if(d||e.control.scale!=a||!e.control.bounds.equals(c)||e.control.rotation!=b){e.control.rotation=b;e.control.bounds=c;e.control.scale=a;e.control.redraw()}}};mxCellRenderer.prototype.getControlBounds=function(a,j,e){if(a.control!=null){var m=a.view.scale;var d=a.getCenterX();var c=a.getCenterY();if(!a.view.graph.getModel().isEdge(a.cell)){d=a.x+j*m;c=a.y+e*m;if(a.shape!=null){var b=a.shape.getShapeRotation();if(this.legacyControlPosition){b=mxUtils.getValue(a.style,mxConstants.STYLE_ROTATION,0)}else{if(a.shape.isPaintBoundsInverted()){var l=(a.width-a.height)/2;d+=l;c-=l}}if(b!=0){var g=mxUtils.toRadians(b);var k=Math.cos(g);var f=Math.sin(g);var i=mxUtils.getRotatedPoint(new mxPoint(d,c),k,f,new mxPoint(a.getCenterX(),a.getCenterY()));d=i.x;c=i.y}}}return(a.view.graph.getModel().isEdge(a.cell))?new mxRectangle(Math.round(d-j/2*m),Math.round(c-e/2*m),Math.round(j*m),Math.round(e*m)):new mxRectangle(Math.round(d-j/2*m),Math.round(c-e/2*m),Math.round(j*m),Math.round(e*m))}return null};mxCellRenderer.prototype.insertStateAfter=function(h,f,g){var a=this.getShapesForState(h);for(var e=0;e<a.length;e++){if(a[e]!=null&&a[e].node!=null){var d=a[e].node.parentNode!=h.view.getDrawPane()&&a[e].node.parentNode!=h.view.getOverlayPane();var b=(d)?g:f;if(b!=null&&b.nextSibling!=a[e].node){if(b.nextSibling==null){b.parentNode.appendChild(a[e].node)}else{b.parentNode.insertBefore(a[e].node,b.nextSibling)}}else{if(b==null){if(a[e].node.parentNode==h.view.graph.container){var c=h.view.canvas;while(c!=null&&c.parentNode!=h.view.graph.container){c=c.parentNode}if(c!=null&&c.nextSibling!=null){if(c.nextSibling!=a[e].node){a[e].node.parentNode.insertBefore(a[e].node,c.nextSibling)}}else{a[e].node.parentNode.appendChild(a[e].node)}}else{if(a[e].node.parentNode.firstChild!=null&&a[e].node.parentNode.firstChild!=a[e].node){a[e].node.parentNode.insertBefore(a[e].node,a[e].node.parentNode.firstChild)}}}}if(d){g=a[e].node}else{f=a[e].node}}}return[f,g]};mxCellRenderer.prototype.getShapesForState=function(a){return[a.shape,a.text,a.control]};mxCellRenderer.prototype.redraw=function(c,b,a){var d=this.redrawShape(c,b,a);if(c.shape!=null&&(a==null||a)){this.redrawLabel(c,d);this.redrawCellOverlays(c,d);this.redrawControl(c,d)}};mxCellRenderer.prototype.redrawShape=function(d,c,a){var b=d.view.graph.model;var e=false;if(d.shape!=null&&d.shape.style!=null&&d.style!=null&&d.shape.style[mxConstants.STYLE_SHAPE]!=d.style[mxConstants.STYLE_SHAPE]){d.shape.destroy();d.shape=null}if(d.shape==null&&d.view.graph.container!=null&&d.cell!=d.view.currentRoot&&(b.isVertex(d.cell)||b.isEdge(d.cell))){d.shape=this.createShape(d);if(d.shape!=null){d.shape.antiAlias=this.antiAlias;this.createIndicatorShape(d);this.initializeShape(d);this.createCellOverlays(d);this.installListeners(d);d.view.graph.selectionCellsHandler.updateHandler(d)}}else{if(d.shape!=null&&!mxUtils.equalEntries(d.shape.style,d.style)){d.shape.resetStyles();this.configureShape(d);d.view.graph.selectionCellsHandler.updateHandler(d);c=true}}if(d.shape!=null){this.createControl(d);if(c||d.shape.bounds==null||d.shape.scale!=d.view.scale||(d.absolutePoints==null&&!d.shape.bounds.equals(d))||(d.absolutePoints!=null&&!mxUtils.equalPoints(d.shape.points,d.absolutePoints))){if(d.absolutePoints!=null){d.shape.points=d.absolutePoints.slice();d.shape.bounds=null}else{d.shape.points=null;d.shape.bounds=new mxRectangle(d.x,d.y,d.width,d.height)}d.shape.scale=d.view.scale;if(a==null||a){d.shape.redraw()}else{d.shape.updateBoundingBox()}e=true}}return e};mxCellRenderer.prototype.destroy=function(a){if(a.shape!=null){if(a.text!=null){a.text.destroy();a.text=null}if(a.overlays!=null){a.overlays.visit(function(c,b){b.destroy()});a.overlays=null}if(a.control!=null){a.control.destroy();a.control=null}a.shape.destroy();a.shape=null}};