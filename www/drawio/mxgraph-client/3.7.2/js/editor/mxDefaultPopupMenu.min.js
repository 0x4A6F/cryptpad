function mxDefaultPopupMenu(a){this.config=a}mxDefaultPopupMenu.prototype.imageBasePath=null;mxDefaultPopupMenu.prototype.config=null;mxDefaultPopupMenu.prototype.createMenu=function(c,f,a,b){if(this.config!=null){var e=this.createConditions(c,a,b);var d=this.config.firstChild;this.addItems(c,f,a,b,e,d,null)}};mxDefaultPopupMenu.prototype.addItems=function(editor,menu,cell,evt,conditions,item,parent){var addSeparator=false;while(item!=null){if(item.nodeName=="add"){var condition=item.getAttribute("if");if(condition==null||conditions[condition]){var as=item.getAttribute("as");as=mxResources.get(as)||as;var funct=mxUtils.eval(mxUtils.getTextContent(item));var action=item.getAttribute("action");var icon=item.getAttribute("icon");var iconCls=item.getAttribute("iconCls");var enabledCond=item.getAttribute("enabled-if");var enabled=enabledCond==null||conditions[enabledCond];if(addSeparator){menu.addSeparator(parent);addSeparator=false}if(icon!=null&&this.imageBasePath){icon=this.imageBasePath+icon}var row=this.addAction(menu,editor,as,icon,funct,action,cell,parent,iconCls,enabled);this.addItems(editor,menu,cell,evt,conditions,item.firstChild,row)}}else{if(item.nodeName=="separator"){addSeparator=true}}item=item.nextSibling}};mxDefaultPopupMenu.prototype.addAction=function(b,e,d,h,a,c,j,i,k,f){var g=function(l){if(typeof(a)=="function"){a.call(e,e,j,l)}if(c!=null){e.execute(c,j,l)}};return b.addItem(d,h,g,i,k,f)};mxDefaultPopupMenu.prototype.createConditions=function(editor,cell,evt){var model=editor.graph.getModel();var childCount=model.getChildCount(cell);var conditions=[];conditions.nocell=cell==null;conditions.ncells=editor.graph.getSelectionCount()>1;conditions.notRoot=model.getRoot()!=model.getParent(editor.graph.getDefaultParent());conditions.cell=cell!=null;var isCell=cell!=null&&editor.graph.getSelectionCount()==1;conditions.nonEmpty=isCell&&childCount>0;conditions.expandable=isCell&&editor.graph.isCellFoldable(cell,false);conditions.collapsable=isCell&&editor.graph.isCellFoldable(cell,true);conditions.validRoot=isCell&&editor.graph.isValidRoot(cell);conditions.emptyValidRoot=conditions.validRoot&&childCount==0;conditions.swimlane=isCell&&editor.graph.isSwimlane(cell);var condNodes=this.config.getElementsByTagName("condition");for(var i=0;i<condNodes.length;i++){var funct=mxUtils.eval(mxUtils.getTextContent(condNodes[i]));var name=condNodes[i].getAttribute("name");if(name!=null&&typeof(funct)=="function"){conditions[name]=funct(editor,cell,evt)}}return conditions};