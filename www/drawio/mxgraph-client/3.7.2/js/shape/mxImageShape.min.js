function mxImageShape(b,e,d,c,a){mxShape.call(this);this.bounds=b;this.image=e;this.fill=d;this.stroke=c;this.strokewidth=(a!=null)?a:1;this.shadow=false}mxUtils.extend(mxImageShape,mxRectangleShape);mxImageShape.prototype.preserveImageAspect=true;mxImageShape.prototype.getSvgScreenOffset=function(){return 0};mxImageShape.prototype.apply=function(a){mxShape.prototype.apply.apply(this,arguments);this.fill=null;this.stroke=null;this.gradient=null;if(this.style!=null){this.preserveImageAspect=mxUtils.getNumber(this.style,mxConstants.STYLE_IMAGE_ASPECT,1)==1;this.flipH=this.flipH||mxUtils.getValue(this.style,"imageFlipH",0)==1;this.flipV=this.flipV||mxUtils.getValue(this.style,"imageFlipV",0)==1}};mxImageShape.prototype.isHtmlAllowed=function(){return !this.preserveImageAspect};mxImageShape.prototype.createHtml=function(){var a=document.createElement("div");a.style.position="absolute";return a};mxImageShape.prototype.paintVertexShape=function(i,a,g,b,d){if(this.image!=null){var f=mxUtils.getValue(this.style,mxConstants.STYLE_IMAGE_BACKGROUND,null);var e=mxUtils.getValue(this.style,mxConstants.STYLE_IMAGE_BORDER,null);if(f!=null){i.setFillColor(f);i.setStrokeColor(e);i.rect(a,g,b,d);i.fillAndStroke()}i.image(a,g,b,d,this.image,this.preserveImageAspect,false,false);var e=mxUtils.getValue(this.style,mxConstants.STYLE_IMAGE_BORDER,null);if(e!=null){i.setShadow(false);i.setStrokeColor(e);i.rect(a,g,b,d);i.stroke()}}else{mxRectangleShape.prototype.paintBackground.apply(this,arguments)}};mxImageShape.prototype.redrawHtmlShape=function(){this.node.style.left=Math.round(this.bounds.x)+"px";this.node.style.top=Math.round(this.bounds.y)+"px";this.node.style.width=Math.max(0,Math.round(this.bounds.width))+"px";this.node.style.height=Math.max(0,Math.round(this.bounds.height))+"px";this.node.innerHTML="";if(this.image!=null){var e=mxUtils.getValue(this.style,mxConstants.STYLE_IMAGE_BACKGROUND,"");var d=mxUtils.getValue(this.style,mxConstants.STYLE_IMAGE_BORDER,"");this.node.style.backgroundColor=e;this.node.style.borderColor=d;var b=mxClient.IS_IE6||((document.documentMode==null||document.documentMode<=8)&&this.rotation!=0);var a=document.createElement((b)?mxClient.VML_PREFIX+":image":"img");a.setAttribute("border","0");a.style.position="absolute";a.src=this.image;var c=(this.opacity<100)?"alpha(opacity="+this.opacity+")":"";this.node.style.filter=c;if(this.flipH&&this.flipV){c+="progid:DXImageTransform.Microsoft.BasicImage(rotation=2)"}else{if(this.flipH){c+="progid:DXImageTransform.Microsoft.BasicImage(mirror=1)"}else{if(this.flipV){c+="progid:DXImageTransform.Microsoft.BasicImage(rotation=2, mirror=1)"}}}if(a.style.filter!=c){a.style.filter=c}if(a.nodeName=="image"){a.style.rotation=this.rotation}else{if(this.rotation!=0){mxUtils.setPrefixedStyle(a.style,"transform","rotate("+this.rotation+"deg)")}else{mxUtils.setPrefixedStyle(a.style,"transform","")}}a.style.width=this.node.style.width;a.style.height=this.node.style.height;this.node.style.backgroundImage="";this.node.appendChild(a)}else{this.setTransparentBackgroundImage(this.node)}};