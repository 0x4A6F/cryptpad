function mxLabel(b,d,c,a){mxRectangleShape.call(this,b,d,c,a)}mxUtils.extend(mxLabel,mxRectangleShape);mxLabel.prototype.imageSize=mxConstants.DEFAULT_IMAGESIZE;mxLabel.prototype.spacing=2;mxLabel.prototype.indicatorSize=10;mxLabel.prototype.indicatorSpacing=2;mxLabel.prototype.init=function(a){mxShape.prototype.init.apply(this,arguments);if(this.indicatorShape!=null){this.indicator=new this.indicatorShape();this.indicator.dialect=this.dialect;this.indicator.init(this.node)}};mxLabel.prototype.redraw=function(){if(this.indicator!=null){this.indicator.fill=this.indicatorColor;this.indicator.stroke=this.indicatorStrokeColor;this.indicator.gradient=this.indicatorGradientColor;this.indicator.direction=this.indicatorDirection}mxShape.prototype.redraw.apply(this,arguments)};mxLabel.prototype.isHtmlAllowed=function(){return mxRectangleShape.prototype.isHtmlAllowed.apply(this,arguments)&&this.indicatorColor==null&&this.indicatorShape==null};mxLabel.prototype.paintForeground=function(f,a,e,b,d){this.paintImage(f,a,e,b,d);this.paintIndicator(f,a,e,b,d);mxRectangleShape.prototype.paintForeground.apply(this,arguments)};mxLabel.prototype.paintImage=function(g,a,f,b,d){if(this.image!=null){var e=this.getImageBounds(a,f,b,d);g.image(e.x,e.y,e.width,e.height,this.image,false,false,false)}};mxLabel.prototype.getImageBounds=function(g,e,i,b){var c=mxUtils.getValue(this.style,mxConstants.STYLE_IMAGE_ALIGN,mxConstants.ALIGN_LEFT);var f=mxUtils.getValue(this.style,mxConstants.STYLE_IMAGE_VERTICAL_ALIGN,mxConstants.ALIGN_MIDDLE);var a=mxUtils.getNumber(this.style,mxConstants.STYLE_IMAGE_WIDTH,mxConstants.DEFAULT_IMAGESIZE);var j=mxUtils.getNumber(this.style,mxConstants.STYLE_IMAGE_HEIGHT,mxConstants.DEFAULT_IMAGESIZE);var d=mxUtils.getNumber(this.style,mxConstants.STYLE_SPACING,this.spacing)+5;if(c==mxConstants.ALIGN_CENTER){g+=(i-a)/2}else{if(c==mxConstants.ALIGN_RIGHT){g+=i-a-d}else{g+=d}}if(f==mxConstants.ALIGN_TOP){e+=d}else{if(f==mxConstants.ALIGN_BOTTOM){e+=b-j-d}else{e+=(b-j)/2}}return new mxRectangle(g,e,a,j)};mxLabel.prototype.paintIndicator=function(g,a,f,b,d){if(this.indicator!=null){this.indicator.bounds=this.getIndicatorBounds(a,f,b,d);this.indicator.paint(g)}else{if(this.indicatorImage!=null){var e=this.getIndicatorBounds(a,f,b,d);g.image(e.x,e.y,e.width,e.height,this.indicatorImage,false,false,false)}}};mxLabel.prototype.getIndicatorBounds=function(g,e,i,b){var c=mxUtils.getValue(this.style,mxConstants.STYLE_IMAGE_ALIGN,mxConstants.ALIGN_LEFT);var f=mxUtils.getValue(this.style,mxConstants.STYLE_IMAGE_VERTICAL_ALIGN,mxConstants.ALIGN_MIDDLE);var a=mxUtils.getNumber(this.style,mxConstants.STYLE_INDICATOR_WIDTH,this.indicatorSize);var j=mxUtils.getNumber(this.style,mxConstants.STYLE_INDICATOR_HEIGHT,this.indicatorSize);var d=this.spacing+5;if(c==mxConstants.ALIGN_RIGHT){g+=i-a-d}else{if(c==mxConstants.ALIGN_CENTER){g+=(i-a)/2}else{g+=d}}if(f==mxConstants.ALIGN_BOTTOM){e+=b-j-d}else{if(f==mxConstants.ALIGN_TOP){e+=d}else{e+=(b-j)/2}}return new mxRectangle(g,e,a,j)};mxLabel.prototype.redrawHtmlShape=function(){mxRectangleShape.prototype.redrawHtmlShape.apply(this,arguments);while(this.node.hasChildNodes()){this.node.removeChild(this.node.lastChild)}if(this.image!=null){var b=document.createElement("img");b.style.position="relative";b.setAttribute("border","0");var a=this.getImageBounds(this.bounds.x,this.bounds.y,this.bounds.width,this.bounds.height);a.x-=this.bounds.x;a.y-=this.bounds.y;b.style.left=Math.round(a.x)+"px";b.style.top=Math.round(a.y)+"px";b.style.width=Math.round(a.width)+"px";b.style.height=Math.round(a.height)+"px";b.src=this.image;this.node.appendChild(b)}};