function mxArrowConnector(c,e,d,b,a,g,f){mxShape.call(this);this.points=c;this.fill=e;this.stroke=d;this.strokewidth=(b!=null)?b:1;this.arrowWidth=(a!=null)?a:mxConstants.ARROW_WIDTH;this.arrowSpacing=(g!=null)?g:mxConstants.ARROW_SPACING;this.startSize=mxConstants.ARROW_SIZE/5;this.endSize=mxConstants.ARROW_SIZE/5}mxUtils.extend(mxArrowConnector,mxShape);mxArrowConnector.prototype.useSvgBoundingBox=true;mxArrowConnector.prototype.resetStyles=function(){mxShape.prototype.resetStyles.apply(this,arguments);this.arrowSpacing=mxConstants.ARROW_SPACING};mxArrowConnector.prototype.apply=function(a){mxShape.prototype.apply.apply(this,arguments);if(this.style!=null){this.startSize=mxUtils.getNumber(this.style,mxConstants.STYLE_STARTSIZE,mxConstants.ARROW_SIZE/5)*3;this.endSize=mxUtils.getNumber(this.style,mxConstants.STYLE_ENDSIZE,mxConstants.ARROW_SIZE/5)*3}};mxArrowConnector.prototype.augmentBoundingBox=function(b){mxShape.prototype.augmentBoundingBox.apply(this,arguments);var a=this.getEdgeWidth();if(this.isMarkerStart()){a=Math.max(a,this.getStartArrowWidth())}if(this.isMarkerEnd()){a=Math.max(a,this.getEndArrowWidth())}b.grow((a/2+this.strokewidth)*this.scale)};mxArrowConnector.prototype.paintEdgeShape=function(aa,ab){var M=this.strokewidth;if(this.outline){M=Math.max(1,mxUtils.getNumber(this.style,mxConstants.STYLE_STROKEWIDTH,this.strokewidth))}var T=this.getStartArrowWidth()+M;var F=this.getEndArrowWidth()+M;var d=this.outline?this.getEdgeWidth()+M:this.getEdgeWidth();var O=this.isOpenEnded();var f=this.isMarkerStart();var P=this.isMarkerEnd();var h=(O)?0:this.arrowSpacing+M/2;var E=this.startSize+M;var L=this.endSize+M;var Q=this.isArrowRounded();var A=ab[ab.length-1];var r=1;while(r<ab.length-1&&ab[r].x==ab[0].x&&ab[r].y==ab[0].y){r++}var m=ab[r].x-ab[0].x;var k=ab[r].y-ab[0].y;var o=Math.sqrt(m*m+k*k);if(o==0){return}var V=m/o;var G,H=V;var U=k/o;var t,u=U;var S=d*U;var R=-d*V;var j=[];if(Q){aa.setLineJoin("round")}else{if(ab.length>2){aa.setMiterLimit(1.42)}}aa.begin();var x=V;var v=U;if(f&&!O){this.paintMarker(aa,ab[0].x,ab[0].y,V,U,E,T,d,h,true)}else{var K=ab[0].x+S/2+h*V;var J=ab[0].y+R/2+h*U;var n=ab[0].x-S/2+h*V;var l=ab[0].y-R/2+h*U;if(O){aa.moveTo(K,J);j.push(function(){aa.lineTo(n,l)})}else{aa.moveTo(n,l);aa.lineTo(K,J)}}var N=0;var D=0;var g=0;for(var W=0;W<ab.length-2;W++){var I=mxUtils.relativeCcw(ab[W].x,ab[W].y,ab[W+1].x,ab[W+1].y,ab[W+2].x,ab[W+2].y);N=ab[W+2].x-ab[W+1].x;D=ab[W+2].y-ab[W+1].y;g=Math.sqrt(N*N+D*D);if(g!=0){H=N/g;u=D/g;var X=V*H+U*u;tmp=Math.max(Math.sqrt((X+1)/2),0.04);G=(V+H);t=(U+u);var e=Math.sqrt(G*G+t*t);if(e!=0){G=G/e;t=t/e;var z=Math.max(tmp,Math.min(this.strokewidth/200+0.04,0.35));var p=(I!=0&&Q)?Math.max(0.1,z):Math.max(tmp,0.06);var s=ab[W+1].x+t*d/2/p;var q=ab[W+1].y-G*d/2/p;var b=ab[W+1].x-t*d/2/p;var a=ab[W+1].y+G*d/2/p;if(I==0||!Q){aa.lineTo(s,q);(function(c,i){j.push(function(){aa.lineTo(c,i)})})(b,a)}else{if(I==-1){var y=b+U*d;var w=a-V*d;var Z=b+u*d;var Y=a-H*d;aa.lineTo(y,w);aa.quadTo(s,q,Z,Y);(function(c,i){j.push(function(){aa.lineTo(c,i)})})(b,a)}else{aa.lineTo(s,q);(function(i,af){var ae=s-U*d;var ad=q+V*d;var ac=s-u*d;var c=q+H*d;j.push(function(){aa.quadTo(i,af,ae,ad)});j.push(function(){aa.lineTo(ac,c)})})(b,a)}}V=H;U=u}}}S=d*u;R=-d*H;if(P&&!O){this.paintMarker(aa,A.x,A.y,-V,-U,L,F,d,h,false)}else{aa.lineTo(A.x-h*H+S/2,A.y-h*u+R/2);var C=A.x-h*H-S/2;var B=A.y-h*u-R/2;if(!O){aa.lineTo(C,B)}else{aa.moveTo(C,B);j.splice(0,0,function(){aa.moveTo(C,B)})}}for(var W=j.length-1;W>=0;W--){j[W]()}if(O){aa.end();aa.stroke()}else{aa.close();aa.fillAndStroke()}aa.setShadow(false);aa.setMiterLimit(4);if(Q){aa.setLineJoin("flat")}if(ab.length>2){aa.setMiterLimit(4);if(f&&!O){aa.begin();this.paintMarker(aa,ab[0].x,ab[0].y,x,v,E,T,d,h,true);aa.stroke();aa.end()}if(P&&!O){aa.begin();this.paintMarker(aa,A.x,A.y,-V,-U,L,F,d,h,true);aa.stroke();aa.end()}}};mxArrowConnector.prototype.paintMarker=function(l,b,a,i,h,p,g,j,k,d){var n=j/g;var f=j*h/2;var e=-j*i/2;var o=(k+p)*i;var m=(k+p)*h;if(d){l.moveTo(b-f+o,a-e+m)}else{l.lineTo(b-f+o,a-e+m)}l.lineTo(b-f/n+o,a-e/n+m);l.lineTo(b+k*i,a+k*h);l.lineTo(b+f/n+o,a+e/n+m);l.lineTo(b+f+o,a+e+m)};mxArrowConnector.prototype.isArrowRounded=function(){return this.isRounded};mxArrowConnector.prototype.getStartArrowWidth=function(){return mxConstants.ARROW_WIDTH};mxArrowConnector.prototype.getEndArrowWidth=function(){return mxConstants.ARROW_WIDTH};mxArrowConnector.prototype.getEdgeWidth=function(){return mxConstants.ARROW_WIDTH/3};mxArrowConnector.prototype.isOpenEnded=function(){return false};mxArrowConnector.prototype.isMarkerStart=function(){return(mxUtils.getValue(this.style,mxConstants.STYLE_STARTARROW,mxConstants.NONE)!=mxConstants.NONE)};mxArrowConnector.prototype.isMarkerEnd=function(){return(mxUtils.getValue(this.style,mxConstants.STYLE_ENDARROW,mxConstants.NONE)!=mxConstants.NONE)};