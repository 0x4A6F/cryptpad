function mxStackLayout(e,a,f,c,d,b){mxGraphLayout.call(this,e);this.horizontal=(a!=null)?a:true;this.spacing=(f!=null)?f:0;this.x0=(c!=null)?c:0;this.y0=(d!=null)?d:0;this.border=(b!=null)?b:0}mxStackLayout.prototype=new mxGraphLayout();mxStackLayout.prototype.constructor=mxStackLayout;mxStackLayout.prototype.horizontal=null;mxStackLayout.prototype.spacing=null;mxStackLayout.prototype.x0=null;mxStackLayout.prototype.y0=null;mxStackLayout.prototype.border=0;mxStackLayout.prototype.marginTop=0;mxStackLayout.prototype.marginLeft=0;mxStackLayout.prototype.marginRight=0;mxStackLayout.prototype.marginBottom=0;mxStackLayout.prototype.keepFirstLocation=false;mxStackLayout.prototype.fill=false;mxStackLayout.prototype.resizeParent=false;mxStackLayout.prototype.resizeParentMax=false;mxStackLayout.prototype.resizeLast=false;mxStackLayout.prototype.wrap=null;mxStackLayout.prototype.borderCollapse=true;mxStackLayout.prototype.isHorizontal=function(){return this.horizontal};mxStackLayout.prototype.moveCell=function(p,k,j){var h=this.graph.getModel();var n=h.getParent(p);var b=this.isHorizontal();if(p!=null&&n!=null){var g=0;var o=0;var d=h.getChildCount(n);var m=(b)?k:j;var f=this.graph.getView().getState(n);if(f!=null){m-=(b)?f.x:f.y}m/=this.graph.view.scale;for(g=0;g<d;g++){var c=h.getChildAt(n,g);if(c!=p){var a=h.getGeometry(c);if(a!=null){var e=(b)?a.x+a.width/2:a.y+a.height/2;if(o<=m&&e>m){break}o=e}}}var l=n.getIndex(p);l=Math.max(0,g-((g>l)?1:0));h.add(n,p,l)}};mxStackLayout.prototype.getParentSize=function(e){var c=this.graph.getModel();var b=c.getGeometry(e);if(this.graph.container!=null&&((b==null&&c.isLayer(e))||e==this.graph.getView().currentRoot)){var d=this.graph.container.offsetWidth-1;var a=this.graph.container.offsetHeight-1;b=new mxRectangle(0,0,d,a)}return b};mxStackLayout.prototype.execute=function(k){if(k!=null){var m=this.getParentSize(k);var s=this.isHorizontal();var e=this.graph.getModel();var d=null;if(m!=null){d=(s)?m.height-this.marginTop-this.marginBottom:m.width-this.marginLeft-this.marginRight}d-=2*this.spacing+2*this.border;var r=this.x0+this.border+this.marginLeft;var b=this.y0+this.border+this.marginTop;if(this.graph.isSwimlane(k)){var q=this.graph.getCellStyle(k);var f=mxUtils.getNumber(q,mxConstants.STYLE_STARTSIZE,mxConstants.DEFAULT_STARTSIZE);var a=mxUtils.getValue(q,mxConstants.STYLE_HORIZONTAL,true)==1;if(m!=null){if(a){f=Math.min(f,m.height)}else{f=Math.min(f,m.width)}}if(s==a){d-=f}if(a){b+=f}else{r+=f}}e.beginUpdate();try{var t=0;var j=null;var c=0;var p=null;var o=e.getChildCount(k);for(var n=0;n<o;n++){var h=e.getChildAt(k,n);if(!this.isVertexIgnored(h)&&this.isVertexMovable(h)){var u=e.getGeometry(h);if(u!=null){u=u.clone();if(this.wrap!=null&&j!=null){if((s&&j.x+j.width+u.width+2*this.spacing>this.wrap)||(!s&&j.y+j.height+u.height+2*this.spacing>this.wrap)){j=null;if(s){b+=t+this.spacing}else{r+=t+this.spacing}t=0}}t=Math.max(t,(s)?u.height:u.width);var l=0;if(!this.borderCollapse){var g=this.graph.getCellStyle(h);l=mxUtils.getNumber(g,mxConstants.STYLE_STROKEWIDTH,1)}if(j!=null){if(s){u.x=c+this.spacing+Math.floor(l/2)}else{u.y=c+this.spacing+Math.floor(l/2)}}else{if(!this.keepFirstLocation){if(s){u.x=r}else{u.y=b}}}if(s){u.y=b}else{u.x=r}if(this.fill&&d!=null){if(s){u.height=d}else{u.width=d}}this.setChildGeometry(h,u);p=h;j=u;if(s){c=j.x+j.width+Math.floor(l/2)}else{c=j.y+j.height+Math.floor(l/2)}}}}if(this.resizeParent&&m!=null&&j!=null&&!this.graph.isCellCollapsed(k)){this.updateParentGeometry(k,m,j)}else{if(this.resizeLast&&m!=null&&j!=null&&p!=null){if(s){j.width=m.width-j.x-this.spacing-this.marginRight-this.marginLeft}else{j.height=m.height-j.y-this.spacing-this.marginBottom}this.setChildGeometry(p,j)}}}finally{e.endUpdate()}}};mxStackLayout.prototype.setChildGeometry=function(c,b){var a=this.graph.getCellGeometry(c);if(a==null||b.x!=a.x||b.y!=a.y||b.width!=a.width||b.height!=a.height){this.graph.getModel().setGeometry(c,b)}};mxStackLayout.prototype.updateParentGeometry=function(e,b,f){var a=this.isHorizontal();var c=this.graph.getModel();var g=b.clone();if(a){var d=f.x+f.width+this.spacing+this.marginRight;if(this.resizeParentMax){g.width=Math.max(g.width,d)}else{g.width=d}}else{var d=f.y+f.height+this.spacing+this.marginBottom;if(this.resizeParentMax){g.height=Math.max(g.height,d)}else{g.height=d}}if(b.x!=g.x||b.y!=g.y||b.width!=g.width||b.height!=g.height){c.setGeometry(e,g)}};